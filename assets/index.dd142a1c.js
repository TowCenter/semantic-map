(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function At(){}function Nr(t){return t()}function Kn(){return Object.create(null)}function Ut(t){t.forEach(Nr)}function Ir(t){return typeof t=="function"}function nn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function wi(t){return Object.keys(t).length===0}function R(t,e){t.appendChild(e)}function at(t,e,n){t.insertBefore(e,n||null)}function st(t){t.parentNode.removeChild(t)}function zr(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function X(t){return document.createElement(t)}function xt(t){return document.createTextNode(t)}function lt(){return xt(" ")}function Or(){return xt("")}function yt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vi(t){return t===""?null:+t}function bi(t){return Array.from(t.childNodes)}function It(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Qn(t,e){t.value=e==null?"":e}function Nt(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Gn(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function ki(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function xi(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let me;function ge(t){me=t}function Lr(){if(!me)throw new Error("Function called outside component initialization");return me}function qn(t){Lr().$$.on_mount.push(t)}function Pr(){const t=Lr();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=xi(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const fe=[],Lt=[],Ie=[],gn=[],Si=Promise.resolve();let mn=!1;function Mi(){mn||(mn=!0,Si.then(Fr))}function Be(t){Ie.push(t)}function He(t){gn.push(t)}const fn=new Set;let Ee=0;function Fr(){const t=me;do{for(;Ee<fe.length;){const e=fe[Ee];Ee++,ge(e),Ei(e.$$)}for(ge(null),fe.length=0,Ee=0;Lt.length;)Lt.pop()();for(let e=0;e<Ie.length;e+=1){const n=Ie[e];fn.has(n)||(fn.add(n),n())}Ie.length=0}while(fe.length);for(;gn.length;)gn.pop()();mn=!1,fn.clear(),ge(t)}function Ei(t){if(t.fragment!==null){t.update(),Ut(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Be)}}const ze=new Set;let Zt;function Ci(){Zt={r:0,c:[],p:Zt}}function Di(){Zt.r||Ut(Zt.c),Zt=Zt.p}function ee(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function he(t,e,n,r){if(t&&t.o){if(ze.has(t))return;ze.add(t),Zt.c.push(()=>{ze.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Xe(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function _n(t){t&&t.c()}function Ue(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||Be(()=>{const s=t.$$.on_mount.map(Nr).filter(Ir);t.$$.on_destroy?t.$$.on_destroy.push(...s):Ut(s),t.$$.on_mount=[]}),o.forEach(Be)}function Ye(t,e){const n=t.$$;n.fragment!==null&&(Ut(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ai(t,e){t.$$.dirty[0]===-1&&(fe.push(t),Mi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rn(t,e,n,r,i,o,s,a=[-1]){const u=me;ge(t);const l=t.$$={fragment:null,ctx:[],props:o,update:At,not_equal:i,bound:Kn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Kn(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=n?n(t,e.props||{},(h,_,...y)=>{const q=y.length?y[0]:_;return l.ctx&&i(l.ctx[h],l.ctx[h]=q)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](q),c&&Ai(t,h)),_}):[],l.update(),c=!0,Ut(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const h=bi(e.target);l.fragment&&l.fragment.l(h),h.forEach(st)}else l.fragment&&l.fragment.c();e.intro&&ee(t.$$.fragment),Ue(t,e.target,e.anchor,e.customElement),Fr()}ge(u)}class on{$destroy(){Ye(this,1),this.$destroy=At}$on(e,n){if(!Ir(n))return At;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!wi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Ri,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function c(p){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(f){var v=$(f);v.chunkSize=parseInt(v.chunkSize),f.step||f.chunk||(v.chunkSize=null),this._handle=new P(v),(this._handle.streamer=this)._config=v}.call(this,p),this.parseChunk=function(f,v){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let V=this._config.newline;V||(E=this._config.quoteChar||'"',V=this._handle.guessLineEndings(f,E)),f=[...f.split(V).slice(d)].join(V)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(E=this._config.beforeFirstChunk(f))!==void 0&&(f=E),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+f,E=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(f=E.meta.cursor,d=(this._finished||(this._partialLine=d.substring(f-this._baseIndex),this._baseIndex=f),E&&E.data&&(this._rowCount+=E.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:E,workerId:l.WORKER_ID,finished:d});else if(U(this._config.chunk)&&!v){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=E=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!d||!U(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(f){U(this._config.error)?this._config.error(f):s&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:f,finished:!1})}}function h(p){var f;(p=p||{}).chunkSize||(p.chunkSize=l.RemoteChunkSize),c.call(this,p),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(v){this._input=v,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),o||(f.onload=j(this._chunkLoaded,this),f.onerror=j(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var v,d=this._config.downloadRequestHeaders;for(v in d)f.setRequestHeader(v,d[v])}var E;this._config.chunkSize&&(E=this._start+this._config.chunkSize-1,f.setRequestHeader("Range","bytes="+this._start+"-"+E));try{f.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}o&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize||f.responseText.length,this._finished=!this._config.chunkSize||this._start>=(v=>(v=v.getResponseHeader("Content-Range"))!==null?parseInt(v.substring(v.lastIndexOf("/")+1)):-1)(f),this.parseChunk(f.responseText)))},this._chunkError=function(v){v=f.statusText||v,this._sendError(new Error(v))}}function _(p){(p=p||{}).chunkSize||(p.chunkSize=l.LocalChunkSize),c.call(this,p);var f,v,d=typeof FileReader<"u";this.stream=function(E){this._input=E,v=E.slice||E.webkitSlice||E.mozSlice,d?((f=new FileReader).onload=j(this._chunkLoaded,this),f.onerror=j(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var E=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),E=v.call(E,this._start,V)),f.readAsText(E,this._config.encoding));d||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(f.error)}}function y(p){var f;c.call(this,p=p||{}),this.stream=function(v){return f=v,this._nextChunk()},this._nextChunk=function(){var v,d;if(!this._finished)return v=this._config.chunkSize,f=v?(d=f.substring(0,v),f.substring(v)):(d=f,""),this._finished=!f,this.parseChunk(d)}}function q(p){c.call(this,p=p||{});var f=[],v=!0,d=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):v=!0},this._streamData=j(function(E){try{f.push(typeof E=="string"?E:E.toString(this._config.encoding)),v&&(v=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(V){this._streamError(V)}},this),this._streamError=j(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=j(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=j(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(p){var f,v,d,E,V=Math.pow(2,53),g=-V,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,m=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,M=0,k=0,z=!1,N=!1,I=[],F={data:[],errors:[],meta:{}};function Z(K){return p.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function ut(){if(F&&d&&(pt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),d=!1),p.skipEmptyLines&&(F.data=F.data.filter(function(gt){return!Z(gt)})),ot()){let gt=function(w,B){U(p.transformHeader)&&(w=p.transformHeader(w,B)),I.push(w)};var nt=gt;if(F)if(Array.isArray(F.data[0])){for(var K=0;ot()&&K<F.data.length;K++)F.data[K].forEach(gt);F.data.splice(0,1)}else F.data.forEach(gt)}function rt(gt,w){for(var B=p.header?{}:[],Q=0;Q<gt.length;Q++){var G=Q,mt=gt[Q],mt=((J,dt)=>(ft=>(p.dynamicTypingFunction&&p.dynamicTyping[ft]===void 0&&(p.dynamicTyping[ft]=p.dynamicTypingFunction(ft)),(p.dynamicTyping[ft]||p.dynamicTyping)===!0))(J)?dt==="true"||dt==="TRUE"||dt!=="false"&&dt!=="FALSE"&&((ft=>{if(A.test(ft)&&(ft=parseFloat(ft),g<ft&&ft<V))return 1})(dt)?parseFloat(dt):m.test(dt)?new Date(dt):dt===""?null:dt):dt)(G=p.header?Q>=I.length?"__parsed_extra":I[Q]:G,mt=p.transform?p.transform(mt,G):mt);G==="__parsed_extra"?(B[G]=B[G]||[],B[G].push(mt)):B[G]=mt}return p.header&&(Q>I.length?pt("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+Q,k+w):Q<I.length&&pt("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+Q,k+w)),B}var _t;F&&(p.header||p.dynamicTyping||p.transform)&&(_t=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(rt),_t=F.data.length):F.data=rt(F.data,0),p.header&&F.meta&&(F.meta.fields=I),k+=_t)}function ot(){return p.header&&I.length===0}function pt(K,rt,_t,nt){K={type:K,code:rt,message:_t},nt!==void 0&&(K.row=nt),F.errors.push(K)}U(p.step)&&(E=p.step,p.step=function(K){F=K,ot()?ut():(ut(),F.data.length!==0&&(M+=K.data.length,p.preview&&M>p.preview?v.abort():(F.data=F.data[0],E(F,b))))}),this.parse=function(K,rt,_t){var nt=p.quoteChar||'"',nt=(p.newline||(p.newline=this.guessLineEndings(K,nt)),d=!1,p.delimiter?U(p.delimiter)&&(p.delimiter=p.delimiter(K),F.meta.delimiter=p.delimiter):((nt=((gt,w,B,Q,G)=>{var mt,J,dt,ft;G=G||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var wt=0;wt<G.length;wt++){for(var it,Et=G[wt],C=0,Y=0,H=0,L=(dt=void 0,new T({comments:Q,delimiter:Et,newline:w,preview:10}).parse(gt)),et=0;et<L.data.length;et++)B&&Z(L.data[et])?H++:(it=L.data[et].length,Y+=it,dt===void 0?dt=it:0<it&&(C+=Math.abs(it-dt),dt=it));0<L.data.length&&(Y/=L.data.length-H),(J===void 0||C<=J)&&(ft===void 0||ft<Y)&&1.99<Y&&(J=C,mt=Et,ft=Y)}return{successful:!!(p.delimiter=mt),bestDelimiter:mt}})(K,p.newline,p.skipEmptyLines,p.comments,p.delimitersToGuess)).successful?p.delimiter=nt.bestDelimiter:(d=!0,p.delimiter=l.DefaultDelimiter),F.meta.delimiter=p.delimiter),$(p));return p.preview&&p.header&&nt.preview++,f=K,v=new T(nt),F=v.parse(f,rt,_t),ut(),z?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,v.abort(),f=U(p.chunk)?"":f.substring(v.getCharIndex())},this.resume=function(){b.streamer._halted?(z=!1,b.streamer.parseChunk(f,!0)):setTimeout(b.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,v.abort(),F.meta.aborted=!0,U(p.complete)&&p.complete(F),f=""},this.guessLineEndings=function(gt,nt){gt=gt.substring(0,1048576);var nt=new RegExp(O(nt)+"([^]*?)"+O(nt),"gm"),_t=(gt=gt.replace(nt,"")).split("\r"),nt=gt.split(`
`),gt=1<nt.length&&nt[0].length<_t[0].length;if(_t.length===1||gt)return`
`;for(var w=0,B=0;B<_t.length;B++)_t[B][0]===`
`&&w++;return w>=_t.length/2?`\r
`:"\r"}}function O(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(p){var f=(p=p||{}).delimiter,v=p.newline,d=p.comments,E=p.step,V=p.preview,g=p.fastMode,A=null,m=!1,b=p.quoteChar==null?'"':p.quoteChar,M=b;if(p.escapeChar!==void 0&&(M=p.escapeChar),(typeof f!="string"||-1<l.BAD_DELIMITERS.indexOf(f))&&(f=","),d===f)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<l.BAD_DELIMITERS.indexOf(d))&&(d=!1),v!==`
`&&v!=="\r"&&v!==`\r
`&&(v=`
`);var k=0,z=!1;this.parse=function(N,I,F){if(typeof N!="string")throw new Error("Input must be a string");var Z=N.length,ut=f.length,ot=v.length,pt=d.length,K=U(E),rt=[],_t=[],nt=[],gt=k=0;if(!N)return C();if(g||g!==!1&&N.indexOf(b)===-1){for(var w=N.split(v),B=0;B<w.length;B++){if(nt=w[B],k+=nt.length,B!==w.length-1)k+=v.length;else if(F)return C();if(!d||nt.substring(0,pt)!==d){if(K){if(rt=[],ft(nt.split(f)),Y(),z)return C()}else ft(nt.split(f));if(V&&V<=B)return rt=rt.slice(0,V),C(!0)}}return C()}for(var Q=N.indexOf(f,k),G=N.indexOf(v,k),mt=new RegExp(O(M)+O(b),"g"),J=N.indexOf(b,k);;)if(N[k]===b)for(J=k,k++;;){if((J=N.indexOf(b,J+1))===-1)return F||_t.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:rt.length,index:k}),it();if(J===Z-1)return it(N.substring(k,J).replace(mt,b));if(b===M&&N[J+1]===M)J++;else if(b===M||J===0||N[J-1]!==M){Q!==-1&&Q<J+1&&(Q=N.indexOf(f,J+1));var dt=wt((G=G!==-1&&G<J+1?N.indexOf(v,J+1):G)===-1?Q:Math.min(Q,G));if(N.substr(J+1+dt,ut)===f){nt.push(N.substring(k,J).replace(mt,b)),N[k=J+1+dt+ut]!==b&&(J=N.indexOf(b,k)),Q=N.indexOf(f,k),G=N.indexOf(v,k);break}if(dt=wt(G),N.substring(J+1+dt,J+1+dt+ot)===v){if(nt.push(N.substring(k,J).replace(mt,b)),Et(J+1+dt+ot),Q=N.indexOf(f,k),J=N.indexOf(b,k),K&&(Y(),z))return C();if(V&&rt.length>=V)return C(!0);break}_t.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:rt.length,index:k}),J++}}else if(d&&nt.length===0&&N.substring(k,k+pt)===d){if(G===-1)return C();k=G+ot,G=N.indexOf(v,k),Q=N.indexOf(f,k)}else if(Q!==-1&&(Q<G||G===-1))nt.push(N.substring(k,Q)),k=Q+ut,Q=N.indexOf(f,k);else{if(G===-1)break;if(nt.push(N.substring(k,G)),Et(G+ot),K&&(Y(),z))return C();if(V&&rt.length>=V)return C(!0)}return it();function ft(H){rt.push(H),gt=k}function wt(H){var L=0;return L=H!==-1&&(H=N.substring(J+1,H))&&H.trim()===""?H.length:L}function it(H){return F||(H===void 0&&(H=N.substring(k)),nt.push(H),k=Z,ft(nt),K&&Y()),C()}function Et(H){k=H,ft(nt),nt=[],G=N.indexOf(v,k)}function C(H){if(p.header&&!I&&rt.length&&!m){var L=rt[0],et={},kt=new Set(L);let Mt=!1;for(let ht=0;ht<L.length;ht++){let ct=L[ht];if(et[ct=U(p.transformHeader)?p.transformHeader(ct,ht):ct]){let St,Ct=et[ct];for(;St=ct+"_"+Ct,Ct++,kt.has(St););kt.add(St),L[ht]=St,et[ct]++,Mt=!0,(A=A===null?{}:A)[St]=ct}else et[ct]=1,L[ht]=ct;kt.add(ct)}Mt&&console.warn("Duplicate headers found and renamed."),m=!0}return{data:rt,errors:_t,meta:{delimiter:f,linebreak:v,aborted:z,truncated:!!H,cursor:gt+(I||0),renamedHeaders:A}}}function Y(){E(C()),rt=[],_t=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return k}}function x(p){var f=p.data,v=a[f.workerId],d=!1;if(f.error)v.userError(f.error,f.file);else if(f.results&&f.results.data){var E={abort:function(){d=!0,D(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(U(v.userStep)){for(var V=0;V<f.results.data.length&&(v.userStep({data:f.results.data[V],errors:f.results.errors,meta:f.results.meta},E),!d);V++);delete f.results}else U(v.userChunk)&&(v.userChunk(f.results,E,f.file),delete f.results)}f.finished&&!d&&D(f.workerId,f.results)}function D(p,f){var v=a[p];U(v.userComplete)&&v.userComplete(f),v.terminate(),delete a[p]}function W(){throw new Error("Not implemented.")}function $(p){if(typeof p!="object"||p===null)return p;var f,v=Array.isArray(p)?[]:{};for(f in p)v[f]=$(p[f]);return v}function j(p,f){return function(){p.apply(f,arguments)}}function U(p){return typeof p=="function"}return l.parse=function(p,f){var v=(f=f||{}).dynamicTyping||!1;if(U(v)&&(f.dynamicTypingFunction=v,v={}),f.dynamicTyping=v,f.transform=!!U(f.transform)&&f.transform,!f.worker||!l.WORKERS_SUPPORTED)return v=null,l.NODE_STREAM_INPUT,typeof p=="string"?(p=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(p),v=new(f.download?h:y)(f)):p.readable===!0&&U(p.read)&&U(p.on)?v=new q(f):(r.File&&p instanceof File||p instanceof Object)&&(v=new _(f)),v.stream(p);(v=(()=>{var d;return!!l.WORKERS_SUPPORTED&&(d=(()=>{var E=r.URL||r.webkitURL||null,V=n.toString();return l.BLOB_URL||(l.BLOB_URL=E.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(d=new r.Worker(d)).onmessage=x,d.id=u++,a[d.id]=d)})()).userStep=f.step,v.userChunk=f.chunk,v.userComplete=f.complete,v.userError=f.error,f.step=U(f.step),f.chunk=U(f.chunk),f.complete=U(f.complete),f.error=U(f.error),delete f.worker,v.postMessage({input:p,config:f,workerId:v.id})},l.unparse=function(p,f){var v=!1,d=!0,E=",",V=`\r
`,g='"',A=g+g,m=!1,b=null,M=!1,k=((()=>{if(typeof f=="object"){if(typeof f.delimiter!="string"||l.BAD_DELIMITERS.filter(function(I){return f.delimiter.indexOf(I)!==-1}).length||(E=f.delimiter),typeof f.quotes!="boolean"&&typeof f.quotes!="function"&&!Array.isArray(f.quotes)||(v=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(m=f.skipEmptyLines),typeof f.newline=="string"&&(V=f.newline),typeof f.quoteChar=="string"&&(g=f.quoteChar),typeof f.header=="boolean"&&(d=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");b=f.columns}f.escapeChar!==void 0&&(A=f.escapeChar+g),f.escapeFormulae instanceof RegExp?M=f.escapeFormulae:typeof f.escapeFormulae=="boolean"&&f.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(g),"g"));if(typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(p)){if(!p.length||Array.isArray(p[0]))return z(null,p,m);if(typeof p[0]=="object")return z(b||Object.keys(p[0]),p,m)}else if(typeof p=="object")return typeof p.data=="string"&&(p.data=JSON.parse(p.data)),Array.isArray(p.data)&&(p.fields||(p.fields=p.meta&&p.meta.fields||b),p.fields||(p.fields=Array.isArray(p.data[0])?p.fields:typeof p.data[0]=="object"?Object.keys(p.data[0]):[]),Array.isArray(p.data[0])||typeof p.data[0]=="object"||(p.data=[p.data])),z(p.fields||[],p.data||[],m);throw new Error("Unable to serialize unrecognized input");function z(I,F,Z){var ut="",ot=(typeof I=="string"&&(I=JSON.parse(I)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(I)&&0<I.length),pt=!Array.isArray(F[0]);if(ot&&d){for(var K=0;K<I.length;K++)0<K&&(ut+=E),ut+=N(I[K],K);0<F.length&&(ut+=V)}for(var rt=0;rt<F.length;rt++){var _t=(ot?I:F[rt]).length,nt=!1,gt=ot?Object.keys(F[rt]).length===0:F[rt].length===0;if(Z&&!ot&&(nt=Z==="greedy"?F[rt].join("").trim()==="":F[rt].length===1&&F[rt][0].length===0),Z==="greedy"&&ot){for(var w=[],B=0;B<_t;B++){var Q=pt?I[B]:B;w.push(F[rt][Q])}nt=w.join("").trim()===""}if(!nt){for(var G=0;G<_t;G++){0<G&&!gt&&(ut+=E);var mt=ot&&pt?I[G]:G;ut+=N(F[rt][mt],G)}rt<F.length-1&&(!Z||0<_t&&!gt)&&(ut+=V)}}return ut}function N(I,F){var Z,ut;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(ut=!1,M&&typeof I=="string"&&M.test(I)&&(I="'"+I,ut=!0),Z=I.toString().replace(k,A),(ut=ut||v===!0||typeof v=="function"&&v(I,F)||Array.isArray(v)&&v[F]||((ot,pt)=>{for(var K=0;K<pt.length;K++)if(-1<ot.indexOf(pt[K]))return!0;return!1})(Z,l.BAD_DELIMITERS)||-1<Z.indexOf(E)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?g+Z+g:Z)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!o&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=T,l.ParserHandle=P,l.NetworkStreamer=h,l.FileStreamer=_,l.StringStreamer=y,l.ReadableStreamStreamer=q,r.jQuery&&((i=r.jQuery).fn.parse=function(p){var f=p.config||{},v=[];return this.each(function(V){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var g=0;g<this.files.length;g++)v.push({file:this.files[g],inputElem:this,instanceConfig:i.extend({},f)})}),d(),this;function d(){if(v.length===0)U(p.complete)&&p.complete();else{var V,g,A,m,b=v[0];if(U(p.before)){var M=p.before(b.file,b.inputElem);if(typeof M=="object"){if(M.action==="abort")return V="AbortError",g=b.file,A=b.inputElem,m=M.reason,void(U(p.error)&&p.error({name:V},g,A,m));if(M.action==="skip")return void E();typeof M.config=="object"&&(b.instanceConfig=i.extend(b.instanceConfig,M.config))}else if(M==="skip")return void E()}var k=b.instanceConfig.complete;b.instanceConfig.complete=function(z){U(k)&&k(z,b.file,b.inputElem),E()},l.parse(b.file,b.instanceConfig)}}function E(){v.splice(0,1),d()}}),s&&(r.onmessage=function(p){p=p.data,l.WORKER_ID===void 0&&p&&(l.WORKER_ID=p.workerId),typeof p.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(p.input,p.config),finished:!0}):(r.File&&p.input instanceof File||p.input instanceof Object)&&(p=l.parse(p.input,p.config))&&r.postMessage({workerId:l.WORKER_ID,results:p,finished:!0})}),(h.prototype=Object.create(c.prototype)).constructor=h,(_.prototype=Object.create(c.prototype)).constructor=_,(y.prototype=Object.create(y.prototype)).constructor=y,(q.prototype=Object.create(c.prototype)).constructor=q,l})})(Vr);const Ti=Vr.exports;function Oe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Br(t){let e,n,r;t.length!==2?(e=Oe,n=(a,u)=>Oe(t(a),u),r=(a,u)=>t(a)-u):(e=t===Oe||t===qi?t:Ni,n=t,r=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const h=l+c>>>1;n(a[h],u)<0?l=h+1:c=h}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const h=l+c>>>1;n(a[h],u)<=0?l=h+1:c=h}while(l<c)}return l}function s(a,u,l=0,c=a.length){const h=i(a,u,l,c-1);return h>l&&r(a[h-1],u)>-r(a[h],u)?h-1:h}return{left:i,center:s,right:o}}function Ni(){return 0}function Ii(t){return t===null?NaN:+t}const zi=Br(Oe),Oi=zi.right;Br(Ii).center;const Li=Oi;class Zn extends Map{constructor(e,n=Vi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(jn(this,e))}has(e){return super.has(jn(this,e))}set(e,n){return super.set(Pi(this,e),n)}delete(e){return super.delete(Fi(this,e))}}function jn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Pi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Fi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Vi(t){return t!==null&&typeof t=="object"?t.valueOf():t}var yn=Math.sqrt(50),wn=Math.sqrt(10),vn=Math.sqrt(2);function Bi(t,e,n){var r,i=-1,o,s,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(a=Hr(t,e,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(t/a),l=Math.round(e/a);for(u*a<t&&++u,l*a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(t*a),l=Math.round(e*a);for(u/a<t&&++u,l/a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function Hr(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=yn?10:o>=wn?5:o>=vn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=yn?10:o>=wn?5:o>=vn?2:1)}function Hi(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=yn?i*=10:o>=wn?i*=5:o>=vn&&(i*=2),e<t?-i:i}function Jn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $n(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Xr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const tr=Symbol("implicit");function Nn(){var t=new Zn,e=[],n=[],r=tr;function i(o){let s=t.get(o);if(s===void 0){if(r!==tr)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Zn;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Nn(e,n).unknown(r)},Xr.apply(i,arguments),i}function In(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ur(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ve(){}var _e=.7,We=1/_e,ie="\\s*([+-]?\\d+)\\s*",ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xi=/^#([0-9a-f]{3,8})$/,Ui=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),Yi=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),Wi=new RegExp(`^rgba\\(${ie},${ie},${ie},${ye}\\)$`),Ki=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${ye}\\)$`),Qi=new RegExp(`^hsl\\(${ye},${Ft},${Ft}\\)$`),Gi=new RegExp(`^hsla\\(${ye},${Ft},${Ft},${ye}\\)$`),er={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};In(ve,$t,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nr,formatHex:nr,formatHex8:Zi,formatHsl:ji,formatRgb:rr,toString:rr});function nr(){return this.rgb().formatHex()}function Zi(){return this.rgb().formatHex8()}function ji(){return Yr(this).formatHsl()}function rr(){return this.rgb().formatRgb()}function $t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ir(e):n===3?new Rt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ce(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ce(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ui.exec(t))?new Rt(e[1],e[2],e[3],1):(e=Yi.exec(t))?new Rt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wi.exec(t))?Ce(e[1],e[2],e[3],e[4]):(e=Ki.exec(t))?Ce(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qi.exec(t))?lr(e[1],e[2]/100,e[3]/100,1):(e=Gi.exec(t))?lr(e[1],e[2]/100,e[3]/100,e[4]):er.hasOwnProperty(t)?ir(er[t]):t==="transparent"?new Rt(NaN,NaN,NaN,0):null}function ir(t){return new Rt(t>>16&255,t>>8&255,t&255,1)}function Ce(t,e,n,r){return r<=0&&(t=e=n=NaN),new Rt(t,e,n,r)}function Ji(t){return t instanceof ve||(t=$t(t)),t?(t=t.rgb(),new Rt(t.r,t.g,t.b,t.opacity)):new Rt}function bn(t,e,n,r){return arguments.length===1?Ji(t):new Rt(t,e,n,r==null?1:r)}function Rt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}In(Rt,bn,Ur(ve,{brighter(t){return t=t==null?We:Math.pow(We,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_e:Math.pow(_e,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rt(Jt(this.r),Jt(this.g),Jt(this.b),Ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:or,formatHex:or,formatHex8:$i,formatRgb:sr,toString:sr}));function or(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}`}function $i(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}${jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function sr(){const t=Ke(this.opacity);return`${t===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${t===1?")":`, ${t})`}`}function Ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jt(t){return t=Jt(t),(t<16?"0":"")+t.toString(16)}function lr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ot(t,e,n,r)}function Yr(t){if(t instanceof Ot)return new Ot(t.h,t.s,t.l,t.opacity);if(t instanceof ve||(t=$t(t)),!t)return new Ot;if(t instanceof Ot)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ot(s,a,u,t.opacity)}function to(t,e,n,r){return arguments.length===1?Yr(t):new Ot(t,e,n,r==null?1:r)}function Ot(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}In(Ot,to,Ur(ve,{brighter(t){return t=t==null?We:Math.pow(We,t),new Ot(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_e:Math.pow(_e,t),new Ot(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Rt(hn(t>=240?t-240:t+120,i,r),hn(t,i,r),hn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ot(ar(this.h),De(this.s),De(this.l),Ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ke(this.opacity);return`${t===1?"hsl(":"hsla("}${ar(this.h)}, ${De(this.s)*100}%, ${De(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ar(t){return t=(t||0)%360,t<0?t+360:t}function De(t){return Math.max(0,Math.min(1,t||0))}function hn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zn=t=>()=>t;function eo(t,e){return function(n){return t+n*e}}function no(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ro(t){return(t=+t)==1?Wr:function(e,n){return n-e?no(e,n,t):zn(isNaN(e)?n:e)}}function Wr(t,e){var n=e-t;return n?eo(t,n):zn(isNaN(t)?e:t)}const Qe=function t(e){var n=ro(e);function r(i,o){var s=n((i=bn(i)).r,(o=bn(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=Wr(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function io(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function oo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function so(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=On(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function lo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function zt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ao(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=On(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(kn.source,"g");function uo(t){return function(){return t}}function co(t){return function(e){return t(e)+""}}function Kr(t,e){var n=kn.lastIndex=dn.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=kn.exec(t))&&(i=dn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:zt(r,i)})),n=dn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?co(u[0].x):uo(e):(e=u.length,function(l){for(var c=0,h;c<e;++c)a[(h=u[c]).i]=h.x(l);return a.join("")})}function On(t,e){var n=typeof e,r;return e==null||n==="boolean"?zn(e):(n==="number"?zt:n==="string"?(r=$t(e))?(e=r,Qe):Kr:e instanceof $t?Qe:e instanceof Date?lo:oo(e)?io:Array.isArray(e)?so:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ao:zt)(t,e)}function fo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ur=180/Math.PI,xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qr(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ur,skewX:Math.atan(u)*ur,scaleX:s,scaleY:a}}var Ae;function ho(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?xn:Qr(e.a,e.b,e.c,e.d,e.e,e.f)}function po(t){return t==null||(Ae||(Ae=document.createElementNS("http://www.w3.org/2000/svg","g")),Ae.setAttribute("transform",t),!(t=Ae.transform.baseVal.consolidate()))?xn:(t=t.matrix,Qr(t.a,t.b,t.c,t.d,t.e,t.f))}function Gr(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,h,_,y,q){if(l!==h||c!==_){var P=y.push("translate(",null,e,null,n);q.push({i:P-4,x:zt(l,h)},{i:P-2,x:zt(c,_)})}else(h||_)&&y.push("translate("+h+e+_+n)}function s(l,c,h,_){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),_.push({i:h.push(i(h)+"rotate(",null,r)-2,x:zt(l,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(l,c,h,_){l!==c?_.push({i:h.push(i(h)+"skewX(",null,r)-2,x:zt(l,c)}):c&&h.push(i(h)+"skewX("+c+r)}function u(l,c,h,_,y,q){if(l!==h||c!==_){var P=y.push(i(y)+"scale(",null,",",null,")");q.push({i:P-4,x:zt(l,h)},{i:P-2,x:zt(c,_)})}else(h!==1||_!==1)&&y.push(i(y)+"scale("+h+","+_+")")}return function(l,c){var h=[],_=[];return l=t(l),c=t(c),o(l.translateX,l.translateY,c.translateX,c.translateY,h,_),s(l.rotate,c.rotate,h,_),a(l.skewX,c.skewX,h,_),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,h,_),l=c=null,function(y){for(var q=-1,P=_.length,O;++q<P;)h[(O=_[q]).i]=O.x(y);return h.join("")}}}var go=Gr(ho,"px, ","px)","deg)"),mo=Gr(po,", ",")",")"),_o=1e-12;function cr(t){return((t=Math.exp(t))+1/t)/2}function yo(t){return((t=Math.exp(t))-1/t)/2}function wo(t){return((t=Math.exp(2*t))-1)/(t+1)}const vo=function t(e,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],h=s[1],_=s[2],y=c-a,q=h-u,P=y*y+q*q,O,T;if(P<_o)T=Math.log(_/l)/e,O=function(U){return[a+U*y,u+U*q,l*Math.exp(e*U*T)]};else{var x=Math.sqrt(P),D=(_*_-l*l+r*P)/(2*l*n*x),W=(_*_-l*l-r*P)/(2*_*n*x),$=Math.log(Math.sqrt(D*D+1)-D),j=Math.log(Math.sqrt(W*W+1)-W);T=(j-$)/e,O=function(U){var p=U*T,f=cr($),v=l/(n*x)*(f*wo(e*p+$)-yo($));return[a+v*y,u+v*q,l*f/cr(e*p+$)]}}return O.duration=T*1e3*e/Math.SQRT2,O}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return t(s,a,u)},i}(Math.SQRT2,2,4);function bo(t){return function(){return t}}function ko(t){return+t}var fr=[0,1];function ne(t){return t}function Sn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bo(isNaN(e)?NaN:.5)}function xo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function So(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Sn(i,r),o=n(s,o)):(r=Sn(r,i),o=n(o,s)),function(a){return o(r(a))}}function Mo(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Sn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=Li(t,a,1,r)-1;return o[u](i[u](a))}}function Eo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Co(){var t=fr,e=fr,n=On,r,i,o,s=ne,a,u,l;function c(){var _=Math.min(t.length,e.length);return s!==ne&&(s=xo(t[0],t[_-1])),a=_>2?Mo:So,u=l=null,h}function h(_){return _==null||isNaN(_=+_)?o:(u||(u=a(t.map(r),e,n)))(r(s(_)))}return h.invert=function(_){return s(i((l||(l=a(e,t.map(r),zt)))(_)))},h.domain=function(_){return arguments.length?(t=Array.from(_,ko),c()):t.slice()},h.range=function(_){return arguments.length?(e=Array.from(_),c()):e.slice()},h.rangeRound=function(_){return e=Array.from(_),n=fo,c()},h.clamp=function(_){return arguments.length?(s=_?!0:ne,c()):s!==ne},h.interpolate=function(_){return arguments.length?(n=_,c()):n},h.unknown=function(_){return arguments.length?(o=_,h):o},function(_,y){return r=_,i=y,c()}}function Do(){return Co()(ne,ne)}function Ao(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ge(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function oe(t){return t=Ge(Math.abs(t)),t?t[1]:NaN}function Ro(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function To(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ze(t){if(!(e=qo.exec(t)))throw new Error("invalid format: "+t);var e;return new Ln({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ze.prototype=Ln.prototype;function Ln(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ln.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function No(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Zr;function Io(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Zr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ge(t,Math.max(0,e+o-1))[0]}function hr(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ao,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hr(t*100,e),r:hr,s:Io,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pr(t){return t}var gr=Array.prototype.map,mr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function zo(t){var e=t.grouping===void 0||t.thousands===void 0?pr:Ro(gr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?pr:To(gr.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Ze(h);var _=h.fill,y=h.align,q=h.sign,P=h.symbol,O=h.zero,T=h.width,x=h.comma,D=h.precision,W=h.trim,$=h.type;$==="n"?(x=!0,$="g"):dr[$]||(D===void 0&&(D=12),W=!0,$="g"),(O||_==="0"&&y==="=")&&(O=!0,_="0",y="=");var j=P==="$"?n:P==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",U=P==="$"?r:/[%p]/.test($)?s:"",p=dr[$],f=/[defgprs%]/.test($);D=D===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function v(d){var E=j,V=U,g,A,m;if($==="c")V=p(d)+V,d="";else{d=+d;var b=d<0||1/d<0;if(d=isNaN(d)?u:p(Math.abs(d),D),W&&(d=No(d)),b&&+d==0&&q!=="+"&&(b=!1),E=(b?q==="("?q:a:q==="-"||q==="("?"":q)+E,V=($==="s"?mr[8+Zr/3]:"")+V+(b&&q==="("?")":""),f){for(g=-1,A=d.length;++g<A;)if(m=d.charCodeAt(g),48>m||m>57){V=(m===46?i+d.slice(g+1):d.slice(g))+V,d=d.slice(0,g);break}}}x&&!O&&(d=e(d,1/0));var M=E.length+d.length+V.length,k=M<T?new Array(T-M+1).join(_):"";switch(x&&O&&(d=e(k+d,k.length?T-V.length:1/0),k=""),y){case"<":d=E+d+V+k;break;case"=":d=E+k+d+V;break;case"^":d=k.slice(0,M=k.length>>1)+E+d+V+k.slice(M);break;default:d=k+E+d+V;break}return o(d)}return v.toString=function(){return h+""},v}function c(h,_){var y=l((h=Ze(h),h.type="f",h)),q=Math.max(-8,Math.min(8,Math.floor(oe(_)/3)))*3,P=Math.pow(10,-q),O=mr[8+q/3];return function(T){return y(P*T)+O}}return{format:l,formatPrefix:c}}var Re,jr,Jr;Oo({thousands:",",grouping:[3],currency:["$",""]});function Oo(t){return Re=zo(t),jr=Re.format,Jr=Re.formatPrefix,Re}function Lo(t){return Math.max(0,-oe(Math.abs(t)))}function Po(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oe(e)/3)))*3-oe(Math.abs(t)))}function Fo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,oe(e)-oe(t))+1}function Vo(t,e,n,r){var i=Hi(t,e,n),o;switch(r=Ze(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Po(i,s))&&(r.precision=o),Jr(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Fo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Lo(i))&&(r.precision=o-(r.type==="%")*2);break}}return jr(r)}function Bo(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bi(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Vo(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=Hr(s,a,n),l===u)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function Mn(){var t=Do();return t.copy=function(){return Eo(t,Mn())},Xr.apply(t,arguments),Bo(t)}function Ho(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const $r=Ho("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Xo={value:()=>{}};function Pn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Le(n)}function Le(t){this._=t}function Uo(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Le.prototype=Pn.prototype={constructor:Le,on:function(t,e){var n=this._,r=Uo(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Yo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=_r(n[i],t.name,e);else if(e==null)for(i in n)n[i]=_r(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Le(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Yo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function _r(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Xo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var En="http://www.w3.org/1999/xhtml";const yr={svg:"http://www.w3.org/2000/svg",xhtml:En,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),yr.hasOwnProperty(e)?{space:yr[e],local:t}:t}function Wo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===En&&e.documentElement.namespaceURI===En?e.createElement(t):e.createElementNS(n,t)}}function Ko(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ti(t){var e=sn(t);return(e.local?Ko:Wo)(e)}function Qo(){}function Fn(t){return t==null?Qo:function(){return this.querySelector(t)}}function Go(t){typeof t!="function"&&(t=Fn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=t.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Tt(r,this._parents)}function Zo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function jo(){return[]}function ei(t){return t==null?jo:function(){return this.querySelectorAll(t)}}function Jo(t){return function(){return Zo(t.apply(this,arguments))}}function $o(t){typeof t=="function"?t=Jo(t):t=ei(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new Tt(r,i)}function ni(t){return function(){return this.matches(t)}}function ri(t){return function(e){return e.matches(t)}}var ts=Array.prototype.find;function es(t){return function(){return ts.call(this.children,t)}}function ns(){return this.firstElementChild}function rs(t){return this.select(t==null?ns:es(typeof t=="function"?t:ri(t)))}var is=Array.prototype.filter;function os(){return Array.from(this.children)}function ss(t){return function(){return is.call(this.children,t)}}function ls(t){return this.selectAll(t==null?os:ss(typeof t=="function"?t:ri(t)))}function as(t){typeof t!="function"&&(t=ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new Tt(r,this._parents)}function ii(t){return new Array(t.length)}function us(){return new Tt(this._enter||this._groups.map(ii),this._parents)}function je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}je.prototype={constructor:je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function cs(t){return function(){return t}}function fs(t,e,n,r,i,o){for(var s=0,a,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new je(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function hs(t,e,n,r,i,o,s){var a,u,l=new Map,c=e.length,h=o.length,_=new Array(c),y;for(a=0;a<c;++a)(u=e[a])&&(_[a]=y=s.call(u,u.__data__,a,e)+"",l.has(y)?i[a]=u:l.set(y,u));for(a=0;a<h;++a)y=s.call(t,o[a],a,o)+"",(u=l.get(y))?(r[a]=u,u.__data__=o[a],l.delete(y)):n[a]=new je(t,o[a]);for(a=0;a<c;++a)(u=e[a])&&l.get(_[a])===u&&(i[a]=u)}function ds(t){return t.__data__}function ps(t,e){if(!arguments.length)return Array.from(this,ds);var n=e?hs:fs,r=this._parents,i=this._groups;typeof t!="function"&&(t=cs(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],_=h.length,y=gs(t.call(c,c&&c.__data__,l,r)),q=y.length,P=a[l]=new Array(q),O=s[l]=new Array(q),T=u[l]=new Array(_);n(c,h,P,O,T,y,e);for(var x=0,D=0,W,$;x<q;++x)if(W=P[x]){for(x>=D&&(D=x+1);!($=O[D])&&++D<q;);W._next=$||null}}return s=new Tt(s,r),s._enter=a,s._exit=u,s}function gs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ms(){return new Tt(this._exit||this._groups.map(ii),this._parents)}function _s(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ys(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],h=l.length,_=a[u]=new Array(h),y,q=0;q<h;++q)(y=l[q]||c[q])&&(_[q]=y);for(;u<i;++u)a[u]=n[u];return new Tt(a,this._parents)}function ws(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function vs(t){t||(t=bs);function e(h,_){return h&&_?t(h.__data__,_.__data__):!h-!_}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(e)}return new Tt(i,this._parents).order()}function bs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ks(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xs(){return Array.from(this)}function Ss(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Ms(){let t=0;for(const e of this)++t;return t}function Es(){return!this.node()}function Cs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Ds(t){return function(){this.removeAttribute(t)}}function As(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rs(t,e){return function(){this.setAttribute(t,e)}}function Ts(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ns(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Is(t,e){var n=sn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?As:Ds:typeof e=="function"?n.local?Ns:qs:n.local?Ts:Rs)(n,e))}function oi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zs(t){return function(){this.style.removeProperty(t)}}function Os(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ls(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ps(t,e,n){return arguments.length>1?this.each((e==null?zs:typeof e=="function"?Ls:Os)(t,e,n==null?"":n)):se(this.node(),t)}function se(t,e){return t.style.getPropertyValue(e)||oi(t).getComputedStyle(t,null).getPropertyValue(e)}function Fs(t){return function(){delete this[t]}}function Vs(t,e){return function(){this[t]=e}}function Bs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Hs(t,e){return arguments.length>1?this.each((e==null?Fs:typeof e=="function"?Bs:Vs)(t,e)):this.node()[t]}function si(t){return t.trim().split(/^|\s+/)}function Vn(t){return t.classList||new li(t)}function li(t){this._node=t,this._names=si(t.getAttribute("class")||"")}li.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ai(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ui(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Xs(t){return function(){ai(this,t)}}function Us(t){return function(){ui(this,t)}}function Ys(t,e){return function(){(e.apply(this,arguments)?ai:ui)(this,t)}}function Ws(t,e){var n=si(t+"");if(arguments.length<2){for(var r=Vn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ys:e?Xs:Us)(n,e))}function Ks(){this.textContent=""}function Qs(t){return function(){this.textContent=t}}function Gs(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Zs(t){return arguments.length?this.each(t==null?Ks:(typeof t=="function"?Gs:Qs)(t)):this.node().textContent}function js(){this.innerHTML=""}function Js(t){return function(){this.innerHTML=t}}function $s(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function tl(t){return arguments.length?this.each(t==null?js:(typeof t=="function"?$s:Js)(t)):this.node().innerHTML}function el(){this.nextSibling&&this.parentNode.appendChild(this)}function nl(){return this.each(el)}function rl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function il(){return this.each(rl)}function ol(t){var e=typeof t=="function"?t:ti(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function sl(){return null}function ll(t,e){var n=typeof t=="function"?t:ti(t),r=e==null?sl:typeof e=="function"?e:Fn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function al(){var t=this.parentNode;t&&t.removeChild(this)}function ul(){return this.each(al)}function cl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hl(t){return this.select(t?fl:cl)}function dl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pl(t){return function(e){t.call(this,e,this.__data__)}}function gl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ml(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function _l(t,e,n){return function(){var r=this.__on,i,o=pl(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function yl(t,e,n){var r=gl(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?_l:ml,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function ci(t,e,n){var r=oi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function wl(t,e){return function(){return ci(this,t,e)}}function vl(t,e){return function(){return ci(this,t,e.apply(this,arguments))}}function bl(t,e){return this.each((typeof e=="function"?vl:wl)(t,e))}function*kl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var fi=[null];function Tt(t,e){this._groups=t,this._parents=e}function be(){return new Tt([[document.documentElement]],fi)}function xl(){return this}Tt.prototype=be.prototype={constructor:Tt,select:Go,selectAll:$o,selectChild:rs,selectChildren:ls,filter:as,data:ps,enter:us,exit:ms,join:_s,merge:ys,selection:xl,order:ws,sort:vs,call:ks,nodes:xs,node:Ss,size:Ms,empty:Es,each:Cs,attr:Is,style:Ps,property:Hs,classed:Ws,text:Zs,html:tl,raise:nl,lower:il,append:ol,insert:ll,remove:ul,clone:hl,datum:dl,on:yl,dispatch:bl,[Symbol.iterator]:kl};function Kt(t){return typeof t=="string"?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],fi)}function Sl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Gt(t,e){if(t=Sl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Cn={capture:!0,passive:!1};function Dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ml(t){var e=t.document.documentElement,n=Kt(t).on("dragstart.drag",Dn,Cn);"onselectstart"in e?n.on("selectstart.drag",Dn,Cn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function El(t,e){var n=t.document.documentElement,r=Kt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Dn,Cn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var le=0,de=0,ae=0,hi=1e3,Je,pe,$e=0,te=0,ln=0,we=typeof performance=="object"&&performance.now?performance:Date,di=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bn(){return te||(di(Cl),te=we.now()+ln)}function Cl(){te=0}function tn(){this._call=this._time=this._next=null}tn.prototype=pi.prototype={constructor:tn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bn():+n)+(e==null?0:+e),!this._next&&pe!==this&&(pe?pe._next=this:Je=this,pe=this),this._call=t,this._time=n,An()},stop:function(){this._call&&(this._call=null,this._time=1/0,An())}};function pi(t,e,n){var r=new tn;return r.restart(t,e,n),r}function Dl(){Bn(),++le;for(var t=Je,e;t;)(e=te-t._time)>=0&&t._call.call(void 0,e),t=t._next;--le}function wr(){te=($e=we.now())+ln,le=de=0;try{Dl()}finally{le=0,Rl(),te=0}}function Al(){var t=we.now(),e=t-$e;e>hi&&(ln-=e,$e=t)}function Rl(){for(var t,e=Je,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Je=n);pe=t,An(r)}function An(t){if(!le){de&&(de=clearTimeout(de));var e=t-te;e>24?(t<1/0&&(de=setTimeout(wr,t-we.now()-ln)),ae&&(ae=clearInterval(ae))):(ae||($e=we.now(),ae=setInterval(Al,hi)),le=1,di(wr))}}function vr(t,e,n){var r=new tn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Tl=Pn("start","end","cancel","interrupt"),ql=[],gi=0,br=1,Rn=2,Pe=3,kr=4,Tn=5,Fe=6;function an(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Nl(t,n,{name:e,index:r,group:i,on:Tl,tween:ql,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gi})}function Hn(t,e){var n=Pt(t,e);if(n.state>gi)throw new Error("too late; already scheduled");return n}function Vt(t,e){var n=Pt(t,e);if(n.state>Pe)throw new Error("too late; already running");return n}function Pt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Nl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=pi(o,0,n.time);function o(l){n.state=br,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,h,_,y;if(n.state!==br)return u();for(c in r)if(y=r[c],y.name===n.name){if(y.state===Pe)return vr(s);y.state===kr?(y.state=Fe,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[c]):+c<e&&(y.state=Fe,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[c])}if(vr(function(){n.state===Pe&&(n.state=kr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Rn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Rn){for(n.state=Pe,i=new Array(_=n.tween.length),c=0,h=-1;c<_;++c)(y=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=y);i.length=h+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Tn,1),h=-1,_=i.length;++h<_;)i[h].call(t,c);n.state===Tn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Fe,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Ve(t,e){var n=t.__transition,r,i,o=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Rn&&r.state<Tn,r.state=Fe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Il(t){return this.each(function(){Ve(this,t)})}function zl(t,e){var n,r;return function(){var i=Vt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ol(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Vt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Ll(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Pt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?zl:Ol)(n,t,e))}function Xn(t,e,n){var r=t._id;return t.each(function(){var i=Vt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Pt(i,r).value[e]}}function mi(t,e){var n;return(typeof e=="number"?zt:e instanceof $t?Qe:(n=$t(e))?(e=n,Qe):Kr)(t,e)}function Pl(t){return function(){this.removeAttribute(t)}}function Fl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Bl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Hl(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function Xl(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function Ul(t,e){var n=sn(t),r=n==="transform"?mo:mi;return this.attrTween(t,typeof e=="function"?(n.local?Xl:Hl)(n,r,Xn(this,"attr."+t,e)):e==null?(n.local?Fl:Pl)(n):(n.local?Bl:Vl)(n,r,e))}function Yl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Kl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Wl(t,o)),n}return i._value=e,i}function Ql(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Yl(t,o)),n}return i._value=e,i}function Gl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=sn(t);return this.tween(n,(r.local?Kl:Ql)(r,e))}function Zl(t,e){return function(){Hn(this,t).delay=+e.apply(this,arguments)}}function jl(t,e){return e=+e,function(){Hn(this,t).delay=e}}function Jl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zl:jl)(e,t)):Pt(this.node(),e).delay}function $l(t,e){return function(){Vt(this,t).duration=+e.apply(this,arguments)}}function ta(t,e){return e=+e,function(){Vt(this,t).duration=e}}function ea(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$l:ta)(e,t)):Pt(this.node(),e).duration}function na(t,e){if(typeof e!="function")throw new Error;return function(){Vt(this,t).ease=e}}function ra(t){var e=this._id;return arguments.length?this.each(na(e,t)):Pt(this.node(),e).ease}function ia(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Vt(this,t).ease=n}}function oa(t){if(typeof t!="function")throw new Error;return this.each(ia(this._id,t))}function sa(t){typeof t!="function"&&(t=ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new Xt(r,this._parents,this._name,this._id)}function la(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=e[a],l=n[a],c=u.length,h=s[a]=new Array(c),_,y=0;y<c;++y)(_=u[y]||l[y])&&(h[y]=_);for(;a<r;++a)s[a]=e[a];return new Xt(s,this._parents,this._name,this._id)}function aa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ua(t,e,n){var r,i,o=aa(e)?Hn:Vt;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function ca(t,e){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(t):this.each(ua(n,t,e))}function fa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ha(){return this.on("end.remove",fa(this._id))}function da(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Fn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,h,_=0;_<u;++_)(c=a[_])&&(h=t.call(c,c.__data__,_,a))&&("__data__"in c&&(h.__data__=c.__data__),l[_]=h,an(l[_],e,n,_,l,Pt(c,n)));return new Xt(o,this._parents,e,n)}function pa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ei(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,h=0;h<l;++h)if(c=u[h]){for(var _=t.call(c,c.__data__,h,u),y,q=Pt(c,n),P=0,O=_.length;P<O;++P)(y=_[P])&&an(y,e,n,P,_,q);o.push(_),s.push(c)}return new Xt(o,s,e,n)}var ga=be.prototype.constructor;function ma(){return new ga(this._groups,this._parents)}function _a(t,e){var n,r,i;return function(){var o=se(this,t),s=(this.style.removeProperty(t),se(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function _i(t){return function(){this.style.removeProperty(t)}}function ya(t,e,n){var r,i=n+"",o;return function(){var s=se(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function wa(t,e,n){var r,i,o;return function(){var s=se(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),se(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}function va(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var u=Vt(this,t),l=u.on,c=u.value[o]==null?a||(a=_i(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function ba(t,e,n){var r=(t+="")=="transform"?go:mi;return e==null?this.styleTween(t,_a(t,r)).on("end.style."+t,_i(t)):typeof e=="function"?this.styleTween(t,wa(t,r,Xn(this,"style."+t,e))).each(va(this._id,t)):this.styleTween(t,ya(t,r,e),n).on("end.style."+t,null)}function ka(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function xa(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&ka(t,s,n)),r}return o._value=e,o}function Sa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,xa(t,e,n==null?"":n))}function Ma(t){return function(){this.textContent=t}}function Ea(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Ca(t){return this.tween("text",typeof t=="function"?Ea(Xn(this,"text",t)):Ma(t==null?"":t+""))}function Da(t){return function(e){this.textContent=t.call(this,e)}}function Aa(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Da(i)),e}return r._value=t,r}function Ra(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Aa(t))}function Ta(){for(var t=this._name,e=this._id,n=yi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=Pt(u,e);an(u,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Xt(r,this._parents,t,n)}function qa(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=Vt(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e}),i===0&&o()})}var Na=0;function Xt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function yi(){return++Na}var Bt=be.prototype;Xt.prototype={constructor:Xt,select:da,selectAll:pa,selectChild:Bt.selectChild,selectChildren:Bt.selectChildren,filter:sa,merge:la,selection:ma,transition:Ta,call:Bt.call,nodes:Bt.nodes,node:Bt.node,size:Bt.size,empty:Bt.empty,each:Bt.each,on:ca,attr:Ul,attrTween:Gl,style:ba,styleTween:Sa,text:Ca,textTween:Ra,remove:ha,tween:Ll,delay:Jl,duration:ea,ease:ra,easeVarying:oa,end:qa,[Symbol.iterator]:Bt[Symbol.iterator]};function Ia(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var za={time:null,delay:0,duration:250,ease:Ia};function Oa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function La(t){var e,n;t instanceof Xt?(e=t._id,t=t._name):(e=yi(),(n=za).time=Bn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&an(u,t,e,l,s,n||Oa(u,e));return new Xt(r,this._parents,t,e)}be.prototype.interrupt=Il;be.prototype.transition=La;const Te=t=>()=>t;function Pa(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ht(t,e,n){this.k=t,this.x=e,this.y=n}Ht.prototype={constructor:Ht,scale:function(t){return t===1?this:new Ht(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ht(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var en=new Ht(1,0,0);Ht.prototype;function pn(t){t.stopImmediatePropagation()}function ue(t){t.preventDefault(),t.stopImmediatePropagation()}function Fa(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Va(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function xr(){return this.__zoom||en}function Ba(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ha(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xa(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Ua(){var t=Fa,e=Va,n=Xa,r=Ba,i=Ha,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=vo,l=Pn("start","zoom","end"),c,h,_,y=500,q=150,P=0,O=10;function T(g){g.property("__zoom",xr).on("wheel.zoom",p,{passive:!1}).on("mousedown.zoom",f).on("dblclick.zoom",v).filter(i).on("touchstart.zoom",d).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(g,A,m,b){var M=g.selection?g.selection():g;M.property("__zoom",xr),g!==M?$(g,A,m,b):M.interrupt().each(function(){j(this,arguments).event(b).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},T.scaleBy=function(g,A,m,b){T.scaleTo(g,function(){var M=this.__zoom.k,k=typeof A=="function"?A.apply(this,arguments):A;return M*k},m,b)},T.scaleTo=function(g,A,m,b){T.transform(g,function(){var M=e.apply(this,arguments),k=this.__zoom,z=m==null?W(M):typeof m=="function"?m.apply(this,arguments):m,N=k.invert(z),I=typeof A=="function"?A.apply(this,arguments):A;return n(D(x(k,I),z,N),M,s)},m,b)},T.translateBy=function(g,A,m,b){T.transform(g,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof m=="function"?m.apply(this,arguments):m),e.apply(this,arguments),s)},null,b)},T.translateTo=function(g,A,m,b,M){T.transform(g,function(){var k=e.apply(this,arguments),z=this.__zoom,N=b==null?W(k):typeof b=="function"?b.apply(this,arguments):b;return n(en.translate(N[0],N[1]).scale(z.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof m=="function"?-m.apply(this,arguments):-m),k,s)},b,M)};function x(g,A){return A=Math.max(o[0],Math.min(o[1],A)),A===g.k?g:new Ht(A,g.x,g.y)}function D(g,A,m){var b=A[0]-m[0]*g.k,M=A[1]-m[1]*g.k;return b===g.x&&M===g.y?g:new Ht(g.k,b,M)}function W(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function $(g,A,m,b){g.on("start.zoom",function(){j(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(b).end()}).tween("zoom",function(){var M=this,k=arguments,z=j(M,k).event(b),N=e.apply(M,k),I=m==null?W(N):typeof m=="function"?m.apply(M,k):m,F=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),Z=M.__zoom,ut=typeof A=="function"?A.apply(M,k):A,ot=u(Z.invert(I).concat(F/Z.k),ut.invert(I).concat(F/ut.k));return function(pt){if(pt===1)pt=ut;else{var K=ot(pt),rt=F/K[2];pt=new Ht(rt,I[0]-K[0]*rt,I[1]-K[1]*rt)}z.zoom(null,pt)}})}function j(g,A,m){return!m&&g.__zooming||new U(g,A)}function U(g,A){this.that=g,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,A),this.taps=0}U.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,A){return this.mouse&&g!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var A=Kt(this.that).datum();l.call(g,this.that,new Pa(g,{sourceEvent:this.sourceEvent,target:T,type:g,transform:this.that.__zoom,dispatch:l}),A)}};function p(g,...A){if(!t.apply(this,arguments))return;var m=j(this,A).event(g),b=this.__zoom,M=Math.max(o[0],Math.min(o[1],b.k*Math.pow(2,r.apply(this,arguments)))),k=Gt(g);if(m.wheel)(m.mouse[0][0]!==k[0]||m.mouse[0][1]!==k[1])&&(m.mouse[1]=b.invert(m.mouse[0]=k)),clearTimeout(m.wheel);else{if(b.k===M)return;m.mouse=[k,b.invert(k)],Ve(this),m.start()}ue(g),m.wheel=setTimeout(z,q),m.zoom("mouse",n(D(x(b,M),m.mouse[0],m.mouse[1]),m.extent,s));function z(){m.wheel=null,m.end()}}function f(g,...A){if(_||!t.apply(this,arguments))return;var m=g.currentTarget,b=j(this,A,!0).event(g),M=Kt(g.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",F,!0),k=Gt(g,m),z=g.clientX,N=g.clientY;Ml(g.view),pn(g),b.mouse=[k,this.__zoom.invert(k)],Ve(this),b.start();function I(Z){if(ue(Z),!b.moved){var ut=Z.clientX-z,ot=Z.clientY-N;b.moved=ut*ut+ot*ot>P}b.event(Z).zoom("mouse",n(D(b.that.__zoom,b.mouse[0]=Gt(Z,m),b.mouse[1]),b.extent,s))}function F(Z){M.on("mousemove.zoom mouseup.zoom",null),El(Z.view,b.moved),ue(Z),b.event(Z).end()}}function v(g,...A){if(!!t.apply(this,arguments)){var m=this.__zoom,b=Gt(g.changedTouches?g.changedTouches[0]:g,this),M=m.invert(b),k=m.k*(g.shiftKey?.5:2),z=n(D(x(m,k),b,M),e.apply(this,A),s);ue(g),a>0?Kt(this).transition().duration(a).call($,z,b,g):Kt(this).call(T.transform,z,b,g)}}function d(g,...A){if(!!t.apply(this,arguments)){var m=g.touches,b=m.length,M=j(this,A,g.changedTouches.length===b).event(g),k,z,N,I;for(pn(g),z=0;z<b;++z)N=m[z],I=Gt(N,this),I=[I,this.__zoom.invert(I),N.identifier],M.touch0?!M.touch1&&M.touch0[2]!==I[2]&&(M.touch1=I,M.taps=0):(M.touch0=I,k=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),k&&(M.taps<2&&(h=I[0],c=setTimeout(function(){c=null},y)),Ve(this),M.start())}}function E(g,...A){if(!!this.__zooming){var m=j(this,A).event(g),b=g.changedTouches,M=b.length,k,z,N,I;for(ue(g),k=0;k<M;++k)z=b[k],N=Gt(z,this),m.touch0&&m.touch0[2]===z.identifier?m.touch0[0]=N:m.touch1&&m.touch1[2]===z.identifier&&(m.touch1[0]=N);if(z=m.that.__zoom,m.touch1){var F=m.touch0[0],Z=m.touch0[1],ut=m.touch1[0],ot=m.touch1[1],pt=(pt=ut[0]-F[0])*pt+(pt=ut[1]-F[1])*pt,K=(K=ot[0]-Z[0])*K+(K=ot[1]-Z[1])*K;z=x(z,Math.sqrt(pt/K)),N=[(F[0]+ut[0])/2,(F[1]+ut[1])/2],I=[(Z[0]+ot[0])/2,(Z[1]+ot[1])/2]}else if(m.touch0)N=m.touch0[0],I=m.touch0[1];else return;m.zoom("touch",n(D(z,N,I),m.extent,s))}}function V(g,...A){if(!!this.__zooming){var m=j(this,A).event(g),b=g.changedTouches,M=b.length,k,z;for(pn(g),_&&clearTimeout(_),_=setTimeout(function(){_=null},y),k=0;k<M;++k)z=b[k],m.touch0&&m.touch0[2]===z.identifier?delete m.touch0:m.touch1&&m.touch1[2]===z.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(z=Gt(z,this),Math.hypot(h[0]-z[0],h[1]-z[1])<O)){var N=Kt(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return T.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:Te(+g),T):r},T.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Te(!!g),T):t},T.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:Te(!!g),T):i},T.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Te([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),T):e},T.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],T):[o[0],o[1]]},T.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],T):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},T.constrain=function(g){return arguments.length?(n=g,T):n},T.duration=function(g){return arguments.length?(a=+g,T):a},T.interpolate=function(g){return arguments.length?(u=g,T):u},T.on=function(){var g=l.on.apply(l,arguments);return g===l?T:g},T.clickDistance=function(g){return arguments.length?(P=(g=+g)*g,T):Math.sqrt(P)},T.tapDistance=function(g){return arguments.length?(O=+g,T):O},T}function Ya(t){let e,n,r,i,o,s,a,u,l,c,h;return{c(){e=X("div"),n=X("div"),r=X("button"),r.textContent="+",i=lt(),o=X("button"),o.textContent="\u2212",s=lt(),a=X("button"),a.textContent="\u27F2",u=lt(),l=X("canvas"),S(r,"class","zoom-btn svelte-1q7voxg"),S(r,"aria-label","Zoom in"),S(r,"title","Zoom in"),S(o,"class","zoom-btn svelte-1q7voxg"),S(o,"aria-label","Zoom out"),S(o,"title","Zoom out"),S(a,"class","zoom-btn svelte-1q7voxg"),S(a,"aria-label","Reset zoom"),S(a,"title","Reset zoom"),S(n,"class","zoom-controls svelte-1q7voxg"),S(n,"aria-label","Zoom controls"),S(l,"width",t[0]),S(l,"height",t[1]),S(l,"class","svelte-1q7voxg"),S(e,"class","chart-container svelte-1q7voxg")},m(_,y){at(_,e,y),R(e,n),R(n,r),R(n,i),R(n,o),R(n,s),R(n,a),R(e,u),R(e,l),t[29](l),t[30](e),c||(h=[yt(r,"click",t[7]),yt(o,"click",t[8]),yt(a,"click",t[9]),yt(l,"mousemove",t[4]),yt(l,"mouseleave",t[6]),yt(l,"click",t[5])],c=!0)},p(_,y){y[0]&1&&S(l,"width",_[0]),y[0]&2&&S(l,"height",_[1])},i:At,o:At,d(_){_&&st(e),t[29](null),t[30](null),c=!1,Ut(h)}}}const ce=6,Wa=.5,Ka=20;function qe(t,e){if(!e||!t)return!1;try{return new RegExp(e,"i").test(t)}catch{return t.toLowerCase().includes(e.toLowerCase())}}function Qa(t,e,n){let r,i,o,s,a,u,l,c,h,{data:_=[]}=e,{domainColumn:y=""}=e,{opacity:q=1}=e,{selectedValues:P=new Set}=e,{searchQuery:O=""}=e,{showAnnotations:T=!0}=e,{highlightedData:x=[]}=e,{startDate:D=null}=e,{endDate:W=null}=e,{uniqueValues:$=[]}=e,{hoveredData:j=null}=e,{selectedData:U=null}=e,p=[],f,v,d,E=800,V=600;const g={top:20,right:20,bottom:20,left:20};let A=null,m=en,b,M,k,z=1;function N(){if(!f||!v)return;const w=v.getBoundingClientRect();w.width>0&&w.height>0&&(n(0,E=Math.floor(w.width)),n(1,V=Math.floor(w.height))),z=Math.max(window.devicePixelRatio||1,1),n(2,f.style.width="100%",f),n(2,f.style.height="100%",f),n(2,f.width=Math.max(1,Math.floor(E*z)),f),n(2,f.height=Math.max(1,Math.floor(V*z)),f),n(22,d=f.getContext("2d")),d.setTransform(z,0,0,z,0,0)}function I(){if(!(!d||!_.length)){if(d.clearRect(0,0,E,V),d.save(),d.translate(m.x,m.y),d.scale(m.k,m.k),_.forEach(w=>{d.beginPath(),d.arc(g.left+u(w.x),g.top+h(w.y),Math.max(.5,ce/m.k),0,Math.PI*2),n(22,d.fillStyle=k(w[y]),d);const B=.9,Q=Math.max(0,Math.min(1,q));n(22,d.globalAlpha=w.isActive?B:Q,d),d.fill(),n(22,d.globalAlpha=.2,d)}),T&&p.forEach(w=>{n(22,d.globalAlpha=1,d),d.beginPath(),d.arc(w.x,w.y,w.radius,0,Math.PI*2),n(22,d.strokeStyle="red",d),n(22,d.lineWidth=2,d),d.setLineDash([5,5]),d.stroke();const B=180,Q=12;n(22,d.font="16px Arial",d);const G=w.x+w.label_x,mt=w.y+w.label_y;let J=0,dt=0,ft=[];if(w.label){const Mt=w.label.split(" ");let ht="";Mt.forEach((ct,St)=>{const Ct=ht+ct+" ";d.measureText(Ct).width>B&&St>0?(ft.push(ht),J=Math.max(J,d.measureText(ht).width),ht=ct+" "):ht=Ct}),ft.push(ht),J=Math.max(J,d.measureText(ht).width),dt=Q*ft.length}const wt=G,it=mt-Q,Et=J,C=dt;let Y,H;w.x<wt?Y=wt:w.x>wt+Et?Y=wt+Et:Y=w.x,w.y<it?H=it:w.y>it+C?H=it+C:H=w.y;const L=Math.atan2(H-w.y,Y-w.x),et=w.x+w.radius*Math.cos(L),kt=w.y+w.radius*Math.sin(L);if(d.setLineDash([]),d.beginPath(),d.moveTo(et,kt),d.lineTo(Y,H),n(22,d.strokeStyle="red",d),n(22,d.lineWidth=1,d),d.stroke(),w.label){n(22,d.font="16px Arial",d),n(22,d.fillStyle="red",d);const Mt=16;ft.forEach((ht,ct)=>{d.fillText(ht,G,mt+ct*Mt)})}}),d.setLineDash([]),U){const w=g.left+u(U.x),B=g.top+h(U.y);d.beginPath(),d.arc(w,B,Math.max(.5,(ce+2)/m.k),0,Math.PI*2),n(22,d.fillStyle=k(U[y]),d),n(22,d.globalAlpha=1,d),d.fill(),n(22,d.strokeStyle="#1976d2",d),n(22,d.lineWidth=Math.max(1,3/m.k),d),d.stroke()}if(j&&j!==U){const w=g.left+u(j.x),B=g.top+h(j.y);d.beginPath(),d.arc(w,B,Math.max(.5,ce/m.k),0,Math.PI*2),n(22,d.fillStyle=k(j[y]),d),n(22,d.globalAlpha=1,d),d.fill(),n(22,d.strokeStyle="black",d),n(22,d.lineWidth=Math.max(1,2/m.k),d),d.stroke()}d.restore()}}function F(w){const B=f.getBoundingClientRect(),Q=E/B.width,G=V/B.height,mt=(w.clientX-B.left)*Q,J=(w.clientY-B.top)*G,[dt,ft]=m.invert([mt,J]),wt=_.find(it=>{var Ct,vt;const Et=g.left+u(it.x),C=g.top+h(it.y),Y=Et-dt,H=C-ft,L=Math.sqrt(Y*Y+H*H)<(ce+3)/m.k,kt=!!(O&&String(O).trim().length)?qe((Ct=it.title)!=null?Ct:"",O)||qe((vt=it.text)!=null?vt:"",O):!0,ht=P&&P.size>0&&P.size<r?P.has(it[y]):!0,ct=D&&W?it.date>=D&&it.date<=W:!0;return L&&(kt&&ht&&ct)});wt?(n(11,j=wt),A=wt,n(2,f.style.cursor="pointer",f)):(n(11,j=null),A=null,n(2,f.style.cursor="crosshair",f)),I()}function Z(w){const B=f.getBoundingClientRect(),Q=E/B.width,G=V/B.height,mt=(w.clientX-B.left)*Q,J=(w.clientY-B.top)*G,[dt,ft]=m.invert([mt,J]),wt=_.find(it=>{var Ct,vt;const Et=g.left+u(it.x),C=g.top+h(it.y),Y=Et-dt,H=C-ft,L=Math.sqrt(Y*Y+H*H)<(ce+3)/m.k,kt=!!(O&&String(O).trim().length)?qe((Ct=it.title)!=null?Ct:"",O)||qe((vt=it.text)!=null?vt:"",O):!0,ht=P&&P.size>0&&P.size<r?P.has(it[y]):!0,ct=D&&W?it.date>=D&&it.date<=W:!0;return L&&(kt&&ht&&ct)});if(!wt){n(10,U=null),I();return}if(w.ctrlKey||w.metaKey){const it=wt.url||wt.link||wt.href||wt.permalink;it&&typeof window<"u"&&window.open(it,"_blank","noopener,noreferrer");return}U===wt?n(10,U=null):n(10,U=wt),I()}function ut(){n(11,j=A),I()}let ot;qn(()=>(n(22,d=f.getContext("2d")),N(),window.ResizeObserver&&(ot=new ResizeObserver(()=>{N(),I()}),ot.observe(v)),b=Ua().scaleExtent([Wa,Ka]).filter(w=>{const B=w;return B.type==="wheel"||B.type==="touchstart"||B.type==="touchmove"?!0:B.type==="mousedown"?B.button===0&&!B.ctrlKey&&!B.metaKey&&!B.shiftKey:!B.ctrlKey&&!B.metaKey&&!B.shiftKey}).on("zoom",w=>{m=w.transform,I()}),M=Kt(f),M.call(b),I(),()=>{ot&&ot.disconnect()}));function pt(w,B){var mt;if((mt=B==null?void 0:B.stopPropagation)==null||mt.call(B),!M||!b)return;const Q=E/2,G=V/2;M.transition().duration(200).call(b.scaleBy,w,[Q,G])}function K(w){pt(1.25,w)}function rt(w){pt(1/1.25,w)}function _t(w){var B;(B=w==null?void 0:w.stopPropagation)==null||B.call(w),!(!M||!b)&&M.transition().duration(200).call(b.transform,en)}function nt(w){Lt[w?"unshift":"push"](()=>{f=w,n(2,f)})}function gt(w){Lt[w?"unshift":"push"](()=>{v=w,n(3,v)})}return t.$$set=w=>{"data"in w&&n(12,_=w.data),"domainColumn"in w&&n(13,y=w.domainColumn),"opacity"in w&&n(14,q=w.opacity),"selectedValues"in w&&n(15,P=w.selectedValues),"searchQuery"in w&&n(16,O=w.searchQuery),"showAnnotations"in w&&n(17,T=w.showAnnotations),"highlightedData"in w&&n(18,x=w.highlightedData),"startDate"in w&&n(19,D=w.startDate),"endDate"in w&&n(20,W=w.endDate),"uniqueValues"in w&&n(21,$=w.uniqueValues),"hoveredData"in w&&n(11,j=w.hoveredData),"selectedData"in w&&n(10,U=w.selectedData)},t.$$.update=()=>{t.$$.dirty[0]&262144&&new Set(x.map(w=>w.id)),t.$$.dirty[0]&12288&&(r=new Set(_.map(w=>w[y])).size),t.$$.dirty[0]&1&&n(26,i=E-g.left-g.right),t.$$.dirty[0]&2&&n(23,o=V-g.top-g.bottom),t.$$.dirty[0]&4096&&n(28,s=[$n(_,w=>w.x),Jn(_,w=>w.x)]),t.$$.dirty[0]&268435456&&n(27,a=s[0]===s[1]?[s[0]-1,s[1]+1]:s),t.$$.dirty[0]&201326592&&(u=Mn().domain(a).range([0,i])),t.$$.dirty[0]&4096&&n(25,l=[$n(_,w=>w.y),Jn(_,w=>w.y)]),t.$$.dirty[0]&33554432&&n(24,c=l[0]===l[1]?[l[0]-1,l[1]+1]:l),t.$$.dirty[0]&25165824&&(h=Mn().domain(c).range([o,0])),t.$$.dirty[0]&2105344&&(k=Nn($r).domain(y?$:[])),t.$$.dirty[0]&4096&&_.length&&new Date(Math.min(..._.map(w=>w.date.getTime()))),t.$$.dirty[0]&4096&&_.length&&new Date(Math.max(..._.map(w=>w.date.getTime()))),t.$$.dirty[0]&6026240&&d&&_.length&&I()},[E,V,f,v,F,Z,ut,K,rt,_t,U,j,_,y,q,P,O,T,x,D,W,$,d,o,c,l,i,a,s,nt,gt]}class Ga extends on{constructor(e){super(),rn(this,e,Qa,Ya,nn,{data:12,domainColumn:13,opacity:14,selectedValues:15,searchQuery:16,showAnnotations:17,highlightedData:18,startDate:19,endDate:20,uniqueValues:21,hoveredData:11,selectedData:10},null,[-1,-1])}}function Za(t){let e,n,r,i,o,s,a,u,l;return{c(){e=X("div"),n=X("div"),r=X("div"),i=lt(),o=X("div"),s=lt(),a=X("div"),S(r,"class","track-inner svelte-vytkle"),S(n,"class","track svelte-vytkle"),S(o,"class","thumb start-thumb svelte-vytkle"),Nt(o,"left",t[4]+"%"),S(a,"class","thumb end-thumb svelte-vytkle"),Nt(a,"left",t[3]+"%"),S(e,"class","range-slider svelte-vytkle"),Nt(e,"--start-percent",t[4]+"%"),Nt(e,"--end-percent",t[3]+"%")},m(c,h){at(c,e,h),R(e,n),R(n,r),R(e,i),R(e,o),t[13](o),R(e,s),R(e,a),t[16](a),t[19](e),u||(l=[yt(r,"mousedown",t[11]),yt(r,"touchstart",t[12]),yt(o,"mousedown",t[14]),yt(o,"touchstart",t[15]),yt(a,"mousedown",t[17]),yt(a,"touchstart",t[18])],u=!0)},p(c,[h]){h&16&&Nt(o,"left",c[4]+"%"),h&8&&Nt(a,"left",c[3]+"%"),h&16&&Nt(e,"--start-percent",c[4]+"%"),h&8&&Nt(e,"--end-percent",c[3]+"%")},i:At,o:At,d(c){c&&st(e),t[13](null),t[16](null),t[19](null),u=!1,Ut(l)}}}function ja(t,e,n){let r,i,{min:o=0}=e,{max:s=100}=e,{startValue:a}=e,{endValue:u}=e;const l=Pr();let c,h,_,y=!1,q=null,P=null,O=0;function T(m,b){y=!0,q=b,P=c.getBoundingClientRect(),b==="range"&&(O=u-a),window.addEventListener("mousemove",x),window.addEventListener("mouseup",D)}function x(m){if(!y)return;const b=Math.min(Math.max(0,(m.clientX-P.left)/P.width),1),M=Math.round(b*(s-o)+o);if(q==="start")n(7,a=Math.min(M,u)),l("startChange",a);else if(q==="end")n(8,u=Math.max(M,a)),l("endChange",u);else if(q==="range"){let k=M-Math.floor(O/2),z=M+Math.ceil(O/2);k<o&&(k=o,z=o+O),z>s&&(z=s,k=s-O),k=Math.max(o,k),z=Math.min(s,z),n(7,a=k),n(8,u=z),l("startChange",a),l("endChange",u)}}function D(){y=!1,window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",D)}function W(m,b){m.preventDefault(),y=!0,q=b,P=c.getBoundingClientRect(),b==="range"&&(O=u-a),window.addEventListener("touchmove",$,{passive:!1}),window.addEventListener("touchend",j)}function $(m){if(m.preventDefault(),!y)return;const b=m.touches[0],M=Math.min(Math.max(0,(b.clientX-P.left)/P.width),1),k=Math.round(M*(s-o)+o);if(q==="start")n(7,a=Math.min(k,u)),l("startChange",a);else if(q==="end")n(8,u=Math.max(k,a)),l("endChange",u);else if(q==="range"){let z=k-Math.floor(O/2),N=k+Math.ceil(O/2);z<o&&(z=o,N=o+O),N>s&&(N=s,z=s-O),z=Math.max(o,z),N=Math.min(s,N),n(7,a=z),n(8,u=N),l("startChange",a),l("endChange",u)}}function j(){y=!1,window.removeEventListener("touchmove",$),window.removeEventListener("touchend",j)}const U=m=>T(m,"range"),p=m=>W(m,"range");function f(m){Lt[m?"unshift":"push"](()=>{h=m,n(1,h)})}const v=m=>T(m,"start"),d=m=>W(m,"start");function E(m){Lt[m?"unshift":"push"](()=>{_=m,n(2,_)})}const V=m=>T(m,"end"),g=m=>W(m,"end");function A(m){Lt[m?"unshift":"push"](()=>{c=m,n(0,c)})}return t.$$set=m=>{"min"in m&&n(9,o=m.min),"max"in m&&n(10,s=m.max),"startValue"in m&&n(7,a=m.startValue),"endValue"in m&&n(8,u=m.endValue)},t.$$.update=()=>{t.$$.dirty&1664&&n(4,r=s>o?(a-o)/(s-o)*100:0),t.$$.dirty&1792&&n(3,i=s>o?(u-o)/(s-o)*100:100)},[c,h,_,i,r,T,W,a,u,o,s,U,p,f,v,d,E,V,g,A]}class Ja extends on{constructor(e){super(),rn(this,e,ja,Za,nn,{min:9,max:10,startValue:7,endValue:8})}}function $a(t){let e,n=t[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.",r;return{c(){e=X("p"),r=xt(n),S(e,"class","placeholder-text svelte-eg7lyq")},m(i,o){at(i,e,o),R(e,r)},p(i,o){o&16&&n!==(n=i[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.")&&It(r,n)},d(i){i&&st(e)}}}function tu(t){let e,n,r=Ne(t[0].title,t[3])+"",i,o,s=(t[5]?t[5](t[1],t[0][t[1]]):t[0][t[1]])+"",a,u,l,c=t[0].date.toISOString().split("T")[0]+"",h,_,y,q,P=Ne(t[0].text,t[3])+"",O=t[4]&&Sr(t),T=t[6]&&Mr(t);return{c(){O&&O.c(),e=lt(),n=X("h1"),i=lt(),o=X("span"),a=xt(s),u=lt(),l=X("h2"),h=xt(c),_=lt(),T&&T.c(),y=lt(),q=X("p"),S(n,"class","svelte-eg7lyq"),Nt(o,"background",t[2](t[0][t[1]])),S(o,"class","svelte-eg7lyq"),S(l,"class","svelte-eg7lyq"),S(q,"class","svelte-eg7lyq")},m(x,D){O&&O.m(x,D),at(x,e,D),at(x,n,D),n.innerHTML=r,at(x,i,D),at(x,o,D),R(o,a),at(x,u,D),at(x,l,D),R(l,h),at(x,_,D),T&&T.m(x,D),at(x,y,D),at(x,q,D),q.innerHTML=P},p(x,D){x[4]?O?O.p(x,D):(O=Sr(x),O.c(),O.m(e.parentNode,e)):O&&(O.d(1),O=null),D&9&&r!==(r=Ne(x[0].title,x[3])+"")&&(n.innerHTML=r),D&35&&s!==(s=(x[5]?x[5](x[1],x[0][x[1]]):x[0][x[1]])+"")&&It(a,s),D&7&&Nt(o,"background",x[2](x[0][x[1]])),D&1&&c!==(c=x[0].date.toISOString().split("T")[0]+"")&&It(h,c),x[6]?T?T.p(x,D):(T=Mr(x),T.c(),T.m(y.parentNode,y)):T&&(T.d(1),T=null),D&9&&P!==(P=Ne(x[0].text,x[3])+"")&&(q.innerHTML=P)},d(x){O&&O.d(x),x&&st(e),x&&st(n),x&&st(i),x&&st(o),x&&st(u),x&&st(l),x&&st(_),T&&T.d(x),x&&st(y),x&&st(q)}}}function Sr(t){let e,n,r,i,o,s;return{c(){e=X("div"),n=X("span"),n.textContent="\u{1F4CC} Pinned",r=lt(),i=X("button"),i.textContent="\u2715",S(n,"class","pin-indicator svelte-eg7lyq"),S(i,"class","unpin-btn svelte-eg7lyq"),S(e,"class","pin-header svelte-eg7lyq")},m(a,u){at(a,e,u),R(e,n),R(e,r),R(e,i),o||(s=yt(i,"click",t[9]),o=!0)},p:At,d(a){a&&st(e),o=!1,s()}}}function Mr(t){let e=t[6](t[1],t[0][t[1]]),n,r=e&&Er(t);return{c(){r&&r.c(),n=Or()},m(i,o){r&&r.m(i,o),at(i,n,o)},p(i,o){o&67&&(e=i[6](i[1],i[0][i[1]])),e?r?r.p(i,o):(r=Er(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&st(n)}}}function Er(t){let e,n,r=t[6](t[1],t[0][t[1]])+"",i;return{c(){e=X("p"),n=X("em"),i=xt(r),S(e,"class","svelte-eg7lyq")},m(o,s){at(o,e,s),R(e,n),R(n,i)},p(o,s){s&67&&r!==(r=o[6](o[1],o[0][o[1]])+"")&&It(i,r)},d(o){o&&st(e)}}}function eu(t){let e;function n(o,s){return o[0]?tu:$a}let r=n(t),i=r(t);return{c(){e=X("div"),i.c(),S(e,"class","detail-card svelte-eg7lyq")},m(o,s){at(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},i:At,o:At,d(o){o&&st(e),i.d()}}}function Ne(t,e){if(!e||!t)return t;try{const n=new RegExp(`(${e})`,"gi");return t.replace(n,"<mark>$1</mark>")}catch{const r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${r})`,"gi");return t.replace(i,"<mark>$1</mark>")}}function nu(t,e,n){const r=Pr();let{hoveredData:i}=e,{domainColumn:o}=e,{data:s}=e,{colorScale:a}=e,{searchQuery:u=""}=e,{isPinned:l=!1}=e,{labelOverride:c=null}=e,{descriptionOverride:h=null}=e;qn(()=>{a.domain(s.map(y=>y[o]))});const _=()=>r("unpin");return t.$$set=y=>{"hoveredData"in y&&n(0,i=y.hoveredData),"domainColumn"in y&&n(1,o=y.domainColumn),"data"in y&&n(8,s=y.data),"colorScale"in y&&n(2,a=y.colorScale),"searchQuery"in y&&n(3,u=y.searchQuery),"isPinned"in y&&n(4,l=y.isPinned),"labelOverride"in y&&n(5,c=y.labelOverride),"descriptionOverride"in y&&n(6,h=y.descriptionOverride)},[i,o,a,u,l,c,h,r,s,_]}class ru extends on{constructor(e){super(),rn(this,e,nu,eu,nn,{hoveredData:0,domainColumn:1,data:8,colorScale:2,searchQuery:3,isPinned:4,labelOverride:5,descriptionOverride:6})}}function Cr(t,e,n){const r=t.slice();return r[62]=e[n],r}function Dr(t,e,n){const r=t.slice();return r[65]=e[n],r}function Ar(t){let e,n,r,i,o,s,a=t[12],u=[];for(let l=0;l<a.length;l+=1)u[l]=Rr(Dr(t,a,l));return{c(){e=X("label"),e.textContent="\u{1F3A8} Color by Column:",n=lt(),r=X("select"),i=X("option"),i.textContent="Select column";for(let l=0;l<u.length;l+=1)u[l].c();S(e,"for","domain-column"),S(e,"class","svelte-1coqrco"),i.__value="",i.value=i.__value,i.disabled=!0,S(r,"id","domain-column"),S(r,"class","svelte-1coqrco"),t[1]===void 0&&Be(()=>t[38].call(r))},m(l,c){at(l,e,c),at(l,n,c),at(l,r,c),R(r,i);for(let h=0;h<u.length;h+=1)u[h].m(r,null);Gn(r,t[1]),o||(s=[yt(r,"change",t[26]),yt(r,"change",t[38])],o=!0)},p(l,c){if(c[0]&4096){a=l[12];let h;for(h=0;h<a.length;h+=1){const _=Dr(l,a,h);u[h]?u[h].p(_,c):(u[h]=Rr(_),u[h].c(),u[h].m(r,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}c[0]&4098&&Gn(r,l[1])},d(l){l&&st(e),l&&st(n),l&&st(r),zr(u,l),o=!1,Ut(s)}}}function Rr(t){let e,n=t[65]+"",r,i;return{c(){e=X("option"),r=xt(n),e.__value=i=t[65],e.value=e.__value},m(o,s){at(o,e,s),R(e,r)},p(o,s){s[0]&4096&&n!==(n=o[65]+"")&&It(r,n),s[0]&4096&&i!==(i=o[65])&&(e.__value=i,e.value=e.__value)},d(o){o&&st(e)}}}function Tr(t){let e,n,r,i,o,s=t[2],a=[];for(let u=0;u<s.length;u+=1)a[u]=qr(Cr(t,s,u));return{c(){e=X("label"),e.textContent="\u2728 Highlight Values (hold Shift/Cmd to select multiple):",n=lt(),r=X("select");for(let u=0;u<a.length;u+=1)a[u].c();S(e,"for","value-select"),S(e,"class","svelte-1coqrco"),S(r,"id","value-select"),r.multiple=!0,S(r,"size","5"),S(r,"class","multi-select svelte-1coqrco")},m(u,l){at(u,e,l),at(u,n,l),at(u,r,l);for(let c=0;c<a.length;c+=1)a[c].m(r,null);i||(o=yt(r,"change",t[27]),i=!0)},p(u,l){if(l[0]&12){s=u[2];let c;for(c=0;c<s.length;c+=1){const h=Cr(u,s,c);a[c]?a[c].p(h,l):(a[c]=qr(h),a[c].c(),a[c].m(r,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}},d(u){u&&st(e),u&&st(n),u&&st(r),zr(a,u),i=!1,o()}}}function qr(t){let e,n=t[62]+"",r,i,o;return{c(){e=X("option"),r=xt(n),e.__value=i=t[62],e.value=e.__value,e.selected=o=t[3].has(t[62])},m(s,a){at(s,e,a),R(e,r)},p(s,a){a[0]&4&&n!==(n=s[62]+"")&&It(r,n),a[0]&4&&i!==(i=s[62])&&(e.__value=i,e.value=e.__value),a[0]&12&&o!==(o=s[3].has(s[62]))&&(e.selected=o)},d(s){s&&st(e)}}}function iu(t){let e;return{c(){e=xt("\u25B6")},m(n,r){at(n,e,r)},d(n){n&&st(e)}}}function ou(t){let e;return{c(){e=xt("\u275A\u275A")},m(n,r){at(n,e,r)},d(n){n&&st(e)}}}function su(t){let e;return{c(){e=X("p"),e.textContent="Waiting for data"},m(n,r){at(n,e,r)},p:At,i:At,o:At,d(n){n&&st(e)}}}function lu(t){let e,n,r;function i(c,h){return c[18]==="downloading"?fu:c[18]==="parsing"?cu:uu}let o=i(t),s=o(t);function a(c,h){return c[18]==="downloading"?du:hu}let u=a(t),l=u(t);return{c(){e=X("div"),n=X("div"),s.c(),r=lt(),l.c(),S(n,"class","progress-header svelte-1coqrco"),S(e,"class","progress-wrap svelte-1coqrco")},m(c,h){at(c,e,h),R(e,n),s.m(n,null),R(e,r),l.m(e,null)},p(c,h){o!==(o=i(c))&&(s.d(1),s=o(c),s&&(s.c(),s.m(n,null))),u===(u=a(c))&&l?l.p(c,h):(l.d(1),l=u(c),l&&(l.c(),l.m(e,null)))},i:At,o:At,d(c){c&&st(e),s.d(),l.d()}}}function au(t){let e,n,r,i;function o(u){t[50](u)}function s(u){t[51](u)}let a={data:t[14],domainColumn:t[1],selectedValues:t[3],opacity:t[13],searchQuery:t[9],showAnnotations:t[16],highlightedData:t[8],startDate:t[4],endDate:t[5],uniqueValues:t[2]};return t[10]!==void 0&&(a.hoveredData=t[10]),t[11]!==void 0&&(a.selectedData=t[11]),e=new Ga({props:a}),Lt.push(()=>Xe(e,"hoveredData",o)),Lt.push(()=>Xe(e,"selectedData",s)),{c(){_n(e.$$.fragment)},m(u,l){Ue(e,u,l),i=!0},p(u,l){const c={};l[0]&16384&&(c.data=u[14]),l[0]&2&&(c.domainColumn=u[1]),l[0]&8&&(c.selectedValues=u[3]),l[0]&8192&&(c.opacity=u[13]),l[0]&512&&(c.searchQuery=u[9]),l[0]&65536&&(c.showAnnotations=u[16]),l[0]&256&&(c.highlightedData=u[8]),l[0]&16&&(c.startDate=u[4]),l[0]&32&&(c.endDate=u[5]),l[0]&4&&(c.uniqueValues=u[2]),!n&&l[0]&1024&&(n=!0,c.hoveredData=u[10],He(()=>n=!1)),!r&&l[0]&2048&&(r=!0,c.selectedData=u[11],He(()=>r=!1)),e.$set(c)},i(u){i||(ee(e.$$.fragment,u),i=!0)},o(u){he(e.$$.fragment,u),i=!1},d(u){Ye(e,u)}}}function uu(t){let e;return{c(){e=xt("Loading...")},m(n,r){at(n,e,r)},d(n){n&&st(e)}}}function cu(t){let e;return{c(){e=xt("Parsing CSV...")},m(n,r){at(n,e,r)},d(n){n&&st(e)}}}function fu(t){let e;return{c(){e=xt("Downloading CSV...")},m(n,r){at(n,e,r)},d(n){n&&st(e)}}}function hu(t){let e;return{c(){e=X("div"),S(e,"class","progress-bar indeterminate svelte-1coqrco")},m(n,r){at(n,e,r)},p:At,d(n){n&&st(e)}}}function du(t){let e;function n(o,s){return o[20]?gu:pu}let r=n(t),i=r(t);return{c(){i.c(),e=Or()},m(o,s){i.m(o,s),at(o,e,s)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&st(e)}}}function pu(t){let e,n,r,i=re(t[19])+"",o;return{c(){e=X("div"),n=lt(),r=X("div"),o=xt(i),S(e,"class","progress-bar indeterminate svelte-1coqrco"),S(r,"class","progress-label svelte-1coqrco")},m(s,a){at(s,e,a),at(s,n,a),at(s,r,a),R(r,o)},p(s,a){a[0]&524288&&i!==(i=re(s[19])+"")&&It(o,i)},d(s){s&&st(e),s&&st(n),s&&st(r)}}}function gu(t){let e,n,r,i,o,s,a=re(t[19])+"",u,l,c=re(t[20])+"",h,_;return{c(){e=X("div"),n=X("div"),r=lt(),i=X("div"),o=xt(t[21]),s=xt("% ("),u=xt(a),l=xt(" / "),h=xt(c),_=xt(")"),S(n,"class","progress-fill svelte-1coqrco"),Nt(n,"width",t[21]+"%"),S(e,"class","progress-bar svelte-1coqrco"),S(i,"class","progress-label svelte-1coqrco")},m(y,q){at(y,e,q),R(e,n),at(y,r,q),at(y,i,q),R(i,o),R(i,s),R(i,u),R(i,l),R(i,h),R(i,_)},p(y,q){q[0]&2097152&&Nt(n,"width",y[21]+"%"),q[0]&2097152&&It(o,y[21]),q[0]&524288&&a!==(a=re(y[19])+"")&&It(u,a),q[0]&1048576&&c!==(c=re(y[20])+"")&&It(h,c)},d(y){y&&st(e),y&&st(r),y&&st(i)}}}function mu(t){let e,n,r,i,o,s,a,u,l,c,h,_,y,q,P,O,T,x,D,W,$,j,U,p,f,v,d,E,V,g,A,m,b,M,k,z,N,I,F,Z,ut,ot,pt,K=qt(t[4])+"",rt,_t,nt,gt=qt(t[5])+"",w,B,Q,G,mt,J,dt,ft,wt,it,Et,C,Y,H,L,et,kt,Mt,ht,ct,St,Ct,vt=t[12].length&&Ar(t),Dt=t[2].length&&Tr(t);function ke(tt){t[42](tt)}function xe(tt){t[43](tt)}let un={min:0,max:t[22]};t[6]!==void 0&&(un.startValue=t[6]),t[7]!==void 0&&(un.endValue=t[7]),I=new Ja({props:un}),Lt.push(()=>Xe(I,"startValue",ke)),Lt.push(()=>Xe(I,"endValue",xe)),I.$on("startChange",t[44]),I.$on("endChange",t[45]);function Un(tt,bt){return tt[15]?ou:iu}let Se=Un(t),Yt=Se(t);const Yn=[au,lu,su],Wt=[];function Wn(tt,bt){return tt[14].length?0:tt[17]?1:2}return L=Wn(t),et=Wt[L]=Yn[L](t),ht=new ru({props:{hoveredData:t[25],data:t[0],domainColumn:t[1],colorScale:t[24],searchQuery:t[9],isPinned:!!t[11]}}),ht.$on("unpin",t[52]),{c(){e=X("div"),n=X("div"),n.innerHTML=`<h1 class="title svelte-1coqrco">Semantic Map [DEMO]</h1> 
    <p class="subtitle">Each dot represents an article. When the dots are closer together, the
      articles are similar in meaning.</p>`,r=lt(),i=X("div"),o=X("div"),s=X("div"),a=X("button"),a.textContent="Reset filters",u=lt(),l=X("div"),l.innerHTML=`<details class="svelte-1coqrco"><summary class="svelte-1coqrco"><span class="toggle-icon svelte-1coqrco">+</span> What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-1coqrco"><p class="svelte-1coqrco">Semantic maps are tools that allow users to visually explore how
              different topics and ideas are connected. By analyzing the
              relationships between articles, these maps can reveal patterns and
              clusters in the data.</p> 
            <p class="svelte-1coqrco">Newsrooms can use semantic maps to:</p> 
            <ul class="svelte-1coqrco"><li class="svelte-1coqrco">Audit their coverage by identifying themes that may be
                underrepresented or overlooked.</li> 
              <li class="svelte-1coqrco">Track how their editorial focus evolves over time.</li> 
              <li class="svelte-1coqrco">Discover which topics are being covered by other outlets,
                offering opportunities to adjust their editorial focus or
                collaborate.</li></ul></div></details>`,c=lt(),h=X("label"),h.textContent="\u{1F4C1} Upload CSV:",_=lt(),y=X("input"),q=lt(),P=X("div"),P.innerHTML=`<details class="svelte-1coqrco"><summary class="svelte-1coqrco"><span class="toggle-icon svelte-1coqrco">+</span> CSV File Requirements</summary> 
          <div class="info-box-content svelte-1coqrco"><p class="svelte-1coqrco">Your CSV file must include the following columns:</p> 
            <ul class="svelte-1coqrco"><li class="svelte-1coqrco"><strong class="svelte-1coqrco">x, y</strong> - Numeric coordinates for positioning points on the scatterplot</li> 
              <li class="svelte-1coqrco"><strong class="svelte-1coqrco">date</strong> - Date field for timeline filtering (ISO format recommended)</li> 
              <li class="svelte-1coqrco"><strong class="svelte-1coqrco">title</strong> - Article headline or title (searchable)</li> 
              <li class="svelte-1coqrco"><strong class="svelte-1coqrco">text</strong> - Article body or description (searchable)</li> 
              <li class="svelte-1coqrco"><strong class="svelte-1coqrco">org or state</strong> - Categorical field for color-coding points (at least one required)</li></ul> 
            <p class="svelte-1coqrco"><strong class="svelte-1coqrco">Optional columns:</strong></p> 
            <ul class="svelte-1coqrco"><li class="svelte-1coqrco"><strong class="svelte-1coqrco">url, link, href, or permalink</strong> - Clickable link (Ctrl/Cmd + Click to open)</li></ul> 
            <p class="svelte-1coqrco"><em>Note: Column names are case-insensitive.</em></p></div></details>`,O=lt(),T=X("label"),T.textContent="\u{1F50D} Search Text (supports regex):",x=lt(),D=X("input"),W=lt(),vt&&vt.c(),$=lt(),Dt&&Dt.c(),j=lt(),U=X("label"),U.textContent="\u{1F4A1} Adjust Opacity:",p=lt(),f=X("input"),v=lt(),d=X("div"),E=X("label"),E.textContent="\u{1F4C5} Date Range:",V=lt(),g=X("input"),b=lt(),M=X("input"),N=lt(),_n(I.$$.fragment),ut=lt(),ot=X("div"),pt=X("span"),rt=xt(K),_t=lt(),nt=X("span"),w=xt(gt),B=lt(),Q=X("div"),G=X("button"),G.textContent="-1W",mt=lt(),J=X("button"),J.textContent="-1D",dt=lt(),ft=X("button"),Yt.c(),wt=lt(),it=X("button"),it.textContent="+1D",Et=lt(),C=X("button"),C.textContent="+1W",Y=lt(),H=X("div"),et.c(),kt=lt(),Mt=X("div"),_n(ht.$$.fragment),S(n,"class","title-section svelte-1coqrco"),S(a,"class","reset-btn svelte-1coqrco"),S(s,"class","filter-actions svelte-1coqrco"),S(l,"class","nerd-box svelte-1coqrco"),S(h,"for","file-upload"),S(h,"class","svelte-1coqrco"),S(y,"id","file-upload"),S(y,"type","file"),S(y,"accept",".csv"),S(y,"class","svelte-1coqrco"),S(P,"class","info-box svelte-1coqrco"),S(T,"for","search-input"),S(T,"class","svelte-1coqrco"),S(D,"id","search-input"),S(D,"type","text"),S(D,"placeholder","Search or regex pattern..."),S(D,"class","svelte-1coqrco"),S(U,"for","opacity-slider"),S(U,"class","svelte-1coqrco"),S(f,"id","opacity-slider"),S(f,"type","range"),S(f,"min","0"),S(f,"max",".3"),S(f,"step","0.01"),S(f,"class","svelte-1coqrco"),S(E,"for","start-date"),S(E,"class","svelte-1coqrco"),S(g,"id","start-date"),S(g,"type","date"),g.value=A=qt(t[4]),S(g,"max",m=qt(t[23])),S(g,"class","svelte-1coqrco"),S(M,"id","end-date"),S(M,"type","date"),M.value=k=qt(t[5]),S(M,"max",z=qt(t[23])),S(M,"class","svelte-1coqrco"),S(ot,"class","date-range-labels svelte-1coqrco"),S(G,"class","svelte-1coqrco"),S(J,"class","svelte-1coqrco"),S(ft,"class","play-button svelte-1coqrco"),S(it,"class","svelte-1coqrco"),S(C,"class","svelte-1coqrco"),S(Q,"class","date-navigation svelte-1coqrco"),S(d,"class","date-controls svelte-1coqrco"),S(o,"class","filter-panel left-panel svelte-1coqrco"),S(H,"class","scatterplot-container svelte-1coqrco"),S(Mt,"class","detail-panel svelte-1coqrco"),S(i,"class","content svelte-1coqrco"),S(e,"class","container svelte-1coqrco")},m(tt,bt){at(tt,e,bt),R(e,n),R(e,r),R(e,i),R(i,o),R(o,s),R(s,a),R(o,u),R(o,l),R(o,c),R(o,h),R(o,_),R(o,y),R(o,q),R(o,P),R(o,O),R(o,T),R(o,x),R(o,D),R(o,W),vt&&vt.m(o,null),R(o,$),Dt&&Dt.m(o,null),R(o,j),R(o,U),R(o,p),R(o,f),Qn(f,t[13]),R(o,v),R(o,d),R(d,E),R(d,V),R(d,g),R(d,b),R(d,M),R(d,N),Ue(I,d,null),R(d,ut),R(d,ot),R(ot,pt),R(pt,rt),R(ot,_t),R(ot,nt),R(nt,w),R(d,B),R(d,Q),R(Q,G),R(Q,mt),R(Q,J),R(Q,dt),R(Q,ft),Yt.m(ft,null),R(Q,wt),R(Q,it),R(Q,Et),R(Q,C),R(i,Y),R(i,H),Wt[L].m(H,null),R(i,kt),R(i,Mt),Ue(ht,Mt,null),ct=!0,St||(Ct=[yt(a,"click",t[34]),yt(y,"change",t[29]),yt(D,"input",t[32]),yt(f,"change",t[39]),yt(f,"input",t[39]),yt(f,"input",t[33]),yt(g,"change",t[40]),yt(M,"change",t[41]),yt(G,"click",t[46]),yt(J,"click",t[47]),yt(ft,"click",t[31]),yt(it,"click",t[48]),yt(C,"click",t[49])],St=!0)},p(tt,bt){tt[12].length?vt?vt.p(tt,bt):(vt=Ar(tt),vt.c(),vt.m(o,$)):vt&&(vt.d(1),vt=null),tt[2].length?Dt?Dt.p(tt,bt):(Dt=Tr(tt),Dt.c(),Dt.m(o,j)):Dt&&(Dt.d(1),Dt=null),bt[0]&8192&&Qn(f,tt[13]),(!ct||bt[0]&16&&A!==(A=qt(tt[4])))&&(g.value=A),(!ct||bt[0]&8388608&&m!==(m=qt(tt[23])))&&S(g,"max",m),(!ct||bt[0]&32&&k!==(k=qt(tt[5])))&&(M.value=k),(!ct||bt[0]&8388608&&z!==(z=qt(tt[23])))&&S(M,"max",z);const Me={};bt[0]&4194304&&(Me.max=tt[22]),!F&&bt[0]&64&&(F=!0,Me.startValue=tt[6],He(()=>F=!1)),!Z&&bt[0]&128&&(Z=!0,Me.endValue=tt[7],He(()=>Z=!1)),I.$set(Me),(!ct||bt[0]&16)&&K!==(K=qt(tt[4])+"")&&It(rt,K),(!ct||bt[0]&32)&&gt!==(gt=qt(tt[5])+"")&&It(w,gt),Se!==(Se=Un(tt))&&(Yt.d(1),Yt=Se(tt),Yt&&(Yt.c(),Yt.m(ft,null)));let cn=L;L=Wn(tt),L===cn?Wt[L].p(tt,bt):(Ci(),he(Wt[cn],1,1,()=>{Wt[cn]=null}),Di(),et=Wt[L],et?et.p(tt,bt):(et=Wt[L]=Yn[L](tt),et.c()),ee(et,1),et.m(H,null));const Qt={};bt[0]&33554432&&(Qt.hoveredData=tt[25]),bt[0]&1&&(Qt.data=tt[0]),bt[0]&2&&(Qt.domainColumn=tt[1]),bt[0]&16777216&&(Qt.colorScale=tt[24]),bt[0]&512&&(Qt.searchQuery=tt[9]),bt[0]&2048&&(Qt.isPinned=!!tt[11]),ht.$set(Qt)},i(tt){ct||(ee(I.$$.fragment,tt),ee(et),ee(ht.$$.fragment,tt),ct=!0)},o(tt){he(I.$$.fragment,tt),he(et),he(ht.$$.fragment,tt),ct=!1},d(tt){tt&&st(e),vt&&vt.d(),Dt&&Dt.d(),Ye(I),Yt.d(),Wt[L].d(),Ye(ht),St=!1,Ut(Ct)}}}function _u(){try{const t=new URLSearchParams(window.location.search),e=t.get("url"),n=t.get("filename"),r=t.get("bucket");if(e&&/^https?:\/\//i.test(e))return e;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(t){return console.warn("Failed to resolve data URL from query params:",t),{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function re(t){if(!t||t<=0)return"0 KB";const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${e[r]}`}function qt(t){return t?t.toISOString().split("T")[0]:""}function yu(t,e,n){let r,i,o,s,a,u="",l=[],c=[],h="org",_=[],y=new Set,q=.02,P=null,O=null,T=[],x=[],D=0,W=0,$=!1,j=null,U=[],p="",f=!1,v=null,d=null,E=!1,V="idle",g=0,A=0,m=0;qn(async()=>{try{n(17,E=!0),n(18,V="downloading"),n(19,g=0),n(20,A=0),n(21,m=0),n(35,u=_u());const C=await fetch(u,{mode:"cors",cache:"no-store"});if(!C.ok)throw new Error(`HTTP ${C.status}`);const Y=C.headers.get("content-length");n(20,A=Y?parseInt(Y,10):0);let H="";if(C.body&&C.body.getReader){const L=C.body.getReader(),et=[];let kt=0;for(;;){const{done:ct,value:St}=await L.read();if(ct)break;et.push(St),kt+=St.byteLength,n(19,g=kt),A&&n(21,m=Math.round(kt/A*100))}const Mt=new Uint8Array(kt);let ht=0;for(const ct of et)Mt.set(ct,ht),ht+=ct.byteLength;H=new TextDecoder().decode(Mt),console.log("CSV head:",H.split(`
`).slice(0,5).join(`
`))}else H=await C.text();n(18,V="parsing"),await Promise.resolve(b(H)),n(18,V="idle")}catch(C){console.error("Failed to load CSV:",C)}finally{n(17,E=!1)}return()=>{j&&clearInterval(j)}});function b(C){const Y=C.split(/\r?\n/);if(Y.length>0){const et=Y[0].split(",").map(kt=>kt.trim().toLowerCase()).join(",");Y[0]=et,C=Y.join(`
`)}const H=Ti.parse(C,{header:!0});n(0,l=H.data.filter(L=>L.x&&L.y&&L.date).map((L,et)=>({...L,x:+L.x,y:+L.y,date:new Date(L.date),id:et}))),n(36,c=H.meta.fields||[]),n(37,x=[...new Set(l.map(L=>L.date.getTime()))].sort((L,et)=>L-et).map(L=>new Date(L))),n(4,P=x[0]),n(5,O=x[x.length-1]),n(6,D=0),n(7,W=x.length-1),N(),h&&n(2,_=[...new Set(l.map(L=>L[h]).filter(L=>L!=null&&L!==""))].sort((L,et)=>String(L).localeCompare(String(et))))}function M(C){n(1,h=C.target.value),n(2,_=h?[...new Set(l.map(Y=>Y[h]).filter(Boolean))].sort((Y,H)=>String(Y).localeCompare(String(H))):[]),n(3,y=new Set),n(16,f=!1)}function k(C){const Y=[...C.target.selectedOptions].map(L=>L.value);Y.length===_.length||Y.length===0?(n(3,y=new Set),n(8,U=[])):(n(3,y=new Set(Y)),n(8,U=l.filter(L=>y.has(L[h])&&(!P||L.date>=P)&&(!O||L.date<=O)))),n(16,f=!1)}function z(C,Y,H=!1){H?(n(4,P=x[C]||x[0]),n(5,O=x[Y]||x[x.length-1])):(n(4,P=C),n(5,O=Y)),n(16,f=!1),N()}function N(){if(P){const C=P.getTime();n(6,D=Math.max(0,x.findIndex(Y=>Y.getTime()>=C)))}else n(6,D=0);if(O){const C=O.getTime();let Y=-1;for(let H=x.length-1;H>=0;H--)if(x[H].getTime()<=C){Y=H;break}n(7,W=Y>=0?Y:x.length-1)}else n(7,W=x.length-1);D>W&&n(6,D=W),W<D&&n(7,W=D)}function I(C,Y){if(C.detail!==void 0)Y==="start"?(n(6,D=C.detail),D>W&&n(6,D=W)):(n(7,W=C.detail),W<D&&n(7,W=D)),z(D,W,!0);else{const H=C.target.value?new Date(C.target.value):null;Y==="start"?z(H,O):z(P,H),N()}}function F(C){const Y=C.target.files[0];if(Y){const H=new FileReader;n(16,f=!1),H.onload=L=>b(L.target.result),H.readAsText(Y)}}function Z(C){const Y=W-D;let H=D+C,L=W+C;H<0&&(H=0,L=Math.min(Y,x.length-1)),L>=x.length&&(L=x.length-1,H=Math.max(0,L-Y)),n(6,D=H),n(7,W=L),z(D,W,!0)}function ut(){$?(clearInterval(j),n(15,$=!1)):(n(15,$=!0),n(16,f=!1),j=setInterval(()=>{if(W>=x.length-1){clearInterval(j),n(15,$=!1);return}Z(1)},500))}function ot(C){n(9,p=C.target.value),n(16,f=!1)}function pt(){n(16,f=!1)}function K(){$&&j&&(clearInterval(j),n(15,$=!1));const C=c.includes("org")?"org":s[0]||"";n(1,h=C),n(3,y=new Set),n(8,U=[]),n(9,p=""),n(16,f=!1),n(13,q=.02),n(13,q=+q),x.length?(n(6,D=0),n(7,W=x.length-1),z(D,W,!0)):(n(4,P=null),n(5,O=null),n(6,D=0),n(7,W=0))}function rt(){h=ki(this),n(1,h),n(36,c),n(12,s),n(12,s),n(36,c)}function _t(){q=vi(this.value),n(13,q)}const nt=C=>I(C,"start"),gt=C=>I(C,"end");function w(C){D=C,n(6,D)}function B(C){W=C,n(7,W)}const Q=C=>I(C,"start"),G=C=>I(C,"end"),mt=()=>Z(-7),J=()=>Z(-1),dt=()=>Z(1),ft=()=>Z(7);function wt(C){v=C,n(10,v)}function it(C){d=C,n(11,d)}const Et=()=>n(11,d=null);return t.$$.update=()=>{if(t.$$.dirty[1]&16&&/^https?:\/\//i.test(u),t.$$.dirty[0]&256&&new Set(U.map(C=>C.id)),t.$$.dirty[0]&3072&&n(25,r=d||v),t.$$.dirty[1]&32&&n(12,s=c.filter(C=>C==="org"||C==="state")),t.$$.dirty[0]&4098|t.$$.dirty[1]&32&&(!c||c.length===0||(s.length&&!s.includes(h)?n(1,h=s[0]):s.length===0&&n(1,h=""))),t.$$.dirty[0]&6&&n(24,i=Nn($r).domain(h?_:[])),t.$$.dirty[1]&64&&x.length>0&&x[0],t.$$.dirty[1]&64&&n(23,o=x.length>0?x[x.length-1]:null),t.$$.dirty[0]&767|t.$$.dirty[1]&64){const C=x.length&&D===0&&W===x.length-1,Y=y.size>0&&y.size<_.length,H=p&&p.trim().length>0,L=!C||Y||H;n(14,T=l.map(et=>{var Ct,vt,Dt,ke;const kt=(!P||et.date>=P)&&(!O||et.date<=O),Mt=Y?y.has(et[h]):!0;let ht=!0;if(H)try{const xe=new RegExp(p,"i");ht=xe.test((Ct=et.title)!=null?Ct:"")||xe.test((vt=et.text)!=null?vt:"")}catch{ht=((Dt=et.title)!=null?Dt:"").toLowerCase().includes(p.toLowerCase())||((ke=et.text)!=null?ke:"").toLowerCase().includes(p.toLowerCase())}let ct=!1,St=!1;return L?(ct=kt&&Mt&&ht,St=kt&&Mt&&ht):(ct=!1,St=!1),{...et,isActive:ct,isHighlighted:St}}))}t.$$.dirty[0]&64|t.$$.dirty[1]&64&&x.length>1&&D/(x.length-1)*100,t.$$.dirty[0]&128|t.$$.dirty[1]&64&&x.length>1&&W/(x.length-1)*100,t.$$.dirty[1]&64&&n(22,a=x.length>0?x.length-1:0)},[l,h,_,y,P,O,D,W,U,p,v,d,s,q,T,$,f,E,V,g,A,m,a,o,i,r,M,k,I,F,Z,ut,ot,pt,K,u,c,x,rt,_t,nt,gt,w,B,Q,G,mt,J,dt,ft,wt,it,Et]}class wu extends on{constructor(e){super(),rn(this,e,yu,mu,nn,{},null,[-1,-1,-1])}}new wu({target:document.getElementById("app")});
