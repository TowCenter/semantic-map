(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function It(){}function wr(t){return t()}function Rn(){return Object.create(null)}function Bt(t){t.forEach(wr)}function vr(t){return typeof t=="function"}function Be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function oi(t){return Object.keys(t).length===0}function q(t,e){t.appendChild(e)}function _t(t,e,n){t.insertBefore(e,n||null)}function gt(t){t.parentNode.removeChild(t)}function br(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function B(t){return document.createElement(t)}function zt(t){return document.createTextNode(t)}function lt(){return zt(" ")}function pt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function si(t){return t===""?null:+t}function ai(t){return Array.from(t.childNodes)}function Wt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Nn(t,e){t.value=e==null?"":e}function Ct(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function zn(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function li(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ui(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let he;function ce(t){he=t}function xr(){if(!he)throw new Error("Function called outside component initialization");return he}function yn(t){xr().$$.on_mount.push(t)}function fi(){const t=xr();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=ui(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const le=[],Vt=[],Se=[],en=[],ci=Promise.resolve();let nn=!1;function hi(){nn||(nn=!0,ci.then(kr))}function Ne(t){Se.push(t)}function In(t){en.push(t)}const je=new Set;let ye=0;function kr(){const t=he;do{for(;ye<le.length;){const e=le[ye];ye++,ce(e),di(e.$$)}for(ce(null),le.length=0,ye=0;Vt.length;)Vt.pop()();for(let e=0;e<Se.length;e+=1){const n=Se[e];je.has(n)||(je.add(n),n())}Se.length=0}while(le.length);for(;en.length;)en.pop()();nn=!1,je.clear(),ce(t)}function di(t){if(t.fragment!==null){t.update(),Bt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}const Ee=new Set;let Gt;function Mr(){Gt={r:0,c:[],p:Gt}}function Sr(){Gt.r||Bt(Gt.c),Gt=Gt.p}function Xt(t,e){t&&t.i&&(Ee.delete(t),t.i(e))}function jt(t,e,n,r){if(t&&t.o){if(Ee.has(t))return;Ee.add(t),Gt.c.push(()=>{Ee.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function On(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function wn(t){t&&t.c()}function Ye(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||Ne(()=>{const s=t.$$.on_mount.map(wr).filter(vr);t.$$.on_destroy?t.$$.on_destroy.push(...s):Bt(s),t.$$.on_mount=[]}),o.forEach(Ne)}function Ue(t,e){const n=t.$$;n.fragment!==null&&(Bt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pi(t,e){t.$$.dirty[0]===-1&&(le.push(t),hi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function We(t,e,n,r,i,o,s,l=[-1]){const u=he;ce(t);const a=t.$$={fragment:null,ctx:[],props:o,update:It,not_equal:i,bound:Rn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Rn(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,g,...v)=>{const k=v.length?v[0]:g;return a.ctx&&i(a.ctx[d],a.ctx[d]=k)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](k),f&&pi(t,d)),g}):[],a.update(),f=!0,Bt(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=ai(e.target);a.fragment&&a.fragment.l(d),d.forEach(gt)}else a.fragment&&a.fragment.c();e.intro&&Xt(t.$$.fragment),Ye(t,e.target,e.anchor,e.customElement),kr()}ce(u)}class Ke{$destroy(){Ue(this,1),this.$destroy=It}$on(e,n){if(!vr(n))return It;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!oi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(mi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,l={},u=0,a={};function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(h){var y=et(h);y.chunkSize=parseInt(y.chunkSize),h.step||h.chunk||(y.chunkSize=null),this._handle=new z(y),(this._handle.streamer=this)._config=y}.call(this,c),this.parseChunk=function(h,y){var M=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<M){let P=this._config.newline;P||(_=this._config.quoteChar||'"',P=this._handle.guessLineEndings(h,_)),h=[...h.split(P).slice(M)].join(P)}this.isFirstChunk&&X(this._config.beforeFirstChunk)&&(_=this._config.beforeFirstChunk(h))!==void 0&&(h=_),this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+h,_=(this._partialLine="",this._handle.parse(M,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=_.meta.cursor,M=(this._finished||(this._partialLine=M.substring(h-this._baseIndex),this._baseIndex=h),_&&_.data&&(this._rowCount+=_.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:_,workerId:a.WORKER_ID,finished:M});else if(X(this._config.chunk)&&!y){if(this._config.chunk(_,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=_=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(_.data),this._completeResults.errors=this._completeResults.errors.concat(_.errors),this._completeResults.meta=_.meta),this._completed||!M||!X(this._config.complete)||_&&_.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||_&&_.meta.paused||this._nextChunk(),_}this._halted=!0},this._sendError=function(h){X(this._config.error)?this._config.error(h):s&&this._config.error&&r.postMessage({workerId:a.WORKER_ID,error:h,finished:!1})}}function d(c){var h;(c=c||{}).chunkSize||(c.chunkSize=a.RemoteChunkSize),f.call(this,c),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),o||(h.onload=Q(this._chunkLoaded,this),h.onerror=Q(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var y,M=this._config.downloadRequestHeaders;for(y in M)h.setRequestHeader(y,M[y])}var _;this._config.chunkSize&&(_=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+_));try{h.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(y=>(y=y.getResponseHeader("Content-Range"))!==null?parseInt(y.substring(y.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(y){y=h.statusText||y,this._sendError(new Error(y))}}function g(c){(c=c||{}).chunkSize||(c.chunkSize=a.LocalChunkSize),f.call(this,c);var h,y,M=typeof FileReader<"u";this.stream=function(_){this._input=_,y=_.slice||_.webkitSlice||_.mozSlice,M?((h=new FileReader).onload=Q(this._chunkLoaded,this),h.onerror=Q(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),_=y.call(_,this._start,P)),h.readAsText(_,this._config.encoding));M||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(h.error)}}function v(c){var h;f.call(this,c=c||{}),this.stream=function(y){return h=y,this._nextChunk()},this._nextChunk=function(){var y,M;if(!this._finished)return y=this._config.chunkSize,h=y?(M=h.substring(0,y),h.substring(y)):(M=h,""),this._finished=!h,this.parseChunk(M)}}function k(c){f.call(this,c=c||{});var h=[],y=!0,M=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):y=!0},this._streamData=Q(function(_){try{h.push(typeof _=="string"?_:_.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(P){this._streamError(P)}},this),this._streamError=Q(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=Q(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function z(c){var h,y,M,_,P=Math.pow(2,53),p=-P,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,m=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,x=this,C=0,b=0,R=!1,T=!1,V=[],O={data:[],errors:[],meta:{}};function U(D){return c.skipEmptyLines==="greedy"?D.join("").trim()==="":D.length===1&&D[0].length===0}function $(){if(O&&M&&(L("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),M=!1),c.skipEmptyLines&&(O.data=O.data.filter(function(ct){return!U(ct)})),nt()){let ct=function(dt,ht){X(c.transformHeader)&&(dt=c.transformHeader(dt,ht)),V.push(dt)};var Z=ct;if(O)if(Array.isArray(O.data[0])){for(var D=0;nt()&&D<O.data.length;D++)O.data[D].forEach(ct);O.data.splice(0,1)}else O.data.forEach(ct)}function I(ct,dt){for(var ht=c.header?{}:[],ot=0;ot<ct.length;ot++){var tt=ot,w=ct[ot],w=((F,j)=>(G=>(c.dynamicTypingFunction&&c.dynamicTyping[G]===void 0&&(c.dynamicTyping[G]=c.dynamicTypingFunction(G)),(c.dynamicTyping[G]||c.dynamicTyping)===!0))(F)?j==="true"||j==="TRUE"||j!=="false"&&j!=="FALSE"&&((G=>{if(S.test(G)&&(G=parseFloat(G),p<G&&G<P))return 1})(j)?parseFloat(j):m.test(j)?new Date(j):j===""?null:j):j)(tt=c.header?ot>=V.length?"__parsed_extra":V[ot]:tt,w=c.transform?c.transform(w,tt):w);tt==="__parsed_extra"?(ht[tt]=ht[tt]||[],ht[tt].push(w)):ht[tt]=w}return c.header&&(ot>V.length?L("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+ot,b+dt):ot<V.length&&L("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+ot,b+dt)),ht}var K;O&&(c.header||c.dynamicTyping||c.transform)&&(K=1,!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(I),K=O.data.length):O.data=I(O.data,0),c.header&&O.meta&&(O.meta.fields=V),b+=K)}function nt(){return c.header&&V.length===0}function L(D,I,K,Z){D={type:D,code:I,message:K},Z!==void 0&&(D.row=Z),O.errors.push(D)}X(c.step)&&(_=c.step,c.step=function(D){O=D,nt()?$():($(),O.data.length!==0&&(C+=D.data.length,c.preview&&C>c.preview?y.abort():(O.data=O.data[0],_(O,x))))}),this.parse=function(D,I,K){var Z=c.quoteChar||'"',Z=(c.newline||(c.newline=this.guessLineEndings(D,Z)),M=!1,c.delimiter?X(c.delimiter)&&(c.delimiter=c.delimiter(D),O.meta.delimiter=c.delimiter):((Z=((ct,dt,ht,ot,tt)=>{var w,F,j,G;tt=tt||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var at=0;at<tt.length;at++){for(var st,yt=tt[at],ut=0,rt=0,W=0,ft=(j=void 0,new A({comments:ot,delimiter:yt,newline:dt,preview:10}).parse(ct)),xt=0;xt<ft.data.length;xt++)ht&&U(ft.data[xt])?W++:(st=ft.data[xt].length,rt+=st,j===void 0?j=st:0<st&&(ut+=Math.abs(st-j),j=st));0<ft.data.length&&(rt/=ft.data.length-W),(F===void 0||ut<=F)&&(G===void 0||G<rt)&&1.99<rt&&(F=ut,w=yt,G=rt)}return{successful:!!(c.delimiter=w),bestDelimiter:w}})(D,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess)).successful?c.delimiter=Z.bestDelimiter:(M=!0,c.delimiter=a.DefaultDelimiter),O.meta.delimiter=c.delimiter),et(c));return c.preview&&c.header&&Z.preview++,h=D,y=new A(Z),O=y.parse(h,I,K),$(),R?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,y.abort(),h=X(c.chunk)?"":h.substring(y.getCharIndex())},this.resume=function(){x.streamer._halted?(R=!1,x.streamer.parseChunk(h,!0)):setTimeout(x.resume,3)},this.aborted=function(){return T},this.abort=function(){T=!0,y.abort(),O.meta.aborted=!0,X(c.complete)&&c.complete(O),h=""},this.guessLineEndings=function(ct,Z){ct=ct.substring(0,1048576);var Z=new RegExp(E(Z)+"([^]*?)"+E(Z),"gm"),K=(ct=ct.replace(Z,"")).split("\r"),Z=ct.split(`
`),ct=1<Z.length&&Z[0].length<K[0].length;if(K.length===1||ct)return`
`;for(var dt=0,ht=0;ht<K.length;ht++)K[ht][0]===`
`&&dt++;return dt>=K.length/2?`\r
`:"\r"}}function E(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(c){var h=(c=c||{}).delimiter,y=c.newline,M=c.comments,_=c.step,P=c.preview,p=c.fastMode,S=null,m=!1,x=c.quoteChar==null?'"':c.quoteChar,C=x;if(c.escapeChar!==void 0&&(C=c.escapeChar),(typeof h!="string"||-1<a.BAD_DELIMITERS.indexOf(h))&&(h=","),M===h)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=!1),y!==`
`&&y!=="\r"&&y!==`\r
`&&(y=`
`);var b=0,R=!1;this.parse=function(T,V,O){if(typeof T!="string")throw new Error("Input must be a string");var U=T.length,$=h.length,nt=y.length,L=M.length,D=X(_),I=[],K=[],Z=[],ct=b=0;if(!T)return ut();if(p||p!==!1&&T.indexOf(x)===-1){for(var dt=T.split(y),ht=0;ht<dt.length;ht++){if(Z=dt[ht],b+=Z.length,ht!==dt.length-1)b+=y.length;else if(O)return ut();if(!M||Z.substring(0,L)!==M){if(D){if(I=[],G(Z.split(h)),rt(),R)return ut()}else G(Z.split(h));if(P&&P<=ht)return I=I.slice(0,P),ut(!0)}}return ut()}for(var ot=T.indexOf(h,b),tt=T.indexOf(y,b),w=new RegExp(E(C)+E(x),"g"),F=T.indexOf(x,b);;)if(T[b]===x)for(F=b,b++;;){if((F=T.indexOf(x,F+1))===-1)return O||K.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:b}),st();if(F===U-1)return st(T.substring(b,F).replace(w,x));if(x===C&&T[F+1]===C)F++;else if(x===C||F===0||T[F-1]!==C){ot!==-1&&ot<F+1&&(ot=T.indexOf(h,F+1));var j=at((tt=tt!==-1&&tt<F+1?T.indexOf(y,F+1):tt)===-1?ot:Math.min(ot,tt));if(T.substr(F+1+j,$)===h){Z.push(T.substring(b,F).replace(w,x)),T[b=F+1+j+$]!==x&&(F=T.indexOf(x,b)),ot=T.indexOf(h,b),tt=T.indexOf(y,b);break}if(j=at(tt),T.substring(F+1+j,F+1+j+nt)===y){if(Z.push(T.substring(b,F).replace(w,x)),yt(F+1+j+nt),ot=T.indexOf(h,b),F=T.indexOf(x,b),D&&(rt(),R))return ut();if(P&&I.length>=P)return ut(!0);break}K.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:b}),F++}}else if(M&&Z.length===0&&T.substring(b,b+L)===M){if(tt===-1)return ut();b=tt+nt,tt=T.indexOf(y,b),ot=T.indexOf(h,b)}else if(ot!==-1&&(ot<tt||tt===-1))Z.push(T.substring(b,ot)),b=ot+$,ot=T.indexOf(h,b);else{if(tt===-1)break;if(Z.push(T.substring(b,tt)),yt(tt+nt),D&&(rt(),R))return ut();if(P&&I.length>=P)return ut(!0)}return st();function G(W){I.push(W),ct=b}function at(W){var ft=0;return ft=W!==-1&&(W=T.substring(F+1,W))&&W.trim()===""?W.length:ft}function st(W){return O||(W===void 0&&(W=T.substring(b)),Z.push(W),b=U,G(Z),D&&rt()),ut()}function yt(W){b=W,G(Z),Z=[],tt=T.indexOf(y,b)}function ut(W){if(c.header&&!V&&I.length&&!m){var ft=I[0],xt={},kt=new Set(ft);let St=!1;for(let bt=0;bt<ft.length;bt++){let mt=ft[bt];if(xt[mt=X(c.transformHeader)?c.transformHeader(mt,bt):mt]){let Et,wt=xt[mt];for(;Et=mt+"_"+wt,wt++,kt.has(Et););kt.add(Et),ft[bt]=Et,xt[mt]++,St=!0,(S=S===null?{}:S)[Et]=mt}else xt[mt]=1,ft[bt]=mt;kt.add(mt)}St&&console.warn("Duplicate headers found and renamed."),m=!0}return{data:I,errors:K,meta:{delimiter:h,linebreak:y,aborted:R,truncated:!!W,cursor:ct+(V||0),renamedHeaders:S}}}function rt(){_(ut()),I=[],K=[]}},this.abort=function(){R=!0},this.getCharIndex=function(){return b}}function it(c){var h=c.data,y=l[h.workerId],M=!1;if(h.error)y.userError(h.error,h.file);else if(h.results&&h.results.data){var _={abort:function(){M=!0,H(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(X(y.userStep)){for(var P=0;P<h.results.data.length&&(y.userStep({data:h.results.data[P],errors:h.results.errors,meta:h.results.meta},_),!M);P++);delete h.results}else X(y.userChunk)&&(y.userChunk(h.results,_,h.file),delete h.results)}h.finished&&!M&&H(h.workerId,h.results)}function H(c,h){var y=l[c];X(y.userComplete)&&y.userComplete(h),y.terminate(),delete l[c]}function Y(){throw new Error("Not implemented.")}function et(c){if(typeof c!="object"||c===null)return c;var h,y=Array.isArray(c)?[]:{};for(h in c)y[h]=et(c[h]);return y}function Q(c,h){return function(){c.apply(h,arguments)}}function X(c){return typeof c=="function"}return a.parse=function(c,h){var y=(h=h||{}).dynamicTyping||!1;if(X(y)&&(h.dynamicTypingFunction=y,y={}),h.dynamicTyping=y,h.transform=!!X(h.transform)&&h.transform,!h.worker||!a.WORKERS_SUPPORTED)return y=null,a.NODE_STREAM_INPUT,typeof c=="string"?(c=(M=>M.charCodeAt(0)!==65279?M:M.slice(1))(c),y=new(h.download?d:v)(h)):c.readable===!0&&X(c.read)&&X(c.on)?y=new k(h):(r.File&&c instanceof File||c instanceof Object)&&(y=new g(h)),y.stream(c);(y=(()=>{var M;return!!a.WORKERS_SUPPORTED&&(M=(()=>{var _=r.URL||r.webkitURL||null,P=n.toString();return a.BLOB_URL||(a.BLOB_URL=_.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(M=new r.Worker(M)).onmessage=it,M.id=u++,l[M.id]=M)})()).userStep=h.step,y.userChunk=h.chunk,y.userComplete=h.complete,y.userError=h.error,h.step=X(h.step),h.chunk=X(h.chunk),h.complete=X(h.complete),h.error=X(h.error),delete h.worker,y.postMessage({input:c,config:h,workerId:y.id})},a.unparse=function(c,h){var y=!1,M=!0,_=",",P=`\r
`,p='"',S=p+p,m=!1,x=null,C=!1,b=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||a.BAD_DELIMITERS.filter(function(V){return h.delimiter.indexOf(V)!==-1}).length||(_=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(y=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(m=h.skipEmptyLines),typeof h.newline=="string"&&(P=h.newline),typeof h.quoteChar=="string"&&(p=h.quoteChar),typeof h.header=="boolean"&&(M=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");x=h.columns}h.escapeChar!==void 0&&(S=h.escapeChar+p),h.escapeFormulae instanceof RegExp?C=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(p),"g"));if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return R(null,c,m);if(typeof c[0]=="object")return R(x||Object.keys(c[0]),c,m)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||x),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),R(c.fields||[],c.data||[],m);throw new Error("Unable to serialize unrecognized input");function R(V,O,U){var $="",nt=(typeof V=="string"&&(V=JSON.parse(V)),typeof O=="string"&&(O=JSON.parse(O)),Array.isArray(V)&&0<V.length),L=!Array.isArray(O[0]);if(nt&&M){for(var D=0;D<V.length;D++)0<D&&($+=_),$+=T(V[D],D);0<O.length&&($+=P)}for(var I=0;I<O.length;I++){var K=(nt?V:O[I]).length,Z=!1,ct=nt?Object.keys(O[I]).length===0:O[I].length===0;if(U&&!nt&&(Z=U==="greedy"?O[I].join("").trim()==="":O[I].length===1&&O[I][0].length===0),U==="greedy"&&nt){for(var dt=[],ht=0;ht<K;ht++){var ot=L?V[ht]:ht;dt.push(O[I][ot])}Z=dt.join("").trim()===""}if(!Z){for(var tt=0;tt<K;tt++){0<tt&&!ct&&($+=_);var w=nt&&L?V[tt]:tt;$+=T(O[I][w],tt)}I<O.length-1&&(!U||0<K&&!ct)&&($+=P)}}return $}function T(V,O){var U,$;return V==null?"":V.constructor===Date?JSON.stringify(V).slice(1,25):($=!1,C&&typeof V=="string"&&C.test(V)&&(V="'"+V,$=!0),U=V.toString().replace(b,S),($=$||y===!0||typeof y=="function"&&y(V,O)||Array.isArray(y)&&y[O]||((nt,L)=>{for(var D=0;D<L.length;D++)if(-1<nt.indexOf(L[D]))return!0;return!1})(U,a.BAD_DELIMITERS)||-1<U.indexOf(_)||U.charAt(0)===" "||U.charAt(U.length-1)===" ")?p+U+p:U)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!r.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=A,a.ParserHandle=z,a.NetworkStreamer=d,a.FileStreamer=g,a.StringStreamer=v,a.ReadableStreamStreamer=k,r.jQuery&&((i=r.jQuery).fn.parse=function(c){var h=c.config||{},y=[];return this.each(function(P){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)y.push({file:this.files[p],inputElem:this,instanceConfig:i.extend({},h)})}),M(),this;function M(){if(y.length===0)X(c.complete)&&c.complete();else{var P,p,S,m,x=y[0];if(X(c.before)){var C=c.before(x.file,x.inputElem);if(typeof C=="object"){if(C.action==="abort")return P="AbortError",p=x.file,S=x.inputElem,m=C.reason,void(X(c.error)&&c.error({name:P},p,S,m));if(C.action==="skip")return void _();typeof C.config=="object"&&(x.instanceConfig=i.extend(x.instanceConfig,C.config))}else if(C==="skip")return void _()}var b=x.instanceConfig.complete;x.instanceConfig.complete=function(R){X(b)&&b(R,x.file,x.inputElem),_()},a.parse(x.file,x.instanceConfig)}}function _(){y.splice(0,1),M()}}),s&&(r.onmessage=function(c){c=c.data,a.WORKER_ID===void 0&&c&&(a.WORKER_ID=c.workerId),typeof c.input=="string"?r.postMessage({workerId:a.WORKER_ID,results:a.parse(c.input,c.config),finished:!0}):(r.File&&c.input instanceof File||c.input instanceof Object)&&(c=a.parse(c.input,c.config))&&r.postMessage({workerId:a.WORKER_ID,results:c,finished:!0})}),(d.prototype=Object.create(f.prototype)).constructor=d,(g.prototype=Object.create(f.prototype)).constructor=g,(v.prototype=Object.create(v.prototype)).constructor=v,(k.prototype=Object.create(f.prototype)).constructor=k,a})})(Er);const gi=Er.exports;function Ce(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _i(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cr(t){let e,n,r;t.length!==2?(e=Ce,n=(l,u)=>Ce(t(l),u),r=(l,u)=>t(l)-u):(e=t===Ce||t===_i?t:yi,n=t,r=t);function i(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{const d=a+f>>>1;n(l[d],u)<0?a=d+1:f=d}while(a<f)}return a}function o(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{const d=a+f>>>1;n(l[d],u)<=0?a=d+1:f=d}while(a<f)}return a}function s(l,u,a=0,f=l.length){const d=i(l,u,a,f-1);return d>a&&r(l[d-1],u)>-r(l[d],u)?d-1:d}return{left:i,center:s,right:o}}function yi(){return 0}function wi(t){return t===null?NaN:+t}const vi=Cr(Ce),bi=vi.right;Cr(wi).center;const xi=bi;class Ln extends Map{constructor(e,n=Si){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Pn(this,e))}has(e){return super.has(Pn(this,e))}set(e,n){return super.set(ki(this,e),n)}delete(e){return super.delete(Mi(this,e))}}function Pn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ki({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Mi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Si(t){return t!==null&&typeof t=="object"?t.valueOf():t}var rn=Math.sqrt(50),on=Math.sqrt(10),sn=Math.sqrt(2);function Ei(t,e,n){var r,i=-1,o,s,l;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(l=Ar(t,e,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),a=Math.round(e/l);for(u*l<t&&++u,a*l>e&&--a,s=new Array(o=a-u+1);++i<o;)s[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),a=Math.round(e*l);for(u/l<t&&++u,a/l>e&&--a,s=new Array(o=a-u+1);++i<o;)s[i]=(u+i)/l}return r&&s.reverse(),s}function Ar(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=rn?10:o>=on?5:o>=sn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=rn?10:o>=on?5:o>=sn?2:1)}function Ci(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=rn?i*=10:o>=on?i*=5:o>=sn&&(i*=2),e<t?-i:i}function Fn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function qn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Dr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Vn=Symbol("implicit");function Tr(){var t=new Ln,e=[],n=[],r=Vn;function i(o){let s=t.get(o);if(s===void 0){if(r!==Vn)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Ln;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Tr(e,n).unknown(r)},Dr.apply(i,arguments),i}function vn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Rr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ge(){}var de=.7,ze=1/de,ne="\\s*([+-]?\\d+)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ai=/^#([0-9a-f]{3,8})$/,Di=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),Ti=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),Ri=new RegExp(`^rgba\\(${ne},${ne},${ne},${pe}\\)$`),Ni=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${pe}\\)$`),zi=new RegExp(`^hsl\\(${pe},${Lt},${Lt}\\)$`),Ii=new RegExp(`^hsla\\(${pe},${Lt},${Lt},${pe}\\)$`),Xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vn(ge,$t,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Hn,formatHex:Hn,formatHex8:Oi,formatHsl:Li,formatRgb:Bn,toString:Bn});function Hn(){return this.rgb().formatHex()}function Oi(){return this.rgb().formatHex8()}function Li(){return Nr(this).formatHsl()}function Bn(){return this.rgb().formatRgb()}function $t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ai.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yn(e):n===3?new At(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?we(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?we(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Di.exec(t))?new At(e[1],e[2],e[3],1):(e=Ti.exec(t))?new At(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ri.exec(t))?we(e[1],e[2],e[3],e[4]):(e=Ni.exec(t))?we(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zi.exec(t))?Kn(e[1],e[2]/100,e[3]/100,1):(e=Ii.exec(t))?Kn(e[1],e[2]/100,e[3]/100,e[4]):Xn.hasOwnProperty(t)?Yn(Xn[t]):t==="transparent"?new At(NaN,NaN,NaN,0):null}function Yn(t){return new At(t>>16&255,t>>8&255,t&255,1)}function we(t,e,n,r){return r<=0&&(t=e=n=NaN),new At(t,e,n,r)}function Pi(t){return t instanceof ge||(t=$t(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function an(t,e,n,r){return arguments.length===1?Pi(t):new At(t,e,n,r==null?1:r)}function At(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vn(At,an,Rr(ge,{brighter(t){return t=t==null?ze:Math.pow(ze,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?de:Math.pow(de,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new At(Jt(this.r),Jt(this.g),Jt(this.b),Ie(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Un,formatHex:Un,formatHex8:Fi,formatRgb:Wn,toString:Wn}));function Un(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function Fi(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wn(){const t=Ie(this.opacity);return`${t===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${t===1?")":`, ${t})`}`}function Ie(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zt(t){return t=Jt(t),(t<16?"0":"")+t.toString(16)}function Kn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Nt(t,e,n,r)}function Nr(t){if(t instanceof Nt)return new Nt(t.h,t.s,t.l,t.opacity);if(t instanceof ge||(t=$t(t)),!t)return new Nt;if(t instanceof Nt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,u=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=u<.5?o+i:2-o-i,s*=60):l=u>0&&u<1?0:s,new Nt(s,l,u,t.opacity)}function qi(t,e,n,r){return arguments.length===1?Nr(t):new Nt(t,e,n,r==null?1:r)}function Nt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vn(Nt,qi,Rr(ge,{brighter(t){return t=t==null?ze:Math.pow(ze,t),new Nt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?de:Math.pow(de,t),new Nt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new At(Je(t>=240?t-240:t+120,i,r),Je(t,i,r),Je(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Nt(Qn(this.h),ve(this.s),ve(this.l),Ie(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ie(this.opacity);return`${t===1?"hsl(":"hsla("}${Qn(this.h)}, ${ve(this.s)*100}%, ${ve(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Qn(t){return t=(t||0)%360,t<0?t+360:t}function ve(t){return Math.max(0,Math.min(1,t||0))}function Je(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bn=t=>()=>t;function Vi(t,e){return function(n){return t+n*e}}function Xi(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Hi(t){return(t=+t)==1?zr:function(e,n){return n-e?Xi(e,n,t):bn(isNaN(e)?n:e)}}function zr(t,e){var n=e-t;return n?Vi(t,n):bn(isNaN(t)?e:t)}const Oe=function t(e){var n=Hi(e);function r(i,o){var s=n((i=an(i)).r,(o=an(o)).r),l=n(i.g,o.g),u=n(i.b,o.b),a=zr(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=u(f),i.opacity=a(f),i+""}}return r.gamma=t,r}(1);function Bi(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Yi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ui(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=xn(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function Wi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Rt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ki(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=xn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(ln.source,"g");function Qi(t){return function(){return t}}function Gi(t){return function(e){return t(e)+""}}function Ir(t,e){var n=ln.lastIndex=$e.lastIndex=0,r,i,o,s=-1,l=[],u=[];for(t=t+"",e=e+"";(r=ln.exec(t))&&(i=$e.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:Rt(r,i)})),n=$e.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?u[0]?Gi(u[0].x):Qi(e):(e=u.length,function(a){for(var f=0,d;f<e;++f)l[(d=u[f]).i]=d.x(a);return l.join("")})}function xn(t,e){var n=typeof e,r;return e==null||n==="boolean"?bn(e):(n==="number"?Rt:n==="string"?(r=$t(e))?(e=r,Oe):Ir:e instanceof $t?Oe:e instanceof Date?Wi:Yi(e)?Bi:Array.isArray(e)?Ui:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ki:Rt)(t,e)}function Zi(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Gn=180/Math.PI,un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Or(t,e,n,r,i,o){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Gn,skewX:Math.atan(u)*Gn,scaleX:s,scaleY:l}}var be;function ji(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?un:Or(e.a,e.b,e.c,e.d,e.e,e.f)}function Ji(t){return t==null||(be||(be=document.createElementNS("http://www.w3.org/2000/svg","g")),be.setAttribute("transform",t),!(t=be.transform.baseVal.consolidate()))?un:(t=t.matrix,Or(t.a,t.b,t.c,t.d,t.e,t.f))}function Lr(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,f,d,g,v,k){if(a!==d||f!==g){var z=v.push("translate(",null,e,null,n);k.push({i:z-4,x:Rt(a,d)},{i:z-2,x:Rt(f,g)})}else(d||g)&&v.push("translate("+d+e+g+n)}function s(a,f,d,g){a!==f?(a-f>180?f+=360:f-a>180&&(a+=360),g.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Rt(a,f)})):f&&d.push(i(d)+"rotate("+f+r)}function l(a,f,d,g){a!==f?g.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Rt(a,f)}):f&&d.push(i(d)+"skewX("+f+r)}function u(a,f,d,g,v,k){if(a!==d||f!==g){var z=v.push(i(v)+"scale(",null,",",null,")");k.push({i:z-4,x:Rt(a,d)},{i:z-2,x:Rt(f,g)})}else(d!==1||g!==1)&&v.push(i(v)+"scale("+d+","+g+")")}return function(a,f){var d=[],g=[];return a=t(a),f=t(f),o(a.translateX,a.translateY,f.translateX,f.translateY,d,g),s(a.rotate,f.rotate,d,g),l(a.skewX,f.skewX,d,g),u(a.scaleX,a.scaleY,f.scaleX,f.scaleY,d,g),a=f=null,function(v){for(var k=-1,z=g.length,E;++k<z;)d[(E=g[k]).i]=E.x(v);return d.join("")}}}var $i=Lr(ji,"px, ","px)","deg)"),to=Lr(Ji,", ",")",")"),eo=1e-12;function Zn(t){return((t=Math.exp(t))+1/t)/2}function no(t){return((t=Math.exp(t))-1/t)/2}function ro(t){return((t=Math.exp(2*t))-1)/(t+1)}const io=function t(e,n,r){function i(o,s){var l=o[0],u=o[1],a=o[2],f=s[0],d=s[1],g=s[2],v=f-l,k=d-u,z=v*v+k*k,E,A;if(z<eo)A=Math.log(g/a)/e,E=function(X){return[l+X*v,u+X*k,a*Math.exp(e*X*A)]};else{var it=Math.sqrt(z),H=(g*g-a*a+r*z)/(2*a*n*it),Y=(g*g-a*a-r*z)/(2*g*n*it),et=Math.log(Math.sqrt(H*H+1)-H),Q=Math.log(Math.sqrt(Y*Y+1)-Y);A=(Q-et)/e,E=function(X){var c=X*A,h=Zn(et),y=a/(n*it)*(h*ro(e*c+et)-no(et));return[l+y*v,u+y*k,a*h/Zn(e*c+et)]}}return E.duration=A*1e3*e/Math.SQRT2,E}return i.rho=function(o){var s=Math.max(.001,+o),l=s*s,u=l*l;return t(s,l,u)},i}(Math.SQRT2,2,4);function oo(t){return function(){return t}}function so(t){return+t}var jn=[0,1];function ee(t){return t}function fn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:oo(isNaN(e)?NaN:.5)}function ao(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function lo(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=fn(i,r),o=n(s,o)):(r=fn(r,i),o=n(o,s)),function(l){return o(r(l))}}function uo(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=fn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var u=xi(t,l,1,r)-1;return o[u](i[u](l))}}function fo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function co(){var t=jn,e=jn,n=xn,r,i,o,s=ee,l,u,a;function f(){var g=Math.min(t.length,e.length);return s!==ee&&(s=ao(t[0],t[g-1])),l=g>2?uo:lo,u=a=null,d}function d(g){return g==null||isNaN(g=+g)?o:(u||(u=l(t.map(r),e,n)))(r(s(g)))}return d.invert=function(g){return s(i((a||(a=l(e,t.map(r),Rt)))(g)))},d.domain=function(g){return arguments.length?(t=Array.from(g,so),f()):t.slice()},d.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},d.rangeRound=function(g){return e=Array.from(g),n=Zi,f()},d.clamp=function(g){return arguments.length?(s=g?!0:ee,f()):s!==ee},d.interpolate=function(g){return arguments.length?(n=g,f()):n},d.unknown=function(g){return arguments.length?(o=g,d):o},function(g,v){return r=g,i=v,f()}}function ho(){return co()(ee,ee)}function po(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Le(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function re(t){return t=Le(Math.abs(t)),t?t[1]:NaN}function mo(t,e){return function(n,r){for(var i=n.length,o=[],s=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function go(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pe(t){if(!(e=_o.exec(t)))throw new Error("invalid format: "+t);var e;return new kn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Pe.prototype=kn.prototype;function kn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}kn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Pr;function wo(t,e){var n=Le(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Pr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Le(t,Math.max(0,e+o-1))[0]}function Jn(t,e){var n=Le(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $n={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:po,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Jn(t*100,e),r:Jn,s:wo,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tr(t){return t}var er=Array.prototype.map,nr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function vo(t){var e=t.grouping===void 0||t.thousands===void 0?tr:mo(er.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?tr:go(er.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function a(d){d=Pe(d);var g=d.fill,v=d.align,k=d.sign,z=d.symbol,E=d.zero,A=d.width,it=d.comma,H=d.precision,Y=d.trim,et=d.type;et==="n"?(it=!0,et="g"):$n[et]||(H===void 0&&(H=12),Y=!0,et="g"),(E||g==="0"&&v==="=")&&(E=!0,g="0",v="=");var Q=z==="$"?n:z==="#"&&/[boxX]/.test(et)?"0"+et.toLowerCase():"",X=z==="$"?r:/[%p]/.test(et)?s:"",c=$n[et],h=/[defgprs%]/.test(et);H=H===void 0?6:/[gprs]/.test(et)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function y(M){var _=Q,P=X,p,S,m;if(et==="c")P=c(M)+P,M="";else{M=+M;var x=M<0||1/M<0;if(M=isNaN(M)?u:c(Math.abs(M),H),Y&&(M=yo(M)),x&&+M==0&&k!=="+"&&(x=!1),_=(x?k==="("?k:l:k==="-"||k==="("?"":k)+_,P=(et==="s"?nr[8+Pr/3]:"")+P+(x&&k==="("?")":""),h){for(p=-1,S=M.length;++p<S;)if(m=M.charCodeAt(p),48>m||m>57){P=(m===46?i+M.slice(p+1):M.slice(p))+P,M=M.slice(0,p);break}}}it&&!E&&(M=e(M,1/0));var C=_.length+M.length+P.length,b=C<A?new Array(A-C+1).join(g):"";switch(it&&E&&(M=e(b+M,b.length?A-P.length:1/0),b=""),v){case"<":M=_+M+P+b;break;case"=":M=_+b+M+P;break;case"^":M=b.slice(0,C=b.length>>1)+_+M+P+b.slice(C);break;default:M=b+_+M+P;break}return o(M)}return y.toString=function(){return d+""},y}function f(d,g){var v=a((d=Pe(d),d.type="f",d)),k=Math.max(-8,Math.min(8,Math.floor(re(g)/3)))*3,z=Math.pow(10,-k),E=nr[8+k/3];return function(A){return v(z*A)+E}}return{format:a,formatPrefix:f}}var xe,Fr,qr;bo({thousands:",",grouping:[3],currency:["$",""]});function bo(t){return xe=vo(t),Fr=xe.format,qr=xe.formatPrefix,xe}function xo(t){return Math.max(0,-re(Math.abs(t)))}function ko(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(re(e)/3)))*3-re(Math.abs(t)))}function Mo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,re(e)-re(t))+1}function So(t,e,n,r){var i=Ci(t,e,n),o;switch(r=Pe(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=ko(i,s))&&(r.precision=o),qr(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Mo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=xo(i))&&(r.precision=o-(r.type==="%")*2);break}}return Fr(r)}function Eo(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ei(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return So(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],l=r[o],u,a,f=10;for(l<s&&(a=s,s=l,l=a,a=i,i=o,o=a);f-- >0;){if(a=Ar(s,l,n),a===u)return r[i]=s,r[o]=l,e(r);if(a>0)s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a;else if(a<0)s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a;else break;u=a}return t},t}function cn(){var t=ho();return t.copy=function(){return fo(t,cn())},Dr.apply(t,arguments),Eo(t)}function Co(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Ao=Co("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Do(t){let e;return{c(){e=B("p"),e.textContent="Hover over a circle to see details here.",N(e,"class","svelte-b094ih")},m(n,r){_t(n,e,r)},p:It,d(n){n&&gt(e)}}}function To(t){let e,n=t[0].title+"",r,i,o,s=t[0][t[1]]+"",l,u,a,f=t[0].date.toISOString().split("T")[0]+"",d,g,v,k=t[0].text+"",z;return{c(){e=B("h1"),r=zt(n),i=lt(),o=B("span"),l=zt(s),u=lt(),a=B("h2"),d=zt(f),g=lt(),v=B("p"),z=zt(k),N(e,"class","svelte-b094ih"),Ct(o,"background",t[2](t[0][t[1]])),N(o,"class","svelte-b094ih"),N(a,"class","svelte-b094ih"),N(v,"class","svelte-b094ih")},m(E,A){_t(E,e,A),q(e,r),_t(E,i,A),_t(E,o,A),q(o,l),_t(E,u,A),_t(E,a,A),q(a,d),_t(E,g,A),_t(E,v,A),q(v,z)},p(E,A){A&1&&n!==(n=E[0].title+"")&&Wt(r,n),A&3&&s!==(s=E[0][E[1]]+"")&&Wt(l,s),A&7&&Ct(o,"background",E[2](E[0][E[1]])),A&1&&f!==(f=E[0].date.toISOString().split("T")[0]+"")&&Wt(d,f),A&1&&k!==(k=E[0].text+"")&&Wt(z,k)},d(E){E&&gt(e),E&&gt(i),E&&gt(o),E&&gt(u),E&&gt(a),E&&gt(g),E&&gt(v)}}}function Ro(t){let e;function n(o,s){return o[0]?To:Do}let r=n(t),i=r(t);return{c(){e=B("div"),i.c(),N(e,"class","detail-card svelte-b094ih"),Ct(e,"left",t[3]+"px"),Ct(e,"top",t[4]+"px")},m(o,s){_t(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null))),s&8&&Ct(e,"left",o[3]+"px"),s&16&&Ct(e,"top",o[4]+"px")},i:It,o:It,d(o){o&&gt(e),i.d()}}}function No(t,e,n){let{hoveredData:r}=e,{domainColumn:i}=e,{data:o}=e,{colorScale:s}=e,{posX:l=0}=e,{posY:u=0}=e;return yn(()=>{s.domain(o.map(a=>a[i]))}),t.$$set=a=>{"hoveredData"in a&&n(0,r=a.hoveredData),"domainColumn"in a&&n(1,i=a.domainColumn),"data"in a&&n(5,o=a.data),"colorScale"in a&&n(2,s=a.colorScale),"posX"in a&&n(3,l=a.posX),"posY"in a&&n(4,u=a.posY)},[r,i,s,l,u,o]}class zo extends Ke{constructor(e){super(),We(this,e,No,Ro,Be,{hoveredData:0,domainColumn:1,data:5,colorScale:2,posX:3,posY:4})}}var Io={value:()=>{}};function Mn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ae(n)}function Ae(t){this._=t}function Oo(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ae.prototype=Mn.prototype={constructor:Ae,on:function(t,e){var n=this._,r=Oo(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Lo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=rr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=rr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ae(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Lo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function rr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Io,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hn="http://www.w3.org/1999/xhtml";const ir={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ir.hasOwnProperty(e)?{space:ir[e],local:t}:t}function Po(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hn&&e.documentElement.namespaceURI===hn?e.createElement(t):e.createElementNS(n,t)}}function Fo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vr(t){var e=Qe(t);return(e.local?Fo:Po)(e)}function qo(){}function Sn(t){return t==null?qo:function(){return this.querySelector(t)}}function Vo(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=new Array(s),u,a,f=0;f<s;++f)(u=o[f])&&(a=t.call(u,u.__data__,f,o))&&("__data__"in u&&(a.__data__=u.__data__),l[f]=a);return new Dt(r,this._parents)}function Xo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ho(){return[]}function Xr(t){return t==null?Ho:function(){return this.querySelectorAll(t)}}function Bo(t){return function(){return Xo(t.apply(this,arguments))}}function Yo(t){typeof t=="function"?t=Bo(t):t=Xr(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(r.push(t.call(u,u.__data__,a,s)),i.push(u));return new Dt(r,i)}function Hr(t){return function(){return this.matches(t)}}function Br(t){return function(e){return e.matches(t)}}var Uo=Array.prototype.find;function Wo(t){return function(){return Uo.call(this.children,t)}}function Ko(){return this.firstElementChild}function Qo(t){return this.select(t==null?Ko:Wo(typeof t=="function"?t:Br(t)))}var Go=Array.prototype.filter;function Zo(){return Array.from(this.children)}function jo(t){return function(){return Go.call(this.children,t)}}function Jo(t){return this.selectAll(t==null?Zo:jo(typeof t=="function"?t:Br(t)))}function $o(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new Dt(r,this._parents)}function Yr(t){return new Array(t.length)}function ts(){return new Dt(this._enter||this._groups.map(Yr),this._parents)}function Fe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Fe.prototype={constructor:Fe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function es(t){return function(){return t}}function ns(t,e,n,r,i,o){for(var s=0,l,u=e.length,a=o.length;s<a;++s)(l=e[s])?(l.__data__=o[s],r[s]=l):n[s]=new Fe(t,o[s]);for(;s<u;++s)(l=e[s])&&(i[s]=l)}function rs(t,e,n,r,i,o,s){var l,u,a=new Map,f=e.length,d=o.length,g=new Array(f),v;for(l=0;l<f;++l)(u=e[l])&&(g[l]=v=s.call(u,u.__data__,l,e)+"",a.has(v)?i[l]=u:a.set(v,u));for(l=0;l<d;++l)v=s.call(t,o[l],l,o)+"",(u=a.get(v))?(r[l]=u,u.__data__=o[l],a.delete(v)):n[l]=new Fe(t,o[l]);for(l=0;l<f;++l)(u=e[l])&&a.get(g[l])===u&&(i[l]=u)}function is(t){return t.__data__}function os(t,e){if(!arguments.length)return Array.from(this,is);var n=e?rs:ns,r=this._parents,i=this._groups;typeof t!="function"&&(t=es(t));for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),a=0;a<o;++a){var f=r[a],d=i[a],g=d.length,v=ss(t.call(f,f&&f.__data__,a,r)),k=v.length,z=l[a]=new Array(k),E=s[a]=new Array(k),A=u[a]=new Array(g);n(f,d,z,E,A,v,e);for(var it=0,H=0,Y,et;it<k;++it)if(Y=z[it]){for(it>=H&&(H=it+1);!(et=E[H])&&++H<k;);Y._next=et||null}}return s=new Dt(s,r),s._enter=l,s._exit=u,s}function ss(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function as(){return new Dt(this._exit||this._groups.map(Yr),this._parents)}function ls(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function us(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),l=new Array(i),u=0;u<s;++u)for(var a=n[u],f=r[u],d=a.length,g=l[u]=new Array(d),v,k=0;k<d;++k)(v=a[k]||f[k])&&(g[k]=v);for(;u<i;++u)l[u]=n[u];return new Dt(l,this._parents)}function fs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function cs(t){t||(t=hs);function e(d,g){return d&&g?t(d.__data__,g.__data__):!d-!g}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],l=s.length,u=i[o]=new Array(l),a,f=0;f<l;++f)(a=s[f])&&(u[f]=a);u.sort(e)}return new Dt(i,this._parents).order()}function hs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ds(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ps(){return Array.from(this)}function ms(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function gs(){let t=0;for(const e of this)++t;return t}function _s(){return!this.node()}function ys(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,l;o<s;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function ws(t){return function(){this.removeAttribute(t)}}function vs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bs(t,e){return function(){this.setAttribute(t,e)}}function xs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ks(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ms(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ss(t,e){var n=Qe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?vs:ws:typeof e=="function"?n.local?Ms:ks:n.local?xs:bs)(n,e))}function Ur(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Es(t){return function(){this.style.removeProperty(t)}}function Cs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function As(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ds(t,e,n){return arguments.length>1?this.each((e==null?Es:typeof e=="function"?As:Cs)(t,e,n==null?"":n)):ie(this.node(),t)}function ie(t,e){return t.style.getPropertyValue(e)||Ur(t).getComputedStyle(t,null).getPropertyValue(e)}function Ts(t){return function(){delete this[t]}}function Rs(t,e){return function(){this[t]=e}}function Ns(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function zs(t,e){return arguments.length>1?this.each((e==null?Ts:typeof e=="function"?Ns:Rs)(t,e)):this.node()[t]}function Wr(t){return t.trim().split(/^|\s+/)}function En(t){return t.classList||new Kr(t)}function Kr(t){this._node=t,this._names=Wr(t.getAttribute("class")||"")}Kr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qr(t,e){for(var n=En(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gr(t,e){for(var n=En(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Is(t){return function(){Qr(this,t)}}function Os(t){return function(){Gr(this,t)}}function Ls(t,e){return function(){(e.apply(this,arguments)?Qr:Gr)(this,t)}}function Ps(t,e){var n=Wr(t+"");if(arguments.length<2){for(var r=En(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ls:e?Is:Os)(n,e))}function Fs(){this.textContent=""}function qs(t){return function(){this.textContent=t}}function Vs(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Xs(t){return arguments.length?this.each(t==null?Fs:(typeof t=="function"?Vs:qs)(t)):this.node().textContent}function Hs(){this.innerHTML=""}function Bs(t){return function(){this.innerHTML=t}}function Ys(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Us(t){return arguments.length?this.each(t==null?Hs:(typeof t=="function"?Ys:Bs)(t)):this.node().innerHTML}function Ws(){this.nextSibling&&this.parentNode.appendChild(this)}function Ks(){return this.each(Ws)}function Qs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gs(){return this.each(Qs)}function Zs(t){var e=typeof t=="function"?t:Vr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function js(){return null}function Js(t,e){var n=typeof t=="function"?t:Vr(t),r=e==null?js:typeof e=="function"?e:Sn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $s(){var t=this.parentNode;t&&t.removeChild(this)}function ta(){return this.each($s)}function ea(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function na(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ra(t){return this.select(t?na:ea)}function ia(t){return arguments.length?this.property("__data__",t):this.node().__data__}function oa(t){return function(e){t.call(this,e,this.__data__)}}function sa(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function aa(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function la(t,e,n){return function(){var r=this.__on,i,o=oa(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ua(t,e,n){var r=sa(t+""),i,o=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,f;u<a;++u)for(i=0,f=l[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?la:aa,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function Zr(t,e,n){var r=Ur(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function fa(t,e){return function(){return Zr(this,t,e)}}function ca(t,e){return function(){return Zr(this,t,e.apply(this,arguments))}}function ha(t,e){return this.each((typeof e=="function"?ca:fa)(t,e))}function*da(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var jr=[null];function Dt(t,e){this._groups=t,this._parents=e}function _e(){return new Dt([[document.documentElement]],jr)}function pa(){return this}Dt.prototype=_e.prototype={constructor:Dt,select:Vo,selectAll:Yo,selectChild:Qo,selectChildren:Jo,filter:$o,data:os,enter:ts,exit:as,join:ls,merge:us,selection:pa,order:fs,sort:cs,call:ds,nodes:ps,node:ms,size:gs,empty:_s,each:ys,attr:Ss,style:Ds,property:zs,classed:Ps,text:Xs,html:Us,raise:Ks,lower:Gs,append:Zs,insert:Js,remove:ta,clone:ra,datum:ia,on:ua,dispatch:ha,[Symbol.iterator]:da};function Ut(t){return typeof t=="string"?new Dt([[document.querySelector(t)]],[document.documentElement]):new Dt([[t]],jr)}function ma(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qt(t,e){if(t=ma(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const dn={capture:!0,passive:!1};function pn(t){t.preventDefault(),t.stopImmediatePropagation()}function ga(t){var e=t.document.documentElement,n=Ut(t).on("dragstart.drag",pn,dn);"onselectstart"in e?n.on("selectstart.drag",pn,dn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function _a(t,e){var n=t.document.documentElement,r=Ut(t).on("dragstart.drag",null);e&&(r.on("click.drag",pn,dn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var oe=0,ue=0,se=0,Jr=1e3,qe,fe,Ve=0,te=0,Ge=0,me=typeof performance=="object"&&performance.now?performance:Date,$r=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Cn(){return te||($r(ya),te=me.now()+Ge)}function ya(){te=0}function Xe(){this._call=this._time=this._next=null}Xe.prototype=ti.prototype={constructor:Xe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Cn():+n)+(e==null?0:+e),!this._next&&fe!==this&&(fe?fe._next=this:qe=this,fe=this),this._call=t,this._time=n,mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,mn())}};function ti(t,e,n){var r=new Xe;return r.restart(t,e,n),r}function wa(){Cn(),++oe;for(var t=qe,e;t;)(e=te-t._time)>=0&&t._call.call(void 0,e),t=t._next;--oe}function or(){te=(Ve=me.now())+Ge,oe=ue=0;try{wa()}finally{oe=0,ba(),te=0}}function va(){var t=me.now(),e=t-Ve;e>Jr&&(Ge-=e,Ve=t)}function ba(){for(var t,e=qe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);fe=t,mn(r)}function mn(t){if(!oe){ue&&(ue=clearTimeout(ue));var e=t-te;e>24?(t<1/0&&(ue=setTimeout(or,t-me.now()-Ge)),se&&(se=clearInterval(se))):(se||(Ve=me.now(),se=setInterval(va,Jr)),oe=1,$r(or))}}function sr(t,e,n){var r=new Xe;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var xa=Mn("start","end","cancel","interrupt"),ka=[],ei=0,ar=1,gn=2,De=3,lr=4,_n=5,Te=6;function Ze(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ma(t,n,{name:e,index:r,group:i,on:xa,tween:ka,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ei})}function An(t,e){var n=Ot(t,e);if(n.state>ei)throw new Error("too late; already scheduled");return n}function Pt(t,e){var n=Ot(t,e);if(n.state>De)throw new Error("too late; already running");return n}function Ot(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ma(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ti(o,0,n.time);function o(a){n.state=ar,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var f,d,g,v;if(n.state!==ar)return u();for(f in r)if(v=r[f],v.name===n.name){if(v.state===De)return sr(s);v.state===lr?(v.state=Te,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[f]):+f<e&&(v.state=Te,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[f])}if(sr(function(){n.state===De&&(n.state=lr,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=gn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===gn){for(n.state=De,i=new Array(g=n.tween.length),f=0,d=-1;f<g;++f)(v=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function l(a){for(var f=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=_n,1),d=-1,g=i.length;++d<g;)i[d].call(t,f);n.state===_n&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Te,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function Re(t,e){var n=t.__transition,r,i,o=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>gn&&r.state<_n,r.state=Te,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Sa(t){return this.each(function(){Re(this,t)})}function Ea(t,e){var n,r;return function(){var i=Pt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ca(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Pt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var l={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}o.tween=i}}function Aa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ot(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Ea:Ca)(n,t,e))}function Dn(t,e,n){var r=t._id;return t.each(function(){var i=Pt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ot(i,r).value[e]}}function ni(t,e){var n;return(typeof e=="number"?Rt:e instanceof $t?Oe:(n=$t(e))?(e=n,Oe):Ir)(t,e)}function Da(t){return function(){this.removeAttribute(t)}}function Ta(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ra(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Na(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function za(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function Ia(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function Oa(t,e){var n=Qe(t),r=n==="transform"?to:ni;return this.attrTween(t,typeof e=="function"?(n.local?Ia:za)(n,r,Dn(this,"attr."+t,e)):e==null?(n.local?Ta:Da)(n):(n.local?Na:Ra)(n,r,e))}function La(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Pa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Fa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Pa(t,o)),n}return i._value=e,i}function qa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&La(t,o)),n}return i._value=e,i}function Va(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Qe(t);return this.tween(n,(r.local?Fa:qa)(r,e))}function Xa(t,e){return function(){An(this,t).delay=+e.apply(this,arguments)}}function Ha(t,e){return e=+e,function(){An(this,t).delay=e}}function Ba(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xa:Ha)(e,t)):Ot(this.node(),e).delay}function Ya(t,e){return function(){Pt(this,t).duration=+e.apply(this,arguments)}}function Ua(t,e){return e=+e,function(){Pt(this,t).duration=e}}function Wa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ya:Ua)(e,t)):Ot(this.node(),e).duration}function Ka(t,e){if(typeof e!="function")throw new Error;return function(){Pt(this,t).ease=e}}function Qa(t){var e=this._id;return arguments.length?this.each(Ka(e,t)):Ot(this.node(),e).ease}function Ga(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Pt(this,t).ease=n}}function Za(t){if(typeof t!="function")throw new Error;return this.each(Ga(this._id,t))}function ja(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new Ht(r,this._parents,this._name,this._id)}function Ja(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var u=e[l],a=n[l],f=u.length,d=s[l]=new Array(f),g,v=0;v<f;++v)(g=u[v]||a[v])&&(d[v]=g);for(;l<r;++l)s[l]=e[l];return new Ht(s,this._parents,this._name,this._id)}function $a(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function tl(t,e,n){var r,i,o=$a(e)?An:Pt;return function(){var s=o(this,t),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}}function el(t,e){var n=this._id;return arguments.length<2?Ot(this.node(),n).on.on(t):this.each(tl(n,t,e))}function nl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rl(){return this.on("end.remove",nl(this._id))}function il(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l=r[s],u=l.length,a=o[s]=new Array(u),f,d,g=0;g<u;++g)(f=l[g])&&(d=t.call(f,f.__data__,g,l))&&("__data__"in f&&(d.__data__=f.__data__),a[g]=d,Ze(a[g],e,n,g,a,Ot(f,n)));return new Ht(o,this._parents,e,n)}function ol(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xr(t));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var u=r[l],a=u.length,f,d=0;d<a;++d)if(f=u[d]){for(var g=t.call(f,f.__data__,d,u),v,k=Ot(f,n),z=0,E=g.length;z<E;++z)(v=g[z])&&Ze(v,e,n,z,g,k);o.push(g),s.push(f)}return new Ht(o,s,e,n)}var sl=_e.prototype.constructor;function al(){return new sl(this._groups,this._parents)}function ll(t,e){var n,r,i;return function(){var o=ie(this,t),s=(this.style.removeProperty(t),ie(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function ri(t){return function(){this.style.removeProperty(t)}}function ul(t,e,n){var r,i=n+"",o;return function(){var s=ie(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function fl(t,e,n){var r,i,o;return function(){var s=ie(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),ie(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l))}}function cl(t,e){var n,r,i,o="style."+e,s="end."+o,l;return function(){var u=Pt(this,t),a=u.on,f=u.value[o]==null?l||(l=ri(e)):void 0;(a!==n||i!==f)&&(r=(n=a).copy()).on(s,i=f),u.on=r}}function hl(t,e,n){var r=(t+="")=="transform"?$i:ni;return e==null?this.styleTween(t,ll(t,r)).on("end.style."+t,ri(t)):typeof e=="function"?this.styleTween(t,fl(t,r,Dn(this,"style."+t,e))).each(cl(this._id,t)):this.styleTween(t,ul(t,r,e),n).on("end.style."+t,null)}function dl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function pl(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&dl(t,s,n)),r}return o._value=e,o}function ml(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,pl(t,e,n==null?"":n))}function gl(t){return function(){this.textContent=t}}function _l(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function yl(t){return this.tween("text",typeof t=="function"?_l(Dn(this,"text",t)):gl(t==null?"":t+""))}function wl(t){return function(e){this.textContent=t.call(this,e)}}function vl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&wl(i)),e}return r._value=t,r}function bl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,vl(t))}function xl(){for(var t=this._name,e=this._id,n=ii(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var f=Ot(u,e);Ze(u,t,n,a,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ht(r,this._parents,t,n)}function kl(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var l={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var a=Pt(this,r),f=a.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&o()})}var Ml=0;function Ht(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ii(){return++Ml}var Ft=_e.prototype;Ht.prototype={constructor:Ht,select:il,selectAll:ol,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:ja,merge:Ja,selection:al,transition:xl,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:el,attr:Oa,attrTween:Va,style:hl,styleTween:ml,text:yl,textTween:bl,remove:rl,tween:Aa,delay:Ba,duration:Wa,ease:Qa,easeVarying:Za,end:kl,[Symbol.iterator]:Ft[Symbol.iterator]};function Sl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var El={time:null,delay:0,duration:250,ease:Sl};function Cl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Al(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=ii(),(n=El).time=Cn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&Ze(u,t,e,a,s,n||Cl(u,e));return new Ht(r,this._parents,t,e)}_e.prototype.interrupt=Sa;_e.prototype.transition=Al;const ke=t=>()=>t;function Dl(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function qt(t,e,n){this.k=t,this.x=e,this.y=n}qt.prototype={constructor:qt,scale:function(t){return t===1?this:new qt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var He=new qt(1,0,0);qt.prototype;function tn(t){t.stopImmediatePropagation()}function ae(t){t.preventDefault(),t.stopImmediatePropagation()}function Tl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Rl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ur(){return this.__zoom||He}function Nl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function zl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Il(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Ol(){var t=Tl,e=Rl,n=Il,r=Nl,i=zl,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=io,a=Mn("start","zoom","end"),f,d,g,v=500,k=150,z=0,E=10;function A(p){p.property("__zoom",ur).on("wheel.zoom",c,{passive:!1}).on("mousedown.zoom",h).on("dblclick.zoom",y).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(p,S,m,x){var C=p.selection?p.selection():p;C.property("__zoom",ur),p!==C?et(p,S,m,x):C.interrupt().each(function(){Q(this,arguments).event(x).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},A.scaleBy=function(p,S,m,x){A.scaleTo(p,function(){var C=this.__zoom.k,b=typeof S=="function"?S.apply(this,arguments):S;return C*b},m,x)},A.scaleTo=function(p,S,m,x){A.transform(p,function(){var C=e.apply(this,arguments),b=this.__zoom,R=m==null?Y(C):typeof m=="function"?m.apply(this,arguments):m,T=b.invert(R),V=typeof S=="function"?S.apply(this,arguments):S;return n(H(it(b,V),R,T),C,s)},m,x)},A.translateBy=function(p,S,m,x){A.transform(p,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof m=="function"?m.apply(this,arguments):m),e.apply(this,arguments),s)},null,x)},A.translateTo=function(p,S,m,x,C){A.transform(p,function(){var b=e.apply(this,arguments),R=this.__zoom,T=x==null?Y(b):typeof x=="function"?x.apply(this,arguments):x;return n(He.translate(T[0],T[1]).scale(R.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof m=="function"?-m.apply(this,arguments):-m),b,s)},x,C)};function it(p,S){return S=Math.max(o[0],Math.min(o[1],S)),S===p.k?p:new qt(S,p.x,p.y)}function H(p,S,m){var x=S[0]-m[0]*p.k,C=S[1]-m[1]*p.k;return x===p.x&&C===p.y?p:new qt(p.k,x,C)}function Y(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function et(p,S,m,x){p.on("start.zoom",function(){Q(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){Q(this,arguments).event(x).end()}).tween("zoom",function(){var C=this,b=arguments,R=Q(C,b).event(x),T=e.apply(C,b),V=m==null?Y(T):typeof m=="function"?m.apply(C,b):m,O=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),U=C.__zoom,$=typeof S=="function"?S.apply(C,b):S,nt=u(U.invert(V).concat(O/U.k),$.invert(V).concat(O/$.k));return function(L){if(L===1)L=$;else{var D=nt(L),I=O/D[2];L=new qt(I,V[0]-D[0]*I,V[1]-D[1]*I)}R.zoom(null,L)}})}function Q(p,S,m){return!m&&p.__zooming||new X(p,S)}function X(p,S){this.that=p,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,S),this.taps=0}X.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,S){return this.mouse&&p!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var S=Ut(this.that).datum();a.call(p,this.that,new Dl(p,{sourceEvent:this.sourceEvent,target:A,type:p,transform:this.that.__zoom,dispatch:a}),S)}};function c(p,...S){if(!t.apply(this,arguments))return;var m=Q(this,S).event(p),x=this.__zoom,C=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,r.apply(this,arguments)))),b=Qt(p);if(m.wheel)(m.mouse[0][0]!==b[0]||m.mouse[0][1]!==b[1])&&(m.mouse[1]=x.invert(m.mouse[0]=b)),clearTimeout(m.wheel);else{if(x.k===C)return;m.mouse=[b,x.invert(b)],Re(this),m.start()}ae(p),m.wheel=setTimeout(R,k),m.zoom("mouse",n(H(it(x,C),m.mouse[0],m.mouse[1]),m.extent,s));function R(){m.wheel=null,m.end()}}function h(p,...S){if(g||!t.apply(this,arguments))return;var m=p.currentTarget,x=Q(this,S,!0).event(p),C=Ut(p.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",O,!0),b=Qt(p,m),R=p.clientX,T=p.clientY;ga(p.view),tn(p),x.mouse=[b,this.__zoom.invert(b)],Re(this),x.start();function V(U){if(ae(U),!x.moved){var $=U.clientX-R,nt=U.clientY-T;x.moved=$*$+nt*nt>z}x.event(U).zoom("mouse",n(H(x.that.__zoom,x.mouse[0]=Qt(U,m),x.mouse[1]),x.extent,s))}function O(U){C.on("mousemove.zoom mouseup.zoom",null),_a(U.view,x.moved),ae(U),x.event(U).end()}}function y(p,...S){if(!!t.apply(this,arguments)){var m=this.__zoom,x=Qt(p.changedTouches?p.changedTouches[0]:p,this),C=m.invert(x),b=m.k*(p.shiftKey?.5:2),R=n(H(it(m,b),x,C),e.apply(this,S),s);ae(p),l>0?Ut(this).transition().duration(l).call(et,R,x,p):Ut(this).call(A.transform,R,x,p)}}function M(p,...S){if(!!t.apply(this,arguments)){var m=p.touches,x=m.length,C=Q(this,S,p.changedTouches.length===x).event(p),b,R,T,V;for(tn(p),R=0;R<x;++R)T=m[R],V=Qt(T,this),V=[V,this.__zoom.invert(V),T.identifier],C.touch0?!C.touch1&&C.touch0[2]!==V[2]&&(C.touch1=V,C.taps=0):(C.touch0=V,b=!0,C.taps=1+!!f);f&&(f=clearTimeout(f)),b&&(C.taps<2&&(d=V[0],f=setTimeout(function(){f=null},v)),Re(this),C.start())}}function _(p,...S){if(!!this.__zooming){var m=Q(this,S).event(p),x=p.changedTouches,C=x.length,b,R,T,V;for(ae(p),b=0;b<C;++b)R=x[b],T=Qt(R,this),m.touch0&&m.touch0[2]===R.identifier?m.touch0[0]=T:m.touch1&&m.touch1[2]===R.identifier&&(m.touch1[0]=T);if(R=m.that.__zoom,m.touch1){var O=m.touch0[0],U=m.touch0[1],$=m.touch1[0],nt=m.touch1[1],L=(L=$[0]-O[0])*L+(L=$[1]-O[1])*L,D=(D=nt[0]-U[0])*D+(D=nt[1]-U[1])*D;R=it(R,Math.sqrt(L/D)),T=[(O[0]+$[0])/2,(O[1]+$[1])/2],V=[(U[0]+nt[0])/2,(U[1]+nt[1])/2]}else if(m.touch0)T=m.touch0[0],V=m.touch0[1];else return;m.zoom("touch",n(H(R,T,V),m.extent,s))}}function P(p,...S){if(!!this.__zooming){var m=Q(this,S).event(p),x=p.changedTouches,C=x.length,b,R;for(tn(p),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),b=0;b<C;++b)R=x[b],m.touch0&&m.touch0[2]===R.identifier?delete m.touch0:m.touch1&&m.touch1[2]===R.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(R=Qt(R,this),Math.hypot(d[0]-R[0],d[1]-R[1])<E)){var T=Ut(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return A.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:ke(+p),A):r},A.filter=function(p){return arguments.length?(t=typeof p=="function"?p:ke(!!p),A):t},A.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ke(!!p),A):i},A.extent=function(p){return arguments.length?(e=typeof p=="function"?p:ke([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),A):e},A.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],A):[o[0],o[1]]},A.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],A):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},A.constrain=function(p){return arguments.length?(n=p,A):n},A.duration=function(p){return arguments.length?(l=+p,A):l},A.interpolate=function(p){return arguments.length?(u=p,A):u},A.on=function(){var p=a.on.apply(a,arguments);return p===a?A:p},A.clickDistance=function(p){return arguments.length?(z=(p=+p)*p,A):Math.sqrt(z)},A.tapDistance=function(p){return arguments.length?(E=+p,A):E},A}function fr(t){let e,n;return e=new zo({props:{hoveredData:t[6],data:t[0],domainColumn:t[1],colorScale:t[9],posX:t[7],posY:t[8]}}),{c(){wn(e.$$.fragment)},m(r,i){Ye(e,r,i),n=!0},p(r,i){const o={};i[0]&64&&(o.hoveredData=r[6]),i[0]&1&&(o.data=r[0]),i[0]&2&&(o.domainColumn=r[1]),i[0]&512&&(o.colorScale=r[9]),i[0]&128&&(o.posX=r[7]),i[0]&256&&(o.posY=r[8]),e.$set(o)},i(r){n||(Xt(e.$$.fragment,r),n=!0)},o(r){jt(e.$$.fragment,r),n=!1},d(r){Ue(e,r)}}}function Ll(t){let e,n,r,i,o,s,l,u,a,f,d,g,v,k=t[6]&&fr(t);return{c(){e=B("div"),n=B("div"),r=B("button"),r.textContent="+",i=lt(),o=B("button"),o.textContent="\u2212",s=lt(),l=B("button"),l.textContent="\u27F2",u=lt(),a=B("canvas"),f=lt(),k&&k.c(),N(r,"class","zoom-btn svelte-1q7voxg"),N(r,"aria-label","Zoom in"),N(r,"title","Zoom in"),N(o,"class","zoom-btn svelte-1q7voxg"),N(o,"aria-label","Zoom out"),N(o,"title","Zoom out"),N(l,"class","zoom-btn svelte-1q7voxg"),N(l,"aria-label","Reset zoom"),N(l,"title","Reset zoom"),N(n,"class","zoom-controls svelte-1q7voxg"),N(n,"aria-label","Zoom controls"),N(a,"width",t[2]),N(a,"height",t[3]),N(a,"class","svelte-1q7voxg"),N(e,"class","chart-container svelte-1q7voxg")},m(z,E){_t(z,e,E),q(e,n),q(n,r),q(n,i),q(n,o),q(n,s),q(n,l),q(e,u),q(e,a),t[32](a),q(e,f),k&&k.m(e,null),t[33](e),d=!0,g||(v=[pt(r,"click",t[13]),pt(o,"click",t[14]),pt(l,"click",t[15]),pt(a,"mousemove",t[10]),pt(a,"mouseleave",t[12]),pt(a,"click",t[11])],g=!0)},p(z,E){(!d||E[0]&4)&&N(a,"width",z[2]),(!d||E[0]&8)&&N(a,"height",z[3]),z[6]?k?(k.p(z,E),E[0]&64&&Xt(k,1)):(k=fr(z),k.c(),Xt(k,1),k.m(e,null)):k&&(Mr(),jt(k,1,1,()=>{k=null}),Sr())},i(z){d||(Xt(k),d=!0)},o(z){jt(k),d=!1},d(z){z&&gt(e),t[32](null),k&&k.d(),t[33](null),g=!1,Bt(v)}}}const Me=6,Pl=.5,Fl=10,cr=280,hr=160;function ql(t,e,n){let r,i,o,s,l,u,a,f,d,g,v,k,z,{data:E=[]}=e,{domainColumn:A=""}=e,{opacity:it=1}=e,{selectedValues:H=new Set}=e,{searchQuery:Y=""}=e,{showAnnotations:et=!0}=e,{highlightedData:Q=[]}=e,{startDate:X=null}=e,{endDate:c=null}=e,h=[{x:60,y:140,radius:40,label:"Articles about motor vehicle crashes.",label_x:-50,label_y:130},{x:970,y:320,radius:70,label:"Sports Articles",label_x:-50,label_y:-100}],y,M,_,P=800,p=600;const S={top:20,right:20,bottom:20,left:20};let m=null,x=null,C=He,b,R,T=0,V=0,O,U=1;function $(){if(!y||!M)return;const w=M.getBoundingClientRect();w.width>0&&w.height>0&&(n(2,P=Math.floor(w.width)),n(3,p=Math.floor(w.height))),U=Math.max(window.devicePixelRatio||1,1),n(4,y.style.width="100%",y),n(4,y.style.height="100%",y),n(4,y.width=Math.max(1,Math.floor(P*U)),y),n(4,y.height=Math.max(1,Math.floor(p*U)),y),n(23,_=y.getContext("2d")),_.setTransform(U,0,0,U,0,0)}function nt(){if(!(!_||!E.length)){if(_.clearRect(0,0,P,p),_.save(),_.translate(C.x,C.y),_.scale(C.k,C.k),E.forEach(w=>{var st,yt;const F=Y&&(((st=w.text)==null?void 0:st.toLowerCase().includes(Y.toLowerCase()))||((yt=w.title)==null?void 0:yt.toLowerCase().includes(Y.toLowerCase()))),j=r.has(w.id)||F,G=H.has(w[A]),at=(!X||w.date>=X)&&(!c||w.date<=c);_.beginPath(),_.arc(S.left+a(w.x),S.top+g(w.y),Math.max(.5,Me/C.k),0,Math.PI*2),n(23,_.fillStyle=O(w[A]),_),(j||G)&&at&&!z||at&&!z&&H.size===0||(j||G)&&z?n(23,_.globalAlpha=1,_):n(23,_.globalAlpha=it*.2,_),_.fill(),n(23,_.globalAlpha=1,_)}),et&&h.forEach(w=>{n(23,_.globalAlpha=1,_),_.beginPath(),_.arc(w.x,w.y,w.radius,0,Math.PI*2),n(23,_.strokeStyle="red",_),n(23,_.lineWidth=2,_),_.setLineDash([5,5]),_.stroke();const F=180,j=12;n(23,_.font="16px Arial",_);const G=w.x+w.label_x,at=w.y+w.label_y;let st=0,yt=0,ut=[];if(w.label){const wt=w.label.split(" ");let Mt="";wt.forEach((J,vt)=>{const Tt=Mt+J+" ";_.measureText(Tt).width>F&&vt>0?(ut.push(Mt),st=Math.max(st,_.measureText(Mt).width),Mt=J+" "):Mt=Tt}),ut.push(Mt),st=Math.max(st,_.measureText(Mt).width),yt=j*ut.length}const rt=G,W=at-j,ft=st,xt=yt;let kt,St;w.x<rt?kt=rt:w.x>rt+ft?kt=rt+ft:kt=w.x,w.y<W?St=W:w.y>W+xt?St=W+xt:St=w.y;const bt=Math.atan2(St-w.y,kt-w.x),mt=w.x+w.radius*Math.cos(bt),Et=w.y+w.radius*Math.sin(bt);if(_.setLineDash([]),_.beginPath(),_.moveTo(mt,Et),_.lineTo(kt,St),n(23,_.strokeStyle="red",_),n(23,_.lineWidth=1,_),_.stroke(),w.label){n(23,_.font="16px Arial",_),n(23,_.fillStyle="red",_);const wt=16;ut.forEach((Mt,J)=>{_.fillText(Mt,G,at+J*wt)})}}),_.setLineDash([]),m){const w=S.left+a(m.x),F=S.top+g(m.y);_.beginPath(),_.arc(w,F,Math.max(.5,Me/C.k),0,Math.PI*2),n(23,_.fillStyle=O(m[A]),_),n(23,_.globalAlpha=1,_),_.fill(),n(23,_.strokeStyle="black",_),n(23,_.lineWidth=Math.max(1,2/C.k),_),_.stroke();const[j,G]=[C.applyX(w),C.applyY(F)];let at=j+12;at+cr>P-S.right&&(at=j-12-cr);let st=G-hr*.5;const yt=S.top+8,ut=p-S.bottom-(hr+8);st=Math.max(yt,Math.min(st,ut)),n(7,T=at),n(8,V=st)}_.restore()}}function L(w){const F=y.getBoundingClientRect(),j=P/F.width,G=p/F.height,at=(w.clientX-F.left)*j,st=(w.clientY-F.top)*G,[yt,ut]=C.invert([at,st]),rt=E.find(W=>{var Tt;const ft=S.left+a(W.x),xt=S.top+g(W.y),kt=ft-yt,St=xt-ut,bt=Math.sqrt(kt*kt+St*St)<(Me+3)/C.k,mt=Y&&((Tt=W.title)==null?void 0:Tt.toLowerCase().includes(Y.toLowerCase())),Et=r.has(W.id)||mt,wt=H.has(W[A]),Mt=(!X||W.date>=X)&&(!c||W.date<=c),vt=H.size===0||H.size===i||(Et||wt)&&Mt&&!z||Mt&&!z&&H.size===0||(Et||wt)&&z;return bt&&vt});rt?(n(6,m=rt),x=rt,n(4,y.style.cursor="pointer",y)):(n(6,m=null),x=null,n(4,y.style.cursor="crosshair",y)),nt()}function D(w){const F=y.getBoundingClientRect(),j=P/F.width,G=p/F.height,at=(w.clientX-F.left)*j,st=(w.clientY-F.top)*G,[yt,ut]=C.invert([at,st]),rt=E.find(ft=>{var Kt,Tn;const xt=S.left+a(ft.x),kt=S.top+g(ft.y),St=xt-yt,bt=kt-ut,mt=Math.sqrt(St*St+bt*bt)<(Me+3)/C.k,Et=Y&&(((Kt=ft.text)==null?void 0:Kt.toLowerCase().includes(Y.toLowerCase()))||((Tn=ft.title)==null?void 0:Tn.toLowerCase().includes(Y.toLowerCase()))),wt=r.has(ft.id)||Et,Mt=H.has(ft[A]),J=(!X||ft.date>=X)&&(!c||ft.date<=c),Tt=H.size===0||H.size===i||(wt||Mt)&&J&&!z||J&&!z&&H.size===0||(wt||Mt)&&z;return mt&&Tt});if(!rt)return;const W=rt.url||rt.link||rt.href||rt.permalink;W&&typeof window<"u"&&window.open(W,"_blank","noopener,noreferrer")}function I(){n(6,m=x),nt()}let K;yn(()=>(n(23,_=y.getContext("2d")),$(),window.ResizeObserver&&(K=new ResizeObserver(()=>{$(),nt()}),K.observe(M)),b=Ol().scaleExtent([Pl,Fl]).filter(w=>{const F=w;return F.type==="wheel"||F.type==="touchstart"||F.type==="touchmove"?!0:F.type==="mousedown"?F.button===0&&!F.ctrlKey&&!F.metaKey&&!F.shiftKey:!F.ctrlKey&&!F.metaKey&&!F.shiftKey}).on("zoom",w=>{C=w.transform,nt()}),R=Ut(y),R.call(b),nt(),()=>{K&&K.disconnect()}));function Z(w,F){var at;if((at=F==null?void 0:F.stopPropagation)==null||at.call(F),!R||!b)return;const j=P/2,G=p/2;R.transition().duration(200).call(b.scaleBy,w,[j,G])}function ct(w){Z(1.25,w)}function dt(w){Z(1/1.25,w)}function ht(w){var F;(F=w==null?void 0:w.stopPropagation)==null||F.call(w),!(!R||!b)&&R.transition().duration(200).call(b.transform,He)}function ot(w){Vt[w?"unshift":"push"](()=>{y=w,n(4,y)})}function tt(w){Vt[w?"unshift":"push"](()=>{M=w,n(5,M)})}return t.$$set=w=>{"data"in w&&n(0,E=w.data),"domainColumn"in w&&n(1,A=w.domainColumn),"opacity"in w&&n(16,it=w.opacity),"selectedValues"in w&&n(17,H=w.selectedValues),"searchQuery"in w&&n(18,Y=w.searchQuery),"showAnnotations"in w&&n(19,et=w.showAnnotations),"highlightedData"in w&&n(20,Q=w.highlightedData),"startDate"in w&&n(21,X=w.startDate),"endDate"in w&&n(22,c=w.endDate)},t.$$.update=()=>{t.$$.dirty[0]&1048576&&(r=new Set(Q.map(w=>w.id))),t.$$.dirty[0]&3&&(i=new Set(E.map(w=>w[A])).size),t.$$.dirty[0]&4&&n(29,o=P-S.left-S.right),t.$$.dirty[0]&8&&n(26,s=p-S.top-S.bottom),t.$$.dirty[0]&1&&n(31,l=[qn(E,w=>w.x),Fn(E,w=>w.x)]),t.$$.dirty[1]&1&&n(30,u=l[0]===l[1]?[l[0]-1,l[1]+1]:l),t.$$.dirty[0]&1610612736&&(a=cn().domain(u).range([0,o])),t.$$.dirty[0]&1&&n(28,f=[qn(E,w=>w.y),Fn(E,w=>w.y)]),t.$$.dirty[0]&268435456&&n(27,d=f[0]===f[1]?[f[0]-1,f[1]+1]:f),t.$$.dirty[0]&201326592&&(g=cn().domain(d).range([s,0])),t.$$.dirty[0]&3&&n(9,O=Tr(Ao).domain(A?[...new Set(E.map(w=>w[A]).filter(w=>w!=null&&w!==""))]:[])),t.$$.dirty[0]&1&&n(25,v=E.length?new Date(Math.min(...E.map(w=>w.date.getTime()))):null),t.$$.dirty[0]&1&&n(24,k=E.length?new Date(Math.max(...E.map(w=>w.date.getTime()))):null),t.$$.dirty[0]&56623104&&(z=!!(X&&c&&v&&k&&X.getTime()===v.getTime()&&c.getTime()===k.getTime())),t.$$.dirty[0]&15663107&&_&&E.length&&nt()},[E,A,P,p,y,M,m,T,V,O,L,D,I,ct,dt,ht,it,H,Y,et,Q,X,c,_,k,v,s,d,f,o,u,l,ot,tt]}class Vl extends Ke{constructor(e){super(),We(this,e,ql,Ll,Be,{data:0,domainColumn:1,opacity:16,selectedValues:17,searchQuery:18,showAnnotations:19,highlightedData:20,startDate:21,endDate:22},null,[-1,-1])}}function Xl(t){let e,n,r,i,o,s,l,u,a;return{c(){e=B("div"),n=B("div"),r=B("div"),i=lt(),o=B("div"),s=lt(),l=B("div"),N(r,"class","track-inner svelte-vytkle"),N(n,"class","track svelte-vytkle"),N(o,"class","thumb start-thumb svelte-vytkle"),Ct(o,"left",t[4]+"%"),N(l,"class","thumb end-thumb svelte-vytkle"),Ct(l,"left",t[3]+"%"),N(e,"class","range-slider svelte-vytkle"),Ct(e,"--start-percent",t[4]+"%"),Ct(e,"--end-percent",t[3]+"%")},m(f,d){_t(f,e,d),q(e,n),q(n,r),q(e,i),q(e,o),t[13](o),q(e,s),q(e,l),t[16](l),t[19](e),u||(a=[pt(r,"mousedown",t[11]),pt(r,"touchstart",t[12]),pt(o,"mousedown",t[14]),pt(o,"touchstart",t[15]),pt(l,"mousedown",t[17]),pt(l,"touchstart",t[18])],u=!0)},p(f,[d]){d&16&&Ct(o,"left",f[4]+"%"),d&8&&Ct(l,"left",f[3]+"%"),d&16&&Ct(e,"--start-percent",f[4]+"%"),d&8&&Ct(e,"--end-percent",f[3]+"%")},i:It,o:It,d(f){f&&gt(e),t[13](null),t[16](null),t[19](null),u=!1,Bt(a)}}}function Hl(t,e,n){let r,i,{min:o=0}=e,{max:s=100}=e,{startValue:l}=e,{endValue:u}=e;const a=fi();let f,d,g,v=!1,k=null,z=null,E=0;function A(m,x){v=!0,k=x,z=f.getBoundingClientRect(),x==="range"&&(E=u-l),window.addEventListener("mousemove",it),window.addEventListener("mouseup",H)}function it(m){if(!v)return;const x=Math.min(Math.max(0,(m.clientX-z.left)/z.width),1),C=Math.round(x*(s-o)+o);if(k==="start")n(7,l=Math.min(C,u)),a("startChange",l);else if(k==="end")n(8,u=Math.max(C,l)),a("endChange",u);else if(k==="range"){let b=C-Math.floor(E/2),R=C+Math.ceil(E/2);b<o&&(b=o,R=o+E),R>s&&(R=s,b=s-E),b=Math.max(o,b),R=Math.min(s,R),n(7,l=b),n(8,u=R),a("startChange",l),a("endChange",u)}}function H(){v=!1,window.removeEventListener("mousemove",it),window.removeEventListener("mouseup",H)}function Y(m,x){m.preventDefault(),v=!0,k=x,z=f.getBoundingClientRect(),x==="range"&&(E=u-l),window.addEventListener("touchmove",et,{passive:!1}),window.addEventListener("touchend",Q)}function et(m){if(m.preventDefault(),!v)return;const x=m.touches[0],C=Math.min(Math.max(0,(x.clientX-z.left)/z.width),1),b=Math.round(C*(s-o)+o);if(k==="start")n(7,l=Math.min(b,u)),a("startChange",l);else if(k==="end")n(8,u=Math.max(b,l)),a("endChange",u);else if(k==="range"){let R=b-Math.floor(E/2),T=b+Math.ceil(E/2);R<o&&(R=o,T=o+E),T>s&&(T=s,R=s-E),R=Math.max(o,R),T=Math.min(s,T),n(7,l=R),n(8,u=T),a("startChange",l),a("endChange",u)}}function Q(){v=!1,window.removeEventListener("touchmove",et),window.removeEventListener("touchend",Q)}const X=m=>A(m,"range"),c=m=>Y(m,"range");function h(m){Vt[m?"unshift":"push"](()=>{d=m,n(1,d)})}const y=m=>A(m,"start"),M=m=>Y(m,"start");function _(m){Vt[m?"unshift":"push"](()=>{g=m,n(2,g)})}const P=m=>A(m,"end"),p=m=>Y(m,"end");function S(m){Vt[m?"unshift":"push"](()=>{f=m,n(0,f)})}return t.$$set=m=>{"min"in m&&n(9,o=m.min),"max"in m&&n(10,s=m.max),"startValue"in m&&n(7,l=m.startValue),"endValue"in m&&n(8,u=m.endValue)},t.$$.update=()=>{t.$$.dirty&1664&&n(4,r=s>o?(l-o)/(s-o)*100:0),t.$$.dirty&1792&&n(3,i=s>o?(u-o)/(s-o)*100:100)},[f,d,g,i,r,A,Y,l,u,o,s,X,c,h,y,M,_,P,p,S]}class Bl extends Ke{constructor(e){super(),We(this,e,Hl,Xl,Be,{min:9,max:10,startValue:7,endValue:8})}}function dr(t,e,n){const r=t.slice();return r[43]=e[n],r}function pr(t,e,n){const r=t.slice();return r[46]=e[n],r}function mr(t){let e,n,r,i,o,s,l=t[9],u=[];for(let a=0;a<l.length;a+=1)u[a]=gr(pr(t,l,a));return{c(){e=B("label"),e.textContent="\u{1F3A8} Color by Column:",n=lt(),r=B("select"),i=B("option"),i.textContent="Select column";for(let a=0;a<u.length;a+=1)u[a].c();N(e,"for","domain-column"),N(e,"class","svelte-bkm9dt"),i.__value="",i.value=i.__value,i.disabled=!0,N(r,"id","domain-column"),N(r,"class","svelte-bkm9dt"),t[0]===void 0&&Ne(()=>t[24].call(r))},m(a,f){_t(a,e,f),_t(a,n,f),_t(a,r,f),q(r,i);for(let d=0;d<u.length;d+=1)u[d].m(r,null);zn(r,t[0]),o||(s=[pt(r,"change",t[15]),pt(r,"change",t[24])],o=!0)},p(a,f){if(f[0]&512){l=a[9];let d;for(d=0;d<l.length;d+=1){const g=pr(a,l,d);u[d]?u[d].p(g,f):(u[d]=gr(g),u[d].c(),u[d].m(r,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}f[0]&513&&zn(r,a[0])},d(a){a&&gt(e),a&&gt(n),a&&gt(r),br(u,a),o=!1,Bt(s)}}}function gr(t){let e,n=t[46]+"",r,i;return{c(){e=B("option"),r=zt(n),e.__value=i=t[46],e.value=e.__value},m(o,s){_t(o,e,s),q(e,r)},p(o,s){s[0]&512&&n!==(n=o[46]+"")&&Wt(r,n),s[0]&512&&i!==(i=o[46])&&(e.__value=i,e.value=e.__value)},d(o){o&&gt(e)}}}function _r(t){let e,n,r,i,o,s=t[1],l=[];for(let u=0;u<s.length;u+=1)l[u]=yr(dr(t,s,u));return{c(){e=B("label"),e.textContent="\u2728 Highlight Values:",n=lt(),r=B("select");for(let u=0;u<l.length;u+=1)l[u].c();N(e,"for","value-select"),N(e,"class","svelte-bkm9dt"),N(r,"id","value-select"),r.multiple=!0,N(r,"size","5"),N(r,"class","multi-select svelte-bkm9dt")},m(u,a){_t(u,e,a),_t(u,n,a),_t(u,r,a);for(let f=0;f<l.length;f+=1)l[f].m(r,null);i||(o=pt(r,"change",t[16]),i=!0)},p(u,a){if(a[0]&2){s=u[1];let f;for(f=0;f<s.length;f+=1){const d=dr(u,s,f);l[f]?l[f].p(d,a):(l[f]=yr(d),l[f].c(),l[f].m(r,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=s.length}},d(u){u&&gt(e),u&&gt(n),u&&gt(r),br(l,u),i=!1,o()}}}function yr(t){let e,n=t[43]+"",r,i;return{c(){e=B("option"),r=zt(n),e.__value=i=t[43],e.value=e.__value},m(o,s){_t(o,e,s),q(e,r)},p(o,s){s[0]&2&&n!==(n=o[43]+"")&&Wt(r,n),s[0]&2&&i!==(i=o[43])&&(e.__value=i,e.value=e.__value)},d(o){o&&gt(e)}}}function Yl(t){let e;return{c(){e=zt("\u25B6")},m(n,r){_t(n,e,r)},d(n){n&&gt(e)}}}function Ul(t){let e;return{c(){e=zt("\u275A\u275A")},m(n,r){_t(n,e,r)},d(n){n&&gt(e)}}}function Wl(t){let e;return{c(){e=B("p"),e.textContent="Waiting for data"},m(n,r){_t(n,e,r)},p:It,i:It,o:It,d(n){n&&gt(e)}}}function Kl(t){let e,n;return e=new Vl({props:{data:t[11],domainColumn:t[0],selectedValues:t[2],opacity:t[10],searchQuery:t[13],showAnnotations:t[14],highlightedData:t[8],startDate:t[3],endDate:t[4]}}),{c(){wn(e.$$.fragment)},m(r,i){Ye(e,r,i),n=!0},p(r,i){const o={};i[0]&2048&&(o.data=r[11]),i[0]&1&&(o.domainColumn=r[0]),i[0]&4&&(o.selectedValues=r[2]),i[0]&1024&&(o.opacity=r[10]),i[0]&8192&&(o.searchQuery=r[13]),i[0]&16384&&(o.showAnnotations=r[14]),i[0]&256&&(o.highlightedData=r[8]),i[0]&8&&(o.startDate=r[3]),i[0]&16&&(o.endDate=r[4]),e.$set(o)},i(r){n||(Xt(e.$$.fragment,r),n=!0)},o(r){jt(e.$$.fragment,r),n=!1},d(r){Ue(e,r)}}}function Ql(t){let e,n,r,i,o,s,l,u,a,f,d,g,v,k,z,E,A,it,H,Y,et,Q,X,c,h,y,M,_,P,p,S,m,x,C,b,R,T=Yt(t[3])+"",V,O,U,$=Yt(t[4])+"",nt,L,D,I,K,Z,ct,dt,ht,ot,tt,w,F,j,G,at,st,yt,ut,rt=t[9].length&&mr(t),W=t[1].length&&_r(t);function ft(J){t[28](J)}function xt(J){t[29](J)}let kt={min:0,max:t[5].length-1};t[6]!==void 0&&(kt.startValue=t[6]),t[7]!==void 0&&(kt.endValue=t[7]),S=new Bl({props:kt}),Vt.push(()=>On(S,"startValue",ft)),Vt.push(()=>On(S,"endValue",xt)),S.$on("startChange",t[30]),S.$on("endChange",t[31]);function St(J,vt){return J[12]?Ul:Yl}let bt=St(t),mt=bt(t);const Et=[Kl,Wl],wt=[];function Mt(J,vt){return J[11].length?0:1}return G=Mt(t),at=wt[G]=Et[G](t),{c(){e=B("div"),n=B("div"),n.innerHTML=`<h1 class="title svelte-bkm9dt">Semantic Map [DEMO]</h1> 
    <p class="subtitle">Each dot represents an article. When the dots are closer together, the articles are similar in meaning.</p>`,r=lt(),i=B("div"),o=B("div"),s=B("div"),s.innerHTML=`<details close=""><summary class="svelte-bkm9dt">\u2795 What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-bkm9dt"><p class="svelte-bkm9dt">Semantic maps are tools that allow users to visually explore how different topics and ideas are connected. 
              By analyzing the relationships between articles, these maps can reveal patterns and clusters in the data.</p> 
            <p class="svelte-bkm9dt">Newsrooms can use semantic maps to:</p> 
            <ul class="svelte-bkm9dt"><li class="svelte-bkm9dt">Audit their coverage by identifying themes that may be underrepresented or overlooked.</li> 
              <li class="svelte-bkm9dt">Track how their editorial focus evolves over time.</li> 
              <li class="svelte-bkm9dt">Discover which topics are being covered by other outlets, offering opportunities to adjust their editorial focus or collaborate.</li></ul></div></details>`,l=lt(),u=B("label"),u.textContent="\u{1F4C1} Upload CSV:",a=lt(),f=B("input"),d=lt(),g=B("label"),g.textContent="\u{1F50D} Search Text (supports regex):",v=lt(),k=B("input"),z=lt(),rt&&rt.c(),E=lt(),W&&W.c(),A=lt(),it=B("label"),it.textContent="\u{1F4A1} Adjust Opacity:",H=lt(),Y=B("input"),et=lt(),Q=B("div"),X=B("label"),X.textContent="\u{1F4C5} Date Range:",c=lt(),h=B("input"),M=lt(),_=B("input"),p=lt(),wn(S.$$.fragment),C=lt(),b=B("div"),R=B("span"),V=zt(T),O=lt(),U=B("span"),nt=zt($),L=lt(),D=B("div"),I=B("button"),I.textContent="-1W",K=lt(),Z=B("button"),Z.textContent="-1D",ct=lt(),dt=B("button"),mt.c(),ht=lt(),ot=B("button"),ot.textContent="+1D",tt=lt(),w=B("button"),w.textContent="+1W",F=lt(),j=B("div"),at.c(),N(n,"class","title-section svelte-bkm9dt"),N(s,"class","nerd-box svelte-bkm9dt"),N(u,"for","file-upload"),N(u,"class","svelte-bkm9dt"),N(f,"id","file-upload"),N(f,"type","file"),N(f,"accept",".csv"),N(f,"class","svelte-bkm9dt"),N(g,"for","search-input"),N(g,"class","svelte-bkm9dt"),N(k,"id","search-input"),N(k,"type","text"),N(k,"placeholder","Search or regex pattern..."),N(k,"class","svelte-bkm9dt"),N(it,"for","opacity-slider"),N(it,"class","svelte-bkm9dt"),N(Y,"id","opacity-slider"),N(Y,"type","range"),N(Y,"min","0.01"),N(Y,"max","1"),N(Y,"step","0.1"),N(Y,"class","svelte-bkm9dt"),N(X,"for","start-date"),N(X,"class","svelte-bkm9dt"),N(h,"id","start-date"),N(h,"type","date"),h.value=y=Yt(t[3]),N(h,"class","svelte-bkm9dt"),N(_,"id","end-date"),N(_,"type","date"),_.value=P=Yt(t[4]),N(_,"class","svelte-bkm9dt"),N(b,"class","date-range-labels svelte-bkm9dt"),N(I,"class","svelte-bkm9dt"),N(Z,"class","svelte-bkm9dt"),N(dt,"class","play-button svelte-bkm9dt"),N(ot,"class","svelte-bkm9dt"),N(w,"class","svelte-bkm9dt"),N(D,"class","date-navigation svelte-bkm9dt"),N(Q,"class","date-controls svelte-bkm9dt"),N(o,"class","filter-panel svelte-bkm9dt"),N(j,"class","scatterplot-container svelte-bkm9dt"),N(i,"class","content svelte-bkm9dt"),N(e,"class","container svelte-bkm9dt")},m(J,vt){_t(J,e,vt),q(e,n),q(e,r),q(e,i),q(i,o),q(o,s),q(o,l),q(o,u),q(o,a),q(o,f),q(o,d),q(o,g),q(o,v),q(o,k),q(o,z),rt&&rt.m(o,null),q(o,E),W&&W.m(o,null),q(o,A),q(o,it),q(o,H),q(o,Y),Nn(Y,t[10]),q(o,et),q(o,Q),q(Q,X),q(Q,c),q(Q,h),q(Q,M),q(Q,_),q(Q,p),Ye(S,Q,null),q(Q,C),q(Q,b),q(b,R),q(R,V),q(b,O),q(b,U),q(U,nt),q(Q,L),q(Q,D),q(D,I),q(D,K),q(D,Z),q(D,ct),q(D,dt),mt.m(dt,null),q(D,ht),q(D,ot),q(D,tt),q(D,w),q(i,F),q(i,j),wt[G].m(j,null),st=!0,yt||(ut=[pt(f,"change",t[18]),pt(k,"input",t[21]),pt(Y,"change",t[25]),pt(Y,"input",t[25]),pt(Y,"input",t[22]),pt(h,"change",t[26]),pt(_,"change",t[27]),pt(I,"click",t[32]),pt(Z,"click",t[33]),pt(dt,"click",t[20]),pt(ot,"click",t[34]),pt(w,"click",t[35])],yt=!0)},p(J,vt){J[9].length?rt?rt.p(J,vt):(rt=mr(J),rt.c(),rt.m(o,E)):rt&&(rt.d(1),rt=null),J[1].length?W?W.p(J,vt):(W=_r(J),W.c(),W.m(o,A)):W&&(W.d(1),W=null),vt[0]&1024&&Nn(Y,J[10]),(!st||vt[0]&8&&y!==(y=Yt(J[3])))&&(h.value=y),(!st||vt[0]&16&&P!==(P=Yt(J[4])))&&(_.value=P);const Tt={};vt[0]&32&&(Tt.max=J[5].length-1),!m&&vt[0]&64&&(m=!0,Tt.startValue=J[6],In(()=>m=!1)),!x&&vt[0]&128&&(x=!0,Tt.endValue=J[7],In(()=>x=!1)),S.$set(Tt),(!st||vt[0]&8)&&T!==(T=Yt(J[3])+"")&&Wt(V,T),(!st||vt[0]&16)&&$!==($=Yt(J[4])+"")&&Wt(nt,$),bt!==(bt=St(J))&&(mt.d(1),mt=bt(J),mt&&(mt.c(),mt.m(dt,null)));let Kt=G;G=Mt(J),G===Kt?wt[G].p(J,vt):(Mr(),jt(wt[Kt],1,1,()=>{wt[Kt]=null}),Sr(),at=wt[G],at?at.p(J,vt):(at=wt[G]=Et[G](J),at.c()),Xt(at,1),at.m(j,null))},i(J){st||(Xt(S.$$.fragment,J),Xt(at),st=!0)},o(J){jt(S.$$.fragment,J),jt(at),st=!1},d(J){J&&gt(e),rt&&rt.d(),W&&W.d(),Ue(S),mt.d(),wt[G].d(),yt=!1,Bt(ut)}}}function Yt(t){return t?t.toISOString().split("T")[0]:""}function Gl(t,e,n){let r=[],i=[],o="org",s=[],l=new Set,u=.5,a=null,f=null,d=[],g=[],v=0,k=0,z=!1,E=null,A=[],it="",H=!0;yn(async()=>{const D=await(await fetch("data.csv")).text();return Y(D),()=>{E&&clearInterval(E)}});function Y(L){const D=gi.parse(L,{header:!0});n(23,r=D.data.filter(I=>I.x&&I.y&&I.date).map((I,K)=>({...I,x:+I.x,y:+I.y,date:new Date(I.date),id:K}))),n(9,i=D.meta.fields||[]),n(5,g=[...new Set(r.map(I=>I.date.getTime()))].sort((I,K)=>I-K).map(I=>new Date(I))),n(3,a=g[0]),n(4,f=g[g.length-1]),n(6,v=0),n(7,k=g.length-1),o&&n(1,s=[...new Set(r.map(I=>I[o]).filter(Boolean))])}function et(L){n(0,o=L.target.value),n(1,s=o?[...new Set(r.map(D=>D[o]).filter(Boolean))]:[]),n(2,l=new Set),n(14,H=!1)}function Q(L){const D=[...L.target.selectedOptions].map(K=>K.value);D.length===s.length||D.length===0?(n(2,l=new Set),n(8,A=[])):(n(2,l=new Set(D)),n(8,A=r.filter(K=>l.has(K[o])&&(!a||K.date>=a)&&(!f||K.date<=f)))),n(14,H=!1)}function X(L,D,I=!1){I?(n(3,a=g[L]||g[0]),n(4,f=g[D]||g[g.length-1])):(n(3,a=L),n(4,f=D)),n(14,H=!1)}function c(){if(a){const L=a.getTime();n(6,v=Math.max(0,g.findIndex(D=>D.getTime()>=L)))}else n(6,v=0);if(f){const L=f.getTime(),D=g.findIndex(I=>I.getTime()>=L);n(7,k=D>=0?D:g.length>0?g.length-1:0)}else n(7,k=g.length-1);v>k&&n(6,v=k),k<v&&n(7,k=v)}function h(L,D){if(L.detail!==void 0)D==="start"?(n(6,v=L.detail),v>k&&n(6,v=k)):(n(7,k=L.detail),k<v&&n(7,k=v)),X(v,k,!0);else{const I=L.target.value?new Date(L.target.value):null;D==="start"?X(I,f):X(a,I),c()}}function y(L){const D=L.target.files[0];if(D){const I=new FileReader;n(14,H=!1),I.onload=K=>Y(K.target.result),I.readAsText(D)}}function M(L){const D=k-v;let I=v+L,K=k+L;I<0&&(I=0,K=D),K>=g.length&&(K=g.length-1,I=Math.max(0,K-D)),n(6,v=I),n(7,k=K),X(v,k,!0)}function _(){z?(clearInterval(E),n(12,z=!1)):(n(12,z=!0),n(14,H=!1),E=setInterval(()=>{if(k>=g.length-1){clearInterval(E),n(12,z=!1);return}M(1)},500))}function P(L){n(13,it=L.target.value),n(14,H=!1)}function p(){n(14,H=!1)}function S(){o=li(this),n(0,o),n(9,i)}function m(){u=si(this.value),n(10,u)}const x=L=>h(L,"start"),C=L=>h(L,"end");function b(L){v=L,n(6,v)}function R(L){k=L,n(7,k)}const T=L=>h(L,"start"),V=L=>h(L,"end"),O=()=>M(-7),U=()=>M(-1),$=()=>M(1),nt=()=>M(7);return t.$$.update=()=>{t.$$.dirty[0]&256&&new Set(A.map(L=>L.id)),t.$$.dirty[0]&8388639&&n(11,d=r.map(L=>({...L,isHighlighted:l.size>0&&l.size<s.length&&l.has(L[o])&&(!a||L.date>=a)&&(!f||L.date<=f)}))),t.$$.dirty[0]&96&&g.length>1&&v/(g.length-1)*100,t.$$.dirty[0]&160&&g.length>1&&k/(g.length-1)*100},[o,s,l,a,f,g,v,k,A,i,u,d,z,it,H,et,Q,h,y,M,_,P,p,r,S,m,x,C,b,R,T,V,O,U,$,nt]}class Zl extends Ke{constructor(e){super(),We(this,e,Gl,Ql,Be,{},null,[-1,-1])}}new Zl({target:document.getElementById("app")});
