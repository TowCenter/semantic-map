(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Dt(){}function vr(t){return t()}function Nn(){return Object.create(null)}function Yt(t){t.forEach(vr)}function br(t){return typeof t=="function"}function Ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function si(t){return Object.keys(t).length===0}function I(t,e){t.appendChild(e)}function ft(t,e,n){t.insertBefore(e,n||null)}function lt(t){t.parentNode.removeChild(t)}function xr(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Y(t){return document.createElement(t)}function yt(t){return document.createTextNode(t)}function ut(){return yt(" ")}function ai(){return yt("")}function mt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function D(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function li(t){return t===""?null:+t}function ui(t){return Array.from(t.childNodes)}function zt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function zn(t,e){t.value=e==null?"":e}function Ct(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function In(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function fi(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ci(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let de;function he(t){de=t}function kr(){if(!de)throw new Error("Function called outside component initialization");return de}function wn(t){kr().$$.on_mount.push(t)}function hi(){const t=kr();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=ci(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const ue=[],Xt=[],Ee=[],nn=[],di=Promise.resolve();let rn=!1;function pi(){rn||(rn=!0,di.then(Mr))}function ze(t){Ee.push(t)}function On(t){nn.push(t)}const Je=new Set;let we=0;function Mr(){const t=de;do{for(;we<ue.length;){const e=ue[we];we++,he(e),gi(e.$$)}for(he(null),ue.length=0,we=0;Xt.length;)Xt.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Je.has(n)||(Je.add(n),n())}Ee.length=0}while(ue.length);for(;nn.length;)nn.pop()();rn=!1,Je.clear(),he(t)}function gi(t){if(t.fragment!==null){t.update(),Yt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}const Ce=new Set;let Gt;function Sr(){Gt={r:0,c:[],p:Gt}}function Er(){Gt.r||Yt(Gt.c),Gt=Gt.p}function Bt(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function jt(t,e,n,r){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),Gt.c.push(()=>{Ce.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ln(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function vn(t){t&&t.c()}function Ue(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||ze(()=>{const s=t.$$.on_mount.map(vr).filter(br);t.$$.on_destroy?t.$$.on_destroy.push(...s):Yt(s),t.$$.on_mount=[]}),o.forEach(ze)}function We(t,e){const n=t.$$;n.fragment!==null&&(Yt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mi(t,e){t.$$.dirty[0]===-1&&(ue.push(t),pi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ke(t,e,n,r,i,o,s,l=[-1]){const u=de;he(t);const a=t.$$={fragment:null,ctx:[],props:o,update:Dt,not_equal:i,bound:Nn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Nn(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(c,y,...v)=>{const b=v.length?v[0]:y;return a.ctx&&i(a.ctx[c],a.ctx[c]=b)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](b),f&&mi(t,c)),y}):[],a.update(),f=!0,Yt(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const c=ui(e.target);a.fragment&&a.fragment.l(c),c.forEach(lt)}else a.fragment&&a.fragment.c();e.intro&&Bt(t.$$.fragment),Ue(t,e.target,e.anchor,e.customElement),Mr()}he(u)}class Qe{$destroy(){We(this,1),this.$destroy=Dt}$on(e,n){if(!br(n))return Dt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!si(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(_i,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,l={},u=0,a={};function f(h){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(d){var _=et(d);_.chunkSize=parseInt(_.chunkSize),d.step||d.chunk||(_.chunkSize=null),this._handle=new T(_),(this._handle.streamer=this)._config=_}.call(this,h),this.parseChunk=function(d,_){var M=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<M){let P=this._config.newline;P||(m=this._config.quoteChar||'"',P=this._handle.guessLineEndings(d,m)),d=[...d.split(P).slice(M)].join(P)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(m=this._config.beforeFirstChunk(d))!==void 0&&(d=m),this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+d,m=(this._partialLine="",this._handle.parse(M,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(d=m.meta.cursor,M=(this._finished||(this._partialLine=M.substring(d-this._baseIndex),this._baseIndex=d),m&&m.data&&(this._rowCount+=m.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:m,workerId:a.WORKER_ID,finished:M});else if(B(this._config.chunk)&&!_){if(this._config.chunk(m,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=m=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(m.data),this._completeResults.errors=this._completeResults.errors.concat(m.errors),this._completeResults.meta=m.meta),this._completed||!M||!B(this._config.complete)||m&&m.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||m&&m.meta.paused||this._nextChunk(),m}this._halted=!0},this._sendError=function(d){B(this._config.error)?this._config.error(d):s&&this._config.error&&r.postMessage({workerId:a.WORKER_ID,error:d,finished:!1})}}function c(h){var d;(h=h||{}).chunkSize||(h.chunkSize=a.RemoteChunkSize),f.call(this,h),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_){this._input=_,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),o||(d.onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var _,M=this._config.downloadRequestHeaders;for(_ in M)d.setRequestHeader(_,M[_])}var m;this._config.chunkSize&&(m=this._start+this._config.chunkSize-1,d.setRequestHeader("Range","bytes="+this._start+"-"+m));try{d.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize||d.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_=>(_=_.getResponseHeader("Content-Range"))!==null?parseInt(_.substring(_.lastIndexOf("/")+1)):-1)(d),this.parseChunk(d.responseText)))},this._chunkError=function(_){_=d.statusText||_,this._sendError(new Error(_))}}function y(h){(h=h||{}).chunkSize||(h.chunkSize=a.LocalChunkSize),f.call(this,h);var d,_,M=typeof FileReader<"u";this.stream=function(m){this._input=m,_=m.slice||m.webkitSlice||m.mozSlice,M?((d=new FileReader).onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var m=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),m=_.call(m,this._start,P)),d.readAsText(m,this._config.encoding));M||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(m){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(m.target.result)},this._chunkError=function(){this._sendError(d.error)}}function v(h){var d;f.call(this,h=h||{}),this.stream=function(_){return d=_,this._nextChunk()},this._nextChunk=function(){var _,M;if(!this._finished)return _=this._config.chunkSize,d=_?(M=d.substring(0,_),d.substring(_)):(M=d,""),this._finished=!d,this.parseChunk(M)}}function b(h){f.call(this,h=h||{});var d=[],_=!0,M=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(m){this._input=m,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):_=!0},this._streamData=W(function(m){try{d.push(typeof m=="string"?m:m.toString(this._config.encoding)),_&&(_=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(P){this._streamError(P)}},this),this._streamError=W(function(m){this._streamCleanUp(),this._sendError(m)},this),this._streamEnd=W(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(h){var d,_,M,m,P=Math.pow(2,53),p=-P,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,g=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,x=this,C=0,k=0,z=!1,R=!1,V=[],L={data:[],errors:[],meta:{}};function K(q){return h.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function nt(){if(L&&M&&(ht("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),M=!1),h.skipEmptyLines&&(L.data=L.data.filter(function(dt){return!K(dt)})),rt()){let dt=function(N,H){B(h.transformHeader)&&(N=h.transformHeader(N,H)),V.push(N)};var J=dt;if(L)if(Array.isArray(L.data[0])){for(var q=0;rt()&&q<L.data.length;q++)L.data[q].forEach(dt);L.data.splice(0,1)}else L.data.forEach(dt)}function tt(dt,N){for(var H=h.header?{}:[],F=0;F<dt.length;F++){var X=F,w=dt[F],w=((O,Z)=>(Q=>(h.dynamicTypingFunction&&h.dynamicTyping[Q]===void 0&&(h.dynamicTyping[Q]=h.dynamicTypingFunction(Q)),(h.dynamicTyping[Q]||h.dynamicTyping)===!0))(O)?Z==="true"||Z==="TRUE"||Z!=="false"&&Z!=="FALSE"&&((Q=>{if(S.test(Q)&&(Q=parseFloat(Q),p<Q&&Q<P))return 1})(Z)?parseFloat(Z):g.test(Z)?new Date(Z):Z===""?null:Z):Z)(X=h.header?F>=V.length?"__parsed_extra":V[F]:X,w=h.transform?h.transform(w,X):w);X==="__parsed_extra"?(H[X]=H[X]||[],H[X].push(w)):H[X]=w}return h.header&&(F>V.length?ht("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+F,k+N):F<V.length&&ht("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+F,k+N)),H}var ct;L&&(h.header||h.dynamicTyping||h.transform)&&(ct=1,!L.data.length||Array.isArray(L.data[0])?(L.data=L.data.map(tt),ct=L.data.length):L.data=tt(L.data,0),h.header&&L.meta&&(L.meta.fields=V),k+=ct)}function rt(){return h.header&&V.length===0}function ht(q,tt,ct,J){q={type:q,code:tt,message:ct},J!==void 0&&(q.row=J),L.errors.push(q)}B(h.step)&&(m=h.step,h.step=function(q){L=q,rt()?nt():(nt(),L.data.length!==0&&(C+=q.data.length,h.preview&&C>h.preview?_.abort():(L.data=L.data[0],m(L,x))))}),this.parse=function(q,tt,ct){var J=h.quoteChar||'"',J=(h.newline||(h.newline=this.guessLineEndings(q,J)),M=!1,h.delimiter?B(h.delimiter)&&(h.delimiter=h.delimiter(q),L.meta.delimiter=h.delimiter):((J=((dt,N,H,F,X)=>{var w,O,Z,Q;X=X||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var it=0;it<X.length;it++){for(var st,wt=X[it],pt=0,ot=0,G=0,gt=(Z=void 0,new A({comments:F,delimiter:wt,newline:N,preview:10}).parse(dt)),kt=0;kt<gt.data.length;kt++)H&&K(gt.data[kt])?G++:(st=gt.data[kt].length,ot+=st,Z===void 0?Z=st:0<st&&(pt+=Math.abs(st-Z),Z=st));0<gt.data.length&&(ot/=gt.data.length-G),(O===void 0||pt<=O)&&(Q===void 0||Q<ot)&&1.99<ot&&(O=pt,w=wt,Q=ot)}return{successful:!!(h.delimiter=w),bestDelimiter:w}})(q,h.newline,h.skipEmptyLines,h.comments,h.delimitersToGuess)).successful?h.delimiter=J.bestDelimiter:(M=!0,h.delimiter=a.DefaultDelimiter),L.meta.delimiter=h.delimiter),et(h));return h.preview&&h.header&&J.preview++,d=q,_=new A(J),L=_.parse(d,tt,ct),nt(),z?{meta:{paused:!0}}:L||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,_.abort(),d=B(h.chunk)?"":d.substring(_.getCharIndex())},this.resume=function(){x.streamer._halted?(z=!1,x.streamer.parseChunk(d,!0)):setTimeout(x.resume,3)},this.aborted=function(){return R},this.abort=function(){R=!0,_.abort(),L.meta.aborted=!0,B(h.complete)&&h.complete(L),d=""},this.guessLineEndings=function(dt,J){dt=dt.substring(0,1048576);var J=new RegExp(E(J)+"([^]*?)"+E(J),"gm"),ct=(dt=dt.replace(J,"")).split("\r"),J=dt.split(`
`),dt=1<J.length&&J[0].length<ct[0].length;if(ct.length===1||dt)return`
`;for(var N=0,H=0;H<ct.length;H++)ct[H][0]===`
`&&N++;return N>=ct.length/2?`\r
`:"\r"}}function E(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(h){var d=(h=h||{}).delimiter,_=h.newline,M=h.comments,m=h.step,P=h.preview,p=h.fastMode,S=null,g=!1,x=h.quoteChar==null?'"':h.quoteChar,C=x;if(h.escapeChar!==void 0&&(C=h.escapeChar),(typeof d!="string"||-1<a.BAD_DELIMITERS.indexOf(d))&&(d=","),M===d)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var k=0,z=!1;this.parse=function(R,V,L){if(typeof R!="string")throw new Error("Input must be a string");var K=R.length,nt=d.length,rt=_.length,ht=M.length,q=B(m),tt=[],ct=[],J=[],dt=k=0;if(!R)return pt();if(p||p!==!1&&R.indexOf(x)===-1){for(var N=R.split(_),H=0;H<N.length;H++){if(J=N[H],k+=J.length,H!==N.length-1)k+=_.length;else if(L)return pt();if(!M||J.substring(0,ht)!==M){if(q){if(tt=[],Q(J.split(d)),ot(),z)return pt()}else Q(J.split(d));if(P&&P<=H)return tt=tt.slice(0,P),pt(!0)}}return pt()}for(var F=R.indexOf(d,k),X=R.indexOf(_,k),w=new RegExp(E(C)+E(x),"g"),O=R.indexOf(x,k);;)if(R[k]===x)for(O=k,k++;;){if((O=R.indexOf(x,O+1))===-1)return L||ct.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:tt.length,index:k}),st();if(O===K-1)return st(R.substring(k,O).replace(w,x));if(x===C&&R[O+1]===C)O++;else if(x===C||O===0||R[O-1]!==C){F!==-1&&F<O+1&&(F=R.indexOf(d,O+1));var Z=it((X=X!==-1&&X<O+1?R.indexOf(_,O+1):X)===-1?F:Math.min(F,X));if(R.substr(O+1+Z,nt)===d){J.push(R.substring(k,O).replace(w,x)),R[k=O+1+Z+nt]!==x&&(O=R.indexOf(x,k)),F=R.indexOf(d,k),X=R.indexOf(_,k);break}if(Z=it(X),R.substring(O+1+Z,O+1+Z+rt)===_){if(J.push(R.substring(k,O).replace(w,x)),wt(O+1+Z+rt),F=R.indexOf(d,k),O=R.indexOf(x,k),q&&(ot(),z))return pt();if(P&&tt.length>=P)return pt(!0);break}ct.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:tt.length,index:k}),O++}}else if(M&&J.length===0&&R.substring(k,k+ht)===M){if(X===-1)return pt();k=X+rt,X=R.indexOf(_,k),F=R.indexOf(d,k)}else if(F!==-1&&(F<X||X===-1))J.push(R.substring(k,F)),k=F+nt,F=R.indexOf(d,k);else{if(X===-1)break;if(J.push(R.substring(k,X)),wt(X+rt),q&&(ot(),z))return pt();if(P&&tt.length>=P)return pt(!0)}return st();function Q(G){tt.push(G),dt=k}function it(G){var gt=0;return gt=G!==-1&&(G=R.substring(O+1,G))&&G.trim()===""?G.length:gt}function st(G){return L||(G===void 0&&(G=R.substring(k)),J.push(G),k=K,Q(J),q&&ot()),pt()}function wt(G){k=G,Q(J),J=[],X=R.indexOf(_,k)}function pt(G){if(h.header&&!V&&tt.length&&!g){var gt=tt[0],kt={},Mt=new Set(gt);let Et=!1;for(let xt=0;xt<gt.length;xt++){let _t=gt[xt];if(kt[_t=B(h.transformHeader)?h.transformHeader(_t,xt):_t]){let At,vt=kt[_t];for(;At=_t+"_"+vt,vt++,Mt.has(At););Mt.add(At),gt[xt]=At,kt[_t]++,Et=!0,(S=S===null?{}:S)[At]=_t}else kt[_t]=1,gt[xt]=_t;Mt.add(_t)}Et&&console.warn("Duplicate headers found and renamed."),g=!0}return{data:tt,errors:ct,meta:{delimiter:d,linebreak:_,aborted:z,truncated:!!G,cursor:dt+(V||0),renamedHeaders:S}}}function ot(){m(pt()),tt=[],ct=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return k}}function at(h){var d=h.data,_=l[d.workerId],M=!1;if(d.error)_.userError(d.error,d.file);else if(d.results&&d.results.data){var m={abort:function(){M=!0,j(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(B(_.userStep)){for(var P=0;P<d.results.data.length&&(_.userStep({data:d.results.data[P],errors:d.results.errors,meta:d.results.meta},m),!M);P++);delete d.results}else B(_.userChunk)&&(_.userChunk(d.results,m,d.file),delete d.results)}d.finished&&!M&&j(d.workerId,d.results)}function j(h,d){var _=l[h];B(_.userComplete)&&_.userComplete(d),_.terminate(),delete l[h]}function U(){throw new Error("Not implemented.")}function et(h){if(typeof h!="object"||h===null)return h;var d,_=Array.isArray(h)?[]:{};for(d in h)_[d]=et(h[d]);return _}function W(h,d){return function(){h.apply(d,arguments)}}function B(h){return typeof h=="function"}return a.parse=function(h,d){var _=(d=d||{}).dynamicTyping||!1;if(B(_)&&(d.dynamicTypingFunction=_,_={}),d.dynamicTyping=_,d.transform=!!B(d.transform)&&d.transform,!d.worker||!a.WORKERS_SUPPORTED)return _=null,a.NODE_STREAM_INPUT,typeof h=="string"?(h=(M=>M.charCodeAt(0)!==65279?M:M.slice(1))(h),_=new(d.download?c:v)(d)):h.readable===!0&&B(h.read)&&B(h.on)?_=new b(d):(r.File&&h instanceof File||h instanceof Object)&&(_=new y(d)),_.stream(h);(_=(()=>{var M;return!!a.WORKERS_SUPPORTED&&(M=(()=>{var m=r.URL||r.webkitURL||null,P=n.toString();return a.BLOB_URL||(a.BLOB_URL=m.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(M=new r.Worker(M)).onmessage=at,M.id=u++,l[M.id]=M)})()).userStep=d.step,_.userChunk=d.chunk,_.userComplete=d.complete,_.userError=d.error,d.step=B(d.step),d.chunk=B(d.chunk),d.complete=B(d.complete),d.error=B(d.error),delete d.worker,_.postMessage({input:h,config:d,workerId:_.id})},a.unparse=function(h,d){var _=!1,M=!0,m=",",P=`\r
`,p='"',S=p+p,g=!1,x=null,C=!1,k=((()=>{if(typeof d=="object"){if(typeof d.delimiter!="string"||a.BAD_DELIMITERS.filter(function(V){return d.delimiter.indexOf(V)!==-1}).length||(m=d.delimiter),typeof d.quotes!="boolean"&&typeof d.quotes!="function"&&!Array.isArray(d.quotes)||(_=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(g=d.skipEmptyLines),typeof d.newline=="string"&&(P=d.newline),typeof d.quoteChar=="string"&&(p=d.quoteChar),typeof d.header=="boolean"&&(M=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");x=d.columns}d.escapeChar!==void 0&&(S=d.escapeChar+p),d.escapeFormulae instanceof RegExp?C=d.escapeFormulae:typeof d.escapeFormulae=="boolean"&&d.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(p),"g"));if(typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(h)){if(!h.length||Array.isArray(h[0]))return z(null,h,g);if(typeof h[0]=="object")return z(x||Object.keys(h[0]),h,g)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),Array.isArray(h.data)&&(h.fields||(h.fields=h.meta&&h.meta.fields||x),h.fields||(h.fields=Array.isArray(h.data[0])?h.fields:typeof h.data[0]=="object"?Object.keys(h.data[0]):[]),Array.isArray(h.data[0])||typeof h.data[0]=="object"||(h.data=[h.data])),z(h.fields||[],h.data||[],g);throw new Error("Unable to serialize unrecognized input");function z(V,L,K){var nt="",rt=(typeof V=="string"&&(V=JSON.parse(V)),typeof L=="string"&&(L=JSON.parse(L)),Array.isArray(V)&&0<V.length),ht=!Array.isArray(L[0]);if(rt&&M){for(var q=0;q<V.length;q++)0<q&&(nt+=m),nt+=R(V[q],q);0<L.length&&(nt+=P)}for(var tt=0;tt<L.length;tt++){var ct=(rt?V:L[tt]).length,J=!1,dt=rt?Object.keys(L[tt]).length===0:L[tt].length===0;if(K&&!rt&&(J=K==="greedy"?L[tt].join("").trim()==="":L[tt].length===1&&L[tt][0].length===0),K==="greedy"&&rt){for(var N=[],H=0;H<ct;H++){var F=ht?V[H]:H;N.push(L[tt][F])}J=N.join("").trim()===""}if(!J){for(var X=0;X<ct;X++){0<X&&!dt&&(nt+=m);var w=rt&&ht?V[X]:X;nt+=R(L[tt][w],X)}tt<L.length-1&&(!K||0<ct&&!dt)&&(nt+=P)}}return nt}function R(V,L){var K,nt;return V==null?"":V.constructor===Date?JSON.stringify(V).slice(1,25):(nt=!1,C&&typeof V=="string"&&C.test(V)&&(V="'"+V,nt=!0),K=V.toString().replace(k,S),(nt=nt||_===!0||typeof _=="function"&&_(V,L)||Array.isArray(_)&&_[L]||((rt,ht)=>{for(var q=0;q<ht.length;q++)if(-1<rt.indexOf(ht[q]))return!0;return!1})(K,a.BAD_DELIMITERS)||-1<K.indexOf(m)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?p+K+p:K)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!r.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=A,a.ParserHandle=T,a.NetworkStreamer=c,a.FileStreamer=y,a.StringStreamer=v,a.ReadableStreamStreamer=b,r.jQuery&&((i=r.jQuery).fn.parse=function(h){var d=h.config||{},_=[];return this.each(function(P){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)_.push({file:this.files[p],inputElem:this,instanceConfig:i.extend({},d)})}),M(),this;function M(){if(_.length===0)B(h.complete)&&h.complete();else{var P,p,S,g,x=_[0];if(B(h.before)){var C=h.before(x.file,x.inputElem);if(typeof C=="object"){if(C.action==="abort")return P="AbortError",p=x.file,S=x.inputElem,g=C.reason,void(B(h.error)&&h.error({name:P},p,S,g));if(C.action==="skip")return void m();typeof C.config=="object"&&(x.instanceConfig=i.extend(x.instanceConfig,C.config))}else if(C==="skip")return void m()}var k=x.instanceConfig.complete;x.instanceConfig.complete=function(z){B(k)&&k(z,x.file,x.inputElem),m()},a.parse(x.file,x.instanceConfig)}}function m(){_.splice(0,1),M()}}),s&&(r.onmessage=function(h){h=h.data,a.WORKER_ID===void 0&&h&&(a.WORKER_ID=h.workerId),typeof h.input=="string"?r.postMessage({workerId:a.WORKER_ID,results:a.parse(h.input,h.config),finished:!0}):(r.File&&h.input instanceof File||h.input instanceof Object)&&(h=a.parse(h.input,h.config))&&r.postMessage({workerId:a.WORKER_ID,results:h,finished:!0})}),(c.prototype=Object.create(f.prototype)).constructor=c,(y.prototype=Object.create(f.prototype)).constructor=y,(v.prototype=Object.create(v.prototype)).constructor=v,(b.prototype=Object.create(f.prototype)).constructor=b,a})})(Cr);const yi=Cr.exports;function Ae(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ar(t){let e,n,r;t.length!==2?(e=Ae,n=(l,u)=>Ae(t(l),u),r=(l,u)=>t(l)-u):(e=t===Ae||t===wi?t:vi,n=t,r=t);function i(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{const c=a+f>>>1;n(l[c],u)<0?a=c+1:f=c}while(a<f)}return a}function o(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{const c=a+f>>>1;n(l[c],u)<=0?a=c+1:f=c}while(a<f)}return a}function s(l,u,a=0,f=l.length){const c=i(l,u,a,f-1);return c>a&&r(l[c-1],u)>-r(l[c],u)?c-1:c}return{left:i,center:s,right:o}}function vi(){return 0}function bi(t){return t===null?NaN:+t}const xi=Ar(Ae),ki=xi.right;Ar(bi).center;const Mi=ki;class Pn extends Map{constructor(e,n=Ci){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Fn(this,e))}has(e){return super.has(Fn(this,e))}set(e,n){return super.set(Si(this,e),n)}delete(e){return super.delete(Ei(this,e))}}function Fn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Si({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ei({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ci(t){return t!==null&&typeof t=="object"?t.valueOf():t}var on=Math.sqrt(50),sn=Math.sqrt(10),an=Math.sqrt(2);function Ai(t,e,n){var r,i=-1,o,s,l;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(l=Tr(t,e,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),a=Math.round(e/l);for(u*l<t&&++u,a*l>e&&--a,s=new Array(o=a-u+1);++i<o;)s[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),a=Math.round(e*l);for(u/l<t&&++u,a/l>e&&--a,s=new Array(o=a-u+1);++i<o;)s[i]=(u+i)/l}return r&&s.reverse(),s}function Tr(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=on?10:o>=sn?5:o>=an?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=on?10:o>=sn?5:o>=an?2:1)}function Ti(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=on?i*=10:o>=sn?i*=5:o>=an&&(i*=2),e<t?-i:i}function Vn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function qn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Dr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Xn=Symbol("implicit");function Rr(){var t=new Pn,e=[],n=[],r=Xn;function i(o){let s=t.get(o);if(s===void 0){if(r!==Xn)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Pn;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Rr(e,n).unknown(r)},Dr.apply(i,arguments),i}function bn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _e(){}var pe=.7,Ie=1/pe,re="\\s*([+-]?\\d+)\\s*",ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Di=/^#([0-9a-f]{3,8})$/,Ri=new RegExp(`^rgb\\(${re},${re},${re}\\)$`),Ni=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),zi=new RegExp(`^rgba\\(${re},${re},${re},${ge}\\)$`),Ii=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${ge}\\)$`),Oi=new RegExp(`^hsl\\(${ge},${Pt},${Pt}\\)$`),Li=new RegExp(`^hsla\\(${ge},${Pt},${Pt},${ge}\\)$`),Bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bn(_e,$t,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Hn,formatHex:Hn,formatHex8:Pi,formatHsl:Fi,formatRgb:Yn,toString:Yn});function Hn(){return this.rgb().formatHex()}function Pi(){return this.rgb().formatHex8()}function Fi(){return zr(this).formatHsl()}function Yn(){return this.rgb().formatRgb()}function $t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Di.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Un(e):n===3?new Tt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ve(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ve(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ri.exec(t))?new Tt(e[1],e[2],e[3],1):(e=Ni.exec(t))?new Tt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zi.exec(t))?ve(e[1],e[2],e[3],e[4]):(e=Ii.exec(t))?ve(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oi.exec(t))?Qn(e[1],e[2]/100,e[3]/100,1):(e=Li.exec(t))?Qn(e[1],e[2]/100,e[3]/100,e[4]):Bn.hasOwnProperty(t)?Un(Bn[t]):t==="transparent"?new Tt(NaN,NaN,NaN,0):null}function Un(t){return new Tt(t>>16&255,t>>8&255,t&255,1)}function ve(t,e,n,r){return r<=0&&(t=e=n=NaN),new Tt(t,e,n,r)}function Vi(t){return t instanceof _e||(t=$t(t)),t?(t=t.rgb(),new Tt(t.r,t.g,t.b,t.opacity)):new Tt}function ln(t,e,n,r){return arguments.length===1?Vi(t):new Tt(t,e,n,r==null?1:r)}function Tt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}bn(Tt,ln,Nr(_e,{brighter(t){return t=t==null?Ie:Math.pow(Ie,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pe:Math.pow(pe,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Tt(Jt(this.r),Jt(this.g),Jt(this.b),Oe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wn,formatHex:Wn,formatHex8:qi,formatRgb:Kn,toString:Kn}));function Wn(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function qi(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kn(){const t=Oe(this.opacity);return`${t===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${t===1?")":`, ${t})`}`}function Oe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zt(t){return t=Jt(t),(t<16?"0":"")+t.toString(16)}function Qn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ot(t,e,n,r)}function zr(t){if(t instanceof Ot)return new Ot(t.h,t.s,t.l,t.opacity);if(t instanceof _e||(t=$t(t)),!t)return new Ot;if(t instanceof Ot)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,u=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=u<.5?o+i:2-o-i,s*=60):l=u>0&&u<1?0:s,new Ot(s,l,u,t.opacity)}function Xi(t,e,n,r){return arguments.length===1?zr(t):new Ot(t,e,n,r==null?1:r)}function Ot(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}bn(Ot,Xi,Nr(_e,{brighter(t){return t=t==null?Ie:Math.pow(Ie,t),new Ot(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pe:Math.pow(pe,t),new Ot(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Tt($e(t>=240?t-240:t+120,i,r),$e(t,i,r),$e(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ot(Gn(this.h),be(this.s),be(this.l),Oe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oe(this.opacity);return`${t===1?"hsl(":"hsla("}${Gn(this.h)}, ${be(this.s)*100}%, ${be(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Gn(t){return t=(t||0)%360,t<0?t+360:t}function be(t){return Math.max(0,Math.min(1,t||0))}function $e(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xn=t=>()=>t;function Bi(t,e){return function(n){return t+n*e}}function Hi(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Yi(t){return(t=+t)==1?Ir:function(e,n){return n-e?Hi(e,n,t):xn(isNaN(e)?n:e)}}function Ir(t,e){var n=e-t;return n?Bi(t,n):xn(isNaN(t)?e:t)}const Le=function t(e){var n=Yi(e);function r(i,o){var s=n((i=ln(i)).r,(o=ln(o)).r),l=n(i.g,o.g),u=n(i.b,o.b),a=Ir(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=u(f),i.opacity=a(f),i+""}}return r.gamma=t,r}(1);function Ui(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Wi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ki(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=kn(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function Qi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function It(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gi(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=kn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp(un.source,"g");function Zi(t){return function(){return t}}function ji(t){return function(e){return t(e)+""}}function Or(t,e){var n=un.lastIndex=tn.lastIndex=0,r,i,o,s=-1,l=[],u=[];for(t=t+"",e=e+"";(r=un.exec(t))&&(i=tn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:It(r,i)})),n=tn.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?u[0]?ji(u[0].x):Zi(e):(e=u.length,function(a){for(var f=0,c;f<e;++f)l[(c=u[f]).i]=c.x(a);return l.join("")})}function kn(t,e){var n=typeof e,r;return e==null||n==="boolean"?xn(e):(n==="number"?It:n==="string"?(r=$t(e))?(e=r,Le):Or:e instanceof $t?Le:e instanceof Date?Qi:Wi(e)?Ui:Array.isArray(e)?Ki:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gi:It)(t,e)}function Ji(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Zn=180/Math.PI,fn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lr(t,e,n,r,i,o){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Zn,skewX:Math.atan(u)*Zn,scaleX:s,scaleY:l}}var xe;function $i(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fn:Lr(e.a,e.b,e.c,e.d,e.e,e.f)}function to(t){return t==null||(xe||(xe=document.createElementNS("http://www.w3.org/2000/svg","g")),xe.setAttribute("transform",t),!(t=xe.transform.baseVal.consolidate()))?fn:(t=t.matrix,Lr(t.a,t.b,t.c,t.d,t.e,t.f))}function Pr(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,f,c,y,v,b){if(a!==c||f!==y){var T=v.push("translate(",null,e,null,n);b.push({i:T-4,x:It(a,c)},{i:T-2,x:It(f,y)})}else(c||y)&&v.push("translate("+c+e+y+n)}function s(a,f,c,y){a!==f?(a-f>180?f+=360:f-a>180&&(a+=360),y.push({i:c.push(i(c)+"rotate(",null,r)-2,x:It(a,f)})):f&&c.push(i(c)+"rotate("+f+r)}function l(a,f,c,y){a!==f?y.push({i:c.push(i(c)+"skewX(",null,r)-2,x:It(a,f)}):f&&c.push(i(c)+"skewX("+f+r)}function u(a,f,c,y,v,b){if(a!==c||f!==y){var T=v.push(i(v)+"scale(",null,",",null,")");b.push({i:T-4,x:It(a,c)},{i:T-2,x:It(f,y)})}else(c!==1||y!==1)&&v.push(i(v)+"scale("+c+","+y+")")}return function(a,f){var c=[],y=[];return a=t(a),f=t(f),o(a.translateX,a.translateY,f.translateX,f.translateY,c,y),s(a.rotate,f.rotate,c,y),l(a.skewX,f.skewX,c,y),u(a.scaleX,a.scaleY,f.scaleX,f.scaleY,c,y),a=f=null,function(v){for(var b=-1,T=y.length,E;++b<T;)c[(E=y[b]).i]=E.x(v);return c.join("")}}}var eo=Pr($i,"px, ","px)","deg)"),no=Pr(to,", ",")",")"),ro=1e-12;function jn(t){return((t=Math.exp(t))+1/t)/2}function io(t){return((t=Math.exp(t))-1/t)/2}function oo(t){return((t=Math.exp(2*t))-1)/(t+1)}const so=function t(e,n,r){function i(o,s){var l=o[0],u=o[1],a=o[2],f=s[0],c=s[1],y=s[2],v=f-l,b=c-u,T=v*v+b*b,E,A;if(T<ro)A=Math.log(y/a)/e,E=function(B){return[l+B*v,u+B*b,a*Math.exp(e*B*A)]};else{var at=Math.sqrt(T),j=(y*y-a*a+r*T)/(2*a*n*at),U=(y*y-a*a-r*T)/(2*y*n*at),et=Math.log(Math.sqrt(j*j+1)-j),W=Math.log(Math.sqrt(U*U+1)-U);A=(W-et)/e,E=function(B){var h=B*A,d=jn(et),_=a/(n*at)*(d*oo(e*h+et)-io(et));return[l+_*v,u+_*b,a*d/jn(e*h+et)]}}return E.duration=A*1e3*e/Math.SQRT2,E}return i.rho=function(o){var s=Math.max(.001,+o),l=s*s,u=l*l;return t(s,l,u)},i}(Math.SQRT2,2,4);function ao(t){return function(){return t}}function lo(t){return+t}var Jn=[0,1];function ee(t){return t}function cn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ao(isNaN(e)?NaN:.5)}function uo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function fo(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=cn(i,r),o=n(s,o)):(r=cn(r,i),o=n(o,s)),function(l){return o(r(l))}}function co(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=cn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var u=Mi(t,l,1,r)-1;return o[u](i[u](l))}}function ho(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function po(){var t=Jn,e=Jn,n=kn,r,i,o,s=ee,l,u,a;function f(){var y=Math.min(t.length,e.length);return s!==ee&&(s=uo(t[0],t[y-1])),l=y>2?co:fo,u=a=null,c}function c(y){return y==null||isNaN(y=+y)?o:(u||(u=l(t.map(r),e,n)))(r(s(y)))}return c.invert=function(y){return s(i((a||(a=l(e,t.map(r),It)))(y)))},c.domain=function(y){return arguments.length?(t=Array.from(y,lo),f()):t.slice()},c.range=function(y){return arguments.length?(e=Array.from(y),f()):e.slice()},c.rangeRound=function(y){return e=Array.from(y),n=Ji,f()},c.clamp=function(y){return arguments.length?(s=y?!0:ee,f()):s!==ee},c.interpolate=function(y){return arguments.length?(n=y,f()):n},c.unknown=function(y){return arguments.length?(o=y,c):o},function(y,v){return r=y,i=v,f()}}function go(){return po()(ee,ee)}function mo(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Pe(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ie(t){return t=Pe(Math.abs(t)),t?t[1]:NaN}function _o(t,e){return function(n,r){for(var i=n.length,o=[],s=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function yo(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fe(t){if(!(e=wo.exec(t)))throw new Error("invalid format: "+t);var e;return new Mn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fe.prototype=Mn.prototype;function Mn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Fr;function bo(t,e){var n=Pe(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Fr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Pe(t,Math.max(0,e+o-1))[0]}function $n(t,e){var n=Pe(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:mo,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$n(t*100,e),r:$n,s:bo,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function er(t){return t}var nr=Array.prototype.map,rr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function xo(t){var e=t.grouping===void 0||t.thousands===void 0?er:_o(nr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?er:yo(nr.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function a(c){c=Fe(c);var y=c.fill,v=c.align,b=c.sign,T=c.symbol,E=c.zero,A=c.width,at=c.comma,j=c.precision,U=c.trim,et=c.type;et==="n"?(at=!0,et="g"):tr[et]||(j===void 0&&(j=12),U=!0,et="g"),(E||y==="0"&&v==="=")&&(E=!0,y="0",v="=");var W=T==="$"?n:T==="#"&&/[boxX]/.test(et)?"0"+et.toLowerCase():"",B=T==="$"?r:/[%p]/.test(et)?s:"",h=tr[et],d=/[defgprs%]/.test(et);j=j===void 0?6:/[gprs]/.test(et)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function _(M){var m=W,P=B,p,S,g;if(et==="c")P=h(M)+P,M="";else{M=+M;var x=M<0||1/M<0;if(M=isNaN(M)?u:h(Math.abs(M),j),U&&(M=vo(M)),x&&+M==0&&b!=="+"&&(x=!1),m=(x?b==="("?b:l:b==="-"||b==="("?"":b)+m,P=(et==="s"?rr[8+Fr/3]:"")+P+(x&&b==="("?")":""),d){for(p=-1,S=M.length;++p<S;)if(g=M.charCodeAt(p),48>g||g>57){P=(g===46?i+M.slice(p+1):M.slice(p))+P,M=M.slice(0,p);break}}}at&&!E&&(M=e(M,1/0));var C=m.length+M.length+P.length,k=C<A?new Array(A-C+1).join(y):"";switch(at&&E&&(M=e(k+M,k.length?A-P.length:1/0),k=""),v){case"<":M=m+M+P+k;break;case"=":M=m+k+M+P;break;case"^":M=k.slice(0,C=k.length>>1)+m+M+P+k.slice(C);break;default:M=k+m+M+P;break}return o(M)}return _.toString=function(){return c+""},_}function f(c,y){var v=a((c=Fe(c),c.type="f",c)),b=Math.max(-8,Math.min(8,Math.floor(ie(y)/3)))*3,T=Math.pow(10,-b),E=rr[8+b/3];return function(A){return v(T*A)+E}}return{format:a,formatPrefix:f}}var ke,Vr,qr;ko({thousands:",",grouping:[3],currency:["$",""]});function ko(t){return ke=xo(t),Vr=ke.format,qr=ke.formatPrefix,ke}function Mo(t){return Math.max(0,-ie(Math.abs(t)))}function So(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ie(e)/3)))*3-ie(Math.abs(t)))}function Eo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ie(e)-ie(t))+1}function Co(t,e,n,r){var i=Ti(t,e,n),o;switch(r=Fe(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=So(i,s))&&(r.precision=o),qr(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Eo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Mo(i))&&(r.precision=o-(r.type==="%")*2);break}}return Vr(r)}function Ao(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ai(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Co(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],l=r[o],u,a,f=10;for(l<s&&(a=s,s=l,l=a,a=i,i=o,o=a);f-- >0;){if(a=Tr(s,l,n),a===u)return r[i]=s,r[o]=l,e(r);if(a>0)s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a;else if(a<0)s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a;else break;u=a}return t},t}function hn(){var t=go();return t.copy=function(){return ho(t,hn())},Dr.apply(t,arguments),Ao(t)}function To(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Do=To("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Ro(t){let e;return{c(){e=Y("p"),e.textContent="Hover over a circle to see details here.",D(e,"class","svelte-b094ih")},m(n,r){ft(n,e,r)},p:Dt,d(n){n&&lt(e)}}}function No(t){let e,n=t[0].title+"",r,i,o,s=t[0][t[1]]+"",l,u,a,f=t[0].date.toISOString().split("T")[0]+"",c,y,v,b=t[0].text+"",T;return{c(){e=Y("h1"),r=yt(n),i=ut(),o=Y("span"),l=yt(s),u=ut(),a=Y("h2"),c=yt(f),y=ut(),v=Y("p"),T=yt(b),D(e,"class","svelte-b094ih"),Ct(o,"background",t[2](t[0][t[1]])),D(o,"class","svelte-b094ih"),D(a,"class","svelte-b094ih"),D(v,"class","svelte-b094ih")},m(E,A){ft(E,e,A),I(e,r),ft(E,i,A),ft(E,o,A),I(o,l),ft(E,u,A),ft(E,a,A),I(a,c),ft(E,y,A),ft(E,v,A),I(v,T)},p(E,A){A&1&&n!==(n=E[0].title+"")&&zt(r,n),A&3&&s!==(s=E[0][E[1]]+"")&&zt(l,s),A&7&&Ct(o,"background",E[2](E[0][E[1]])),A&1&&f!==(f=E[0].date.toISOString().split("T")[0]+"")&&zt(c,f),A&1&&b!==(b=E[0].text+"")&&zt(T,b)},d(E){E&&lt(e),E&&lt(i),E&&lt(o),E&&lt(u),E&&lt(a),E&&lt(y),E&&lt(v)}}}function zo(t){let e;function n(o,s){return o[0]?No:Ro}let r=n(t),i=r(t);return{c(){e=Y("div"),i.c(),D(e,"class","detail-card svelte-b094ih"),Ct(e,"left",t[3]+"px"),Ct(e,"top",t[4]+"px")},m(o,s){ft(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null))),s&8&&Ct(e,"left",o[3]+"px"),s&16&&Ct(e,"top",o[4]+"px")},i:Dt,o:Dt,d(o){o&&lt(e),i.d()}}}function Io(t,e,n){let{hoveredData:r}=e,{domainColumn:i}=e,{data:o}=e,{colorScale:s}=e,{posX:l=0}=e,{posY:u=0}=e;return wn(()=>{s.domain(o.map(a=>a[i]))}),t.$$set=a=>{"hoveredData"in a&&n(0,r=a.hoveredData),"domainColumn"in a&&n(1,i=a.domainColumn),"data"in a&&n(5,o=a.data),"colorScale"in a&&n(2,s=a.colorScale),"posX"in a&&n(3,l=a.posX),"posY"in a&&n(4,u=a.posY)},[r,i,s,l,u,o]}class Oo extends Qe{constructor(e){super(),Ke(this,e,Io,zo,Ye,{hoveredData:0,domainColumn:1,data:5,colorScale:2,posX:3,posY:4})}}var Lo={value:()=>{}};function Sn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Te(n)}function Te(t){this._=t}function Po(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Te.prototype=Sn.prototype={constructor:Te,on:function(t,e){var n=this._,r=Po(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Fo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=ir(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ir(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Te(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Fo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ir(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Lo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var dn="http://www.w3.org/1999/xhtml";const or={svg:"http://www.w3.org/2000/svg",xhtml:dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ge(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),or.hasOwnProperty(e)?{space:or[e],local:t}:t}function Vo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dn&&e.documentElement.namespaceURI===dn?e.createElement(t):e.createElementNS(n,t)}}function qo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xr(t){var e=Ge(t);return(e.local?qo:Vo)(e)}function Xo(){}function En(t){return t==null?Xo:function(){return this.querySelector(t)}}function Bo(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=new Array(s),u,a,f=0;f<s;++f)(u=o[f])&&(a=t.call(u,u.__data__,f,o))&&("__data__"in u&&(a.__data__=u.__data__),l[f]=a);return new Rt(r,this._parents)}function Ho(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Yo(){return[]}function Br(t){return t==null?Yo:function(){return this.querySelectorAll(t)}}function Uo(t){return function(){return Ho(t.apply(this,arguments))}}function Wo(t){typeof t=="function"?t=Uo(t):t=Br(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(r.push(t.call(u,u.__data__,a,s)),i.push(u));return new Rt(r,i)}function Hr(t){return function(){return this.matches(t)}}function Yr(t){return function(e){return e.matches(t)}}var Ko=Array.prototype.find;function Qo(t){return function(){return Ko.call(this.children,t)}}function Go(){return this.firstElementChild}function Zo(t){return this.select(t==null?Go:Qo(typeof t=="function"?t:Yr(t)))}var jo=Array.prototype.filter;function Jo(){return Array.from(this.children)}function $o(t){return function(){return jo.call(this.children,t)}}function ts(t){return this.selectAll(t==null?Jo:$o(typeof t=="function"?t:Yr(t)))}function es(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new Rt(r,this._parents)}function Ur(t){return new Array(t.length)}function ns(){return new Rt(this._enter||this._groups.map(Ur),this._parents)}function Ve(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ve.prototype={constructor:Ve,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function rs(t){return function(){return t}}function is(t,e,n,r,i,o){for(var s=0,l,u=e.length,a=o.length;s<a;++s)(l=e[s])?(l.__data__=o[s],r[s]=l):n[s]=new Ve(t,o[s]);for(;s<u;++s)(l=e[s])&&(i[s]=l)}function os(t,e,n,r,i,o,s){var l,u,a=new Map,f=e.length,c=o.length,y=new Array(f),v;for(l=0;l<f;++l)(u=e[l])&&(y[l]=v=s.call(u,u.__data__,l,e)+"",a.has(v)?i[l]=u:a.set(v,u));for(l=0;l<c;++l)v=s.call(t,o[l],l,o)+"",(u=a.get(v))?(r[l]=u,u.__data__=o[l],a.delete(v)):n[l]=new Ve(t,o[l]);for(l=0;l<f;++l)(u=e[l])&&a.get(y[l])===u&&(i[l]=u)}function ss(t){return t.__data__}function as(t,e){if(!arguments.length)return Array.from(this,ss);var n=e?os:is,r=this._parents,i=this._groups;typeof t!="function"&&(t=rs(t));for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),a=0;a<o;++a){var f=r[a],c=i[a],y=c.length,v=ls(t.call(f,f&&f.__data__,a,r)),b=v.length,T=l[a]=new Array(b),E=s[a]=new Array(b),A=u[a]=new Array(y);n(f,c,T,E,A,v,e);for(var at=0,j=0,U,et;at<b;++at)if(U=T[at]){for(at>=j&&(j=at+1);!(et=E[j])&&++j<b;);U._next=et||null}}return s=new Rt(s,r),s._enter=l,s._exit=u,s}function ls(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function us(){return new Rt(this._exit||this._groups.map(Ur),this._parents)}function fs(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function cs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),l=new Array(i),u=0;u<s;++u)for(var a=n[u],f=r[u],c=a.length,y=l[u]=new Array(c),v,b=0;b<c;++b)(v=a[b]||f[b])&&(y[b]=v);for(;u<i;++u)l[u]=n[u];return new Rt(l,this._parents)}function hs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ds(t){t||(t=ps);function e(c,y){return c&&y?t(c.__data__,y.__data__):!c-!y}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],l=s.length,u=i[o]=new Array(l),a,f=0;f<l;++f)(a=s[f])&&(u[f]=a);u.sort(e)}return new Rt(i,this._parents).order()}function ps(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ms(){return Array.from(this)}function _s(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ys(){let t=0;for(const e of this)++t;return t}function ws(){return!this.node()}function vs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,l;o<s;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function bs(t){return function(){this.removeAttribute(t)}}function xs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ks(t,e){return function(){this.setAttribute(t,e)}}function Ms(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ss(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Es(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Cs(t,e){var n=Ge(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?xs:bs:typeof e=="function"?n.local?Es:Ss:n.local?Ms:ks)(n,e))}function Wr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function As(t){return function(){this.style.removeProperty(t)}}function Ts(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ds(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Rs(t,e,n){return arguments.length>1?this.each((e==null?As:typeof e=="function"?Ds:Ts)(t,e,n==null?"":n)):oe(this.node(),t)}function oe(t,e){return t.style.getPropertyValue(e)||Wr(t).getComputedStyle(t,null).getPropertyValue(e)}function Ns(t){return function(){delete this[t]}}function zs(t,e){return function(){this[t]=e}}function Is(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Os(t,e){return arguments.length>1?this.each((e==null?Ns:typeof e=="function"?Is:zs)(t,e)):this.node()[t]}function Kr(t){return t.trim().split(/^|\s+/)}function Cn(t){return t.classList||new Qr(t)}function Qr(t){this._node=t,this._names=Kr(t.getAttribute("class")||"")}Qr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gr(t,e){for(var n=Cn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Zr(t,e){for(var n=Cn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ls(t){return function(){Gr(this,t)}}function Ps(t){return function(){Zr(this,t)}}function Fs(t,e){return function(){(e.apply(this,arguments)?Gr:Zr)(this,t)}}function Vs(t,e){var n=Kr(t+"");if(arguments.length<2){for(var r=Cn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Fs:e?Ls:Ps)(n,e))}function qs(){this.textContent=""}function Xs(t){return function(){this.textContent=t}}function Bs(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Hs(t){return arguments.length?this.each(t==null?qs:(typeof t=="function"?Bs:Xs)(t)):this.node().textContent}function Ys(){this.innerHTML=""}function Us(t){return function(){this.innerHTML=t}}function Ws(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Ks(t){return arguments.length?this.each(t==null?Ys:(typeof t=="function"?Ws:Us)(t)):this.node().innerHTML}function Qs(){this.nextSibling&&this.parentNode.appendChild(this)}function Gs(){return this.each(Qs)}function Zs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function js(){return this.each(Zs)}function Js(t){var e=typeof t=="function"?t:Xr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $s(){return null}function ta(t,e){var n=typeof t=="function"?t:Xr(t),r=e==null?$s:typeof e=="function"?e:En(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ea(){var t=this.parentNode;t&&t.removeChild(this)}function na(){return this.each(ea)}function ra(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ia(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oa(t){return this.select(t?ia:ra)}function sa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function aa(t){return function(e){t.call(this,e,this.__data__)}}function la(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ua(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function fa(t,e,n){return function(){var r=this.__on,i,o=aa(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ca(t,e,n){var r=la(t+""),i,o=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,f;u<a;++u)for(i=0,f=l[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?fa:ua,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function jr(t,e,n){var r=Wr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ha(t,e){return function(){return jr(this,t,e)}}function da(t,e){return function(){return jr(this,t,e.apply(this,arguments))}}function pa(t,e){return this.each((typeof e=="function"?da:ha)(t,e))}function*ga(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Jr=[null];function Rt(t,e){this._groups=t,this._parents=e}function ye(){return new Rt([[document.documentElement]],Jr)}function ma(){return this}Rt.prototype=ye.prototype={constructor:Rt,select:Bo,selectAll:Wo,selectChild:Zo,selectChildren:ts,filter:es,data:as,enter:ns,exit:us,join:fs,merge:cs,selection:ma,order:hs,sort:ds,call:gs,nodes:ms,node:_s,size:ys,empty:ws,each:vs,attr:Cs,style:Rs,property:Os,classed:Vs,text:Hs,html:Ks,raise:Gs,lower:js,append:Js,insert:ta,remove:na,clone:oa,datum:sa,on:ca,dispatch:pa,[Symbol.iterator]:ga};function Wt(t){return typeof t=="string"?new Rt([[document.querySelector(t)]],[document.documentElement]):new Rt([[t]],Jr)}function _a(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qt(t,e){if(t=_a(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const pn={capture:!0,passive:!1};function gn(t){t.preventDefault(),t.stopImmediatePropagation()}function ya(t){var e=t.document.documentElement,n=Wt(t).on("dragstart.drag",gn,pn);"onselectstart"in e?n.on("selectstart.drag",gn,pn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wa(t,e){var n=t.document.documentElement,r=Wt(t).on("dragstart.drag",null);e&&(r.on("click.drag",gn,pn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var se=0,fe=0,ae=0,$r=1e3,qe,ce,Xe=0,te=0,Ze=0,me=typeof performance=="object"&&performance.now?performance:Date,ti=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function An(){return te||(ti(va),te=me.now()+Ze)}function va(){te=0}function Be(){this._call=this._time=this._next=null}Be.prototype=ei.prototype={constructor:Be,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?An():+n)+(e==null?0:+e),!this._next&&ce!==this&&(ce?ce._next=this:qe=this,ce=this),this._call=t,this._time=n,mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,mn())}};function ei(t,e,n){var r=new Be;return r.restart(t,e,n),r}function ba(){An(),++se;for(var t=qe,e;t;)(e=te-t._time)>=0&&t._call.call(void 0,e),t=t._next;--se}function sr(){te=(Xe=me.now())+Ze,se=fe=0;try{ba()}finally{se=0,ka(),te=0}}function xa(){var t=me.now(),e=t-Xe;e>$r&&(Ze-=e,Xe=t)}function ka(){for(var t,e=qe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);ce=t,mn(r)}function mn(t){if(!se){fe&&(fe=clearTimeout(fe));var e=t-te;e>24?(t<1/0&&(fe=setTimeout(sr,t-me.now()-Ze)),ae&&(ae=clearInterval(ae))):(ae||(Xe=me.now(),ae=setInterval(xa,$r)),se=1,ti(sr))}}function ar(t,e,n){var r=new Be;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ma=Sn("start","end","cancel","interrupt"),Sa=[],ni=0,lr=1,_n=2,De=3,ur=4,yn=5,Re=6;function je(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ea(t,n,{name:e,index:r,group:i,on:Ma,tween:Sa,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ni})}function Tn(t,e){var n=Lt(t,e);if(n.state>ni)throw new Error("too late; already scheduled");return n}function Ft(t,e){var n=Lt(t,e);if(n.state>De)throw new Error("too late; already running");return n}function Lt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ea(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ei(o,0,n.time);function o(a){n.state=lr,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var f,c,y,v;if(n.state!==lr)return u();for(f in r)if(v=r[f],v.name===n.name){if(v.state===De)return ar(s);v.state===ur?(v.state=Re,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[f]):+f<e&&(v.state=Re,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[f])}if(ar(function(){n.state===De&&(n.state=ur,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=_n,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_n){for(n.state=De,i=new Array(y=n.tween.length),f=0,c=-1;f<y;++f)(v=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=v);i.length=c+1}}function l(a){for(var f=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=yn,1),c=-1,y=i.length;++c<y;)i[c].call(t,f);n.state===yn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Re,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function Ne(t,e){var n=t.__transition,r,i,o=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>_n&&r.state<yn,r.state=Re,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Ca(t){return this.each(function(){Ne(this,t)})}function Aa(t,e){var n,r;return function(){var i=Ft(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ta(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ft(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var l={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}o.tween=i}}function Da(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Lt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Aa:Ta)(n,t,e))}function Dn(t,e,n){var r=t._id;return t.each(function(){var i=Ft(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Lt(i,r).value[e]}}function ri(t,e){var n;return(typeof e=="number"?It:e instanceof $t?Le:(n=$t(e))?(e=n,Le):Or)(t,e)}function Ra(t){return function(){this.removeAttribute(t)}}function Na(t){return function(){this.removeAttributeNS(t.space,t.local)}}function za(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Ia(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Oa(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function La(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function Pa(t,e){var n=Ge(t),r=n==="transform"?no:ri;return this.attrTween(t,typeof e=="function"?(n.local?La:Oa)(n,r,Dn(this,"attr."+t,e)):e==null?(n.local?Na:Ra)(n):(n.local?Ia:za)(n,r,e))}function Fa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Va(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Va(t,o)),n}return i._value=e,i}function Xa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Fa(t,o)),n}return i._value=e,i}function Ba(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ge(t);return this.tween(n,(r.local?qa:Xa)(r,e))}function Ha(t,e){return function(){Tn(this,t).delay=+e.apply(this,arguments)}}function Ya(t,e){return e=+e,function(){Tn(this,t).delay=e}}function Ua(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ha:Ya)(e,t)):Lt(this.node(),e).delay}function Wa(t,e){return function(){Ft(this,t).duration=+e.apply(this,arguments)}}function Ka(t,e){return e=+e,function(){Ft(this,t).duration=e}}function Qa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Wa:Ka)(e,t)):Lt(this.node(),e).duration}function Ga(t,e){if(typeof e!="function")throw new Error;return function(){Ft(this,t).ease=e}}function Za(t){var e=this._id;return arguments.length?this.each(Ga(e,t)):Lt(this.node(),e).ease}function ja(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ft(this,t).ease=n}}function Ja(t){if(typeof t!="function")throw new Error;return this.each(ja(this._id,t))}function $a(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new Ht(r,this._parents,this._name,this._id)}function tl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var u=e[l],a=n[l],f=u.length,c=s[l]=new Array(f),y,v=0;v<f;++v)(y=u[v]||a[v])&&(c[v]=y);for(;l<r;++l)s[l]=e[l];return new Ht(s,this._parents,this._name,this._id)}function el(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function nl(t,e,n){var r,i,o=el(e)?Tn:Ft;return function(){var s=o(this,t),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}}function rl(t,e){var n=this._id;return arguments.length<2?Lt(this.node(),n).on.on(t):this.each(nl(n,t,e))}function il(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ol(){return this.on("end.remove",il(this._id))}function sl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=En(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l=r[s],u=l.length,a=o[s]=new Array(u),f,c,y=0;y<u;++y)(f=l[y])&&(c=t.call(f,f.__data__,y,l))&&("__data__"in f&&(c.__data__=f.__data__),a[y]=c,je(a[y],e,n,y,a,Lt(f,n)));return new Ht(o,this._parents,e,n)}function al(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Br(t));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var u=r[l],a=u.length,f,c=0;c<a;++c)if(f=u[c]){for(var y=t.call(f,f.__data__,c,u),v,b=Lt(f,n),T=0,E=y.length;T<E;++T)(v=y[T])&&je(v,e,n,T,y,b);o.push(y),s.push(f)}return new Ht(o,s,e,n)}var ll=ye.prototype.constructor;function ul(){return new ll(this._groups,this._parents)}function fl(t,e){var n,r,i;return function(){var o=oe(this,t),s=(this.style.removeProperty(t),oe(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function ii(t){return function(){this.style.removeProperty(t)}}function cl(t,e,n){var r,i=n+"",o;return function(){var s=oe(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function hl(t,e,n){var r,i,o;return function(){var s=oe(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),oe(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l))}}function dl(t,e){var n,r,i,o="style."+e,s="end."+o,l;return function(){var u=Ft(this,t),a=u.on,f=u.value[o]==null?l||(l=ii(e)):void 0;(a!==n||i!==f)&&(r=(n=a).copy()).on(s,i=f),u.on=r}}function pl(t,e,n){var r=(t+="")=="transform"?eo:ri;return e==null?this.styleTween(t,fl(t,r)).on("end.style."+t,ii(t)):typeof e=="function"?this.styleTween(t,hl(t,r,Dn(this,"style."+t,e))).each(dl(this._id,t)):this.styleTween(t,cl(t,r,e),n).on("end.style."+t,null)}function gl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ml(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&gl(t,s,n)),r}return o._value=e,o}function _l(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ml(t,e,n==null?"":n))}function yl(t){return function(){this.textContent=t}}function wl(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function vl(t){return this.tween("text",typeof t=="function"?wl(Dn(this,"text",t)):yl(t==null?"":t+""))}function bl(t){return function(e){this.textContent=t.call(this,e)}}function xl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&bl(i)),e}return r._value=t,r}function kl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,xl(t))}function Ml(){for(var t=this._name,e=this._id,n=oi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var f=Lt(u,e);je(u,t,n,a,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ht(r,this._parents,t,n)}function Sl(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var l={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var a=Ft(this,r),f=a.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&o()})}var El=0;function Ht(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function oi(){return++El}var Vt=ye.prototype;Ht.prototype={constructor:Ht,select:sl,selectAll:al,selectChild:Vt.selectChild,selectChildren:Vt.selectChildren,filter:$a,merge:tl,selection:ul,transition:Ml,call:Vt.call,nodes:Vt.nodes,node:Vt.node,size:Vt.size,empty:Vt.empty,each:Vt.each,on:rl,attr:Pa,attrTween:Ba,style:pl,styleTween:_l,text:vl,textTween:kl,remove:ol,tween:Da,delay:Ua,duration:Qa,ease:Za,easeVarying:Ja,end:Sl,[Symbol.iterator]:Vt[Symbol.iterator]};function Cl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Al={time:null,delay:0,duration:250,ease:Cl};function Tl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Dl(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=oi(),(n=Al).time=An(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&je(u,t,e,a,s,n||Tl(u,e));return new Ht(r,this._parents,t,e)}ye.prototype.interrupt=Ca;ye.prototype.transition=Dl;const Me=t=>()=>t;function Rl(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function qt(t,e,n){this.k=t,this.x=e,this.y=n}qt.prototype={constructor:qt,scale:function(t){return t===1?this:new qt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var He=new qt(1,0,0);qt.prototype;function en(t){t.stopImmediatePropagation()}function le(t){t.preventDefault(),t.stopImmediatePropagation()}function Nl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function zl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function fr(){return this.__zoom||He}function Il(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ol(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ll(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Pl(){var t=Nl,e=zl,n=Ll,r=Il,i=Ol,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=so,a=Sn("start","zoom","end"),f,c,y,v=500,b=150,T=0,E=10;function A(p){p.property("__zoom",fr).on("wheel.zoom",h,{passive:!1}).on("mousedown.zoom",d).on("dblclick.zoom",_).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",m).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(p,S,g,x){var C=p.selection?p.selection():p;C.property("__zoom",fr),p!==C?et(p,S,g,x):C.interrupt().each(function(){W(this,arguments).event(x).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},A.scaleBy=function(p,S,g,x){A.scaleTo(p,function(){var C=this.__zoom.k,k=typeof S=="function"?S.apply(this,arguments):S;return C*k},g,x)},A.scaleTo=function(p,S,g,x){A.transform(p,function(){var C=e.apply(this,arguments),k=this.__zoom,z=g==null?U(C):typeof g=="function"?g.apply(this,arguments):g,R=k.invert(z),V=typeof S=="function"?S.apply(this,arguments):S;return n(j(at(k,V),z,R),C,s)},g,x)},A.translateBy=function(p,S,g,x){A.transform(p,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),s)},null,x)},A.translateTo=function(p,S,g,x,C){A.transform(p,function(){var k=e.apply(this,arguments),z=this.__zoom,R=x==null?U(k):typeof x=="function"?x.apply(this,arguments):x;return n(He.translate(R[0],R[1]).scale(z.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof g=="function"?-g.apply(this,arguments):-g),k,s)},x,C)};function at(p,S){return S=Math.max(o[0],Math.min(o[1],S)),S===p.k?p:new qt(S,p.x,p.y)}function j(p,S,g){var x=S[0]-g[0]*p.k,C=S[1]-g[1]*p.k;return x===p.x&&C===p.y?p:new qt(p.k,x,C)}function U(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function et(p,S,g,x){p.on("start.zoom",function(){W(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(x).end()}).tween("zoom",function(){var C=this,k=arguments,z=W(C,k).event(x),R=e.apply(C,k),V=g==null?U(R):typeof g=="function"?g.apply(C,k):g,L=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),K=C.__zoom,nt=typeof S=="function"?S.apply(C,k):S,rt=u(K.invert(V).concat(L/K.k),nt.invert(V).concat(L/nt.k));return function(ht){if(ht===1)ht=nt;else{var q=rt(ht),tt=L/q[2];ht=new qt(tt,V[0]-q[0]*tt,V[1]-q[1]*tt)}z.zoom(null,ht)}})}function W(p,S,g){return!g&&p.__zooming||new B(p,S)}function B(p,S){this.that=p,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,S),this.taps=0}B.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,S){return this.mouse&&p!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var S=Wt(this.that).datum();a.call(p,this.that,new Rl(p,{sourceEvent:this.sourceEvent,target:A,type:p,transform:this.that.__zoom,dispatch:a}),S)}};function h(p,...S){if(!t.apply(this,arguments))return;var g=W(this,S).event(p),x=this.__zoom,C=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,r.apply(this,arguments)))),k=Qt(p);if(g.wheel)(g.mouse[0][0]!==k[0]||g.mouse[0][1]!==k[1])&&(g.mouse[1]=x.invert(g.mouse[0]=k)),clearTimeout(g.wheel);else{if(x.k===C)return;g.mouse=[k,x.invert(k)],Ne(this),g.start()}le(p),g.wheel=setTimeout(z,b),g.zoom("mouse",n(j(at(x,C),g.mouse[0],g.mouse[1]),g.extent,s));function z(){g.wheel=null,g.end()}}function d(p,...S){if(y||!t.apply(this,arguments))return;var g=p.currentTarget,x=W(this,S,!0).event(p),C=Wt(p.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",L,!0),k=Qt(p,g),z=p.clientX,R=p.clientY;ya(p.view),en(p),x.mouse=[k,this.__zoom.invert(k)],Ne(this),x.start();function V(K){if(le(K),!x.moved){var nt=K.clientX-z,rt=K.clientY-R;x.moved=nt*nt+rt*rt>T}x.event(K).zoom("mouse",n(j(x.that.__zoom,x.mouse[0]=Qt(K,g),x.mouse[1]),x.extent,s))}function L(K){C.on("mousemove.zoom mouseup.zoom",null),wa(K.view,x.moved),le(K),x.event(K).end()}}function _(p,...S){if(!!t.apply(this,arguments)){var g=this.__zoom,x=Qt(p.changedTouches?p.changedTouches[0]:p,this),C=g.invert(x),k=g.k*(p.shiftKey?.5:2),z=n(j(at(g,k),x,C),e.apply(this,S),s);le(p),l>0?Wt(this).transition().duration(l).call(et,z,x,p):Wt(this).call(A.transform,z,x,p)}}function M(p,...S){if(!!t.apply(this,arguments)){var g=p.touches,x=g.length,C=W(this,S,p.changedTouches.length===x).event(p),k,z,R,V;for(en(p),z=0;z<x;++z)R=g[z],V=Qt(R,this),V=[V,this.__zoom.invert(V),R.identifier],C.touch0?!C.touch1&&C.touch0[2]!==V[2]&&(C.touch1=V,C.taps=0):(C.touch0=V,k=!0,C.taps=1+!!f);f&&(f=clearTimeout(f)),k&&(C.taps<2&&(c=V[0],f=setTimeout(function(){f=null},v)),Ne(this),C.start())}}function m(p,...S){if(!!this.__zooming){var g=W(this,S).event(p),x=p.changedTouches,C=x.length,k,z,R,V;for(le(p),k=0;k<C;++k)z=x[k],R=Qt(z,this),g.touch0&&g.touch0[2]===z.identifier?g.touch0[0]=R:g.touch1&&g.touch1[2]===z.identifier&&(g.touch1[0]=R);if(z=g.that.__zoom,g.touch1){var L=g.touch0[0],K=g.touch0[1],nt=g.touch1[0],rt=g.touch1[1],ht=(ht=nt[0]-L[0])*ht+(ht=nt[1]-L[1])*ht,q=(q=rt[0]-K[0])*q+(q=rt[1]-K[1])*q;z=at(z,Math.sqrt(ht/q)),R=[(L[0]+nt[0])/2,(L[1]+nt[1])/2],V=[(K[0]+rt[0])/2,(K[1]+rt[1])/2]}else if(g.touch0)R=g.touch0[0],V=g.touch0[1];else return;g.zoom("touch",n(j(z,R,V),g.extent,s))}}function P(p,...S){if(!!this.__zooming){var g=W(this,S).event(p),x=p.changedTouches,C=x.length,k,z;for(en(p),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),k=0;k<C;++k)z=x[k],g.touch0&&g.touch0[2]===z.identifier?delete g.touch0:g.touch1&&g.touch1[2]===z.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(z=Qt(z,this),Math.hypot(c[0]-z[0],c[1]-z[1])<E)){var R=Wt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return A.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Me(+p),A):r},A.filter=function(p){return arguments.length?(t=typeof p=="function"?p:Me(!!p),A):t},A.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Me(!!p),A):i},A.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Me([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),A):e},A.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],A):[o[0],o[1]]},A.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],A):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},A.constrain=function(p){return arguments.length?(n=p,A):n},A.duration=function(p){return arguments.length?(l=+p,A):l},A.interpolate=function(p){return arguments.length?(u=p,A):u},A.on=function(){var p=a.on.apply(a,arguments);return p===a?A:p},A.clickDistance=function(p){return arguments.length?(T=(p=+p)*p,A):Math.sqrt(T)},A.tapDistance=function(p){return arguments.length?(E=+p,A):E},A}function cr(t){let e,n;return e=new Oo({props:{hoveredData:t[6],data:t[0],domainColumn:t[1],colorScale:t[9],posX:t[7],posY:t[8]}}),{c(){vn(e.$$.fragment)},m(r,i){Ue(e,r,i),n=!0},p(r,i){const o={};i[0]&64&&(o.hoveredData=r[6]),i[0]&1&&(o.data=r[0]),i[0]&2&&(o.domainColumn=r[1]),i[0]&512&&(o.colorScale=r[9]),i[0]&128&&(o.posX=r[7]),i[0]&256&&(o.posY=r[8]),e.$set(o)},i(r){n||(Bt(e.$$.fragment,r),n=!0)},o(r){jt(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function Fl(t){let e,n,r,i,o,s,l,u,a,f,c,y,v,b=t[6]&&cr(t);return{c(){e=Y("div"),n=Y("div"),r=Y("button"),r.textContent="+",i=ut(),o=Y("button"),o.textContent="\u2212",s=ut(),l=Y("button"),l.textContent="\u27F2",u=ut(),a=Y("canvas"),f=ut(),b&&b.c(),D(r,"class","zoom-btn svelte-1q7voxg"),D(r,"aria-label","Zoom in"),D(r,"title","Zoom in"),D(o,"class","zoom-btn svelte-1q7voxg"),D(o,"aria-label","Zoom out"),D(o,"title","Zoom out"),D(l,"class","zoom-btn svelte-1q7voxg"),D(l,"aria-label","Reset zoom"),D(l,"title","Reset zoom"),D(n,"class","zoom-controls svelte-1q7voxg"),D(n,"aria-label","Zoom controls"),D(a,"width",t[2]),D(a,"height",t[3]),D(a,"class","svelte-1q7voxg"),D(e,"class","chart-container svelte-1q7voxg")},m(T,E){ft(T,e,E),I(e,n),I(n,r),I(n,i),I(n,o),I(n,s),I(n,l),I(e,u),I(e,a),t[32](a),I(e,f),b&&b.m(e,null),t[33](e),c=!0,y||(v=[mt(r,"click",t[13]),mt(o,"click",t[14]),mt(l,"click",t[15]),mt(a,"mousemove",t[10]),mt(a,"mouseleave",t[12]),mt(a,"click",t[11])],y=!0)},p(T,E){(!c||E[0]&4)&&D(a,"width",T[2]),(!c||E[0]&8)&&D(a,"height",T[3]),T[6]?b?(b.p(T,E),E[0]&64&&Bt(b,1)):(b=cr(T),b.c(),Bt(b,1),b.m(e,null)):b&&(Sr(),jt(b,1,1,()=>{b=null}),Er())},i(T){c||(Bt(b),c=!0)},o(T){jt(b),c=!1},d(T){T&&lt(e),t[32](null),b&&b.d(),t[33](null),y=!1,Yt(v)}}}const Se=6,Vl=.5,ql=20,hr=280,dr=160;function Xl(t,e,n){let r,i,o,s,l,u,a,f,c,y,v,b,T,{data:E=[]}=e,{domainColumn:A=""}=e,{opacity:at=1}=e,{selectedValues:j=new Set}=e,{searchQuery:U=""}=e,{showAnnotations:et=!0}=e,{highlightedData:W=[]}=e,{startDate:B=null}=e,{endDate:h=null}=e,d=[],_,M,m,P=800,p=600;const S={top:20,right:20,bottom:20,left:20};let g=null,x=null,C=He,k,z,R=0,V=0,L,K=1;function nt(){if(!_||!M)return;const w=M.getBoundingClientRect();w.width>0&&w.height>0&&(n(2,P=Math.floor(w.width)),n(3,p=Math.floor(w.height))),K=Math.max(window.devicePixelRatio||1,1),n(4,_.style.width="100%",_),n(4,_.style.height="100%",_),n(4,_.width=Math.max(1,Math.floor(P*K)),_),n(4,_.height=Math.max(1,Math.floor(p*K)),_),n(23,m=_.getContext("2d")),m.setTransform(K,0,0,K,0,0)}function rt(){if(!(!m||!E.length)){if(m.clearRect(0,0,P,p),m.save(),m.translate(C.x,C.y),m.scale(C.k,C.k),E.forEach(w=>{var st,wt;const O=U&&(((st=w.text)==null?void 0:st.toLowerCase().includes(U.toLowerCase()))||((wt=w.title)==null?void 0:wt.toLowerCase().includes(U.toLowerCase()))),Z=r.has(w.id)||O,Q=j.has(w[A]),it=(!B||w.date>=B)&&(!h||w.date<=h);m.beginPath(),m.arc(S.left+a(w.x),S.top+y(w.y),Math.max(.5,Se/C.k),0,Math.PI*2),n(23,m.fillStyle=L(w[A]),m),(Z||Q)&&it&&!T||it&&!T&&j.size===0||(Z||Q)&&T?n(23,m.globalAlpha=1,m):n(23,m.globalAlpha=at*.2,m),m.fill(),n(23,m.globalAlpha=1,m)}),et&&d.forEach(w=>{n(23,m.globalAlpha=1,m),m.beginPath(),m.arc(w.x,w.y,w.radius,0,Math.PI*2),n(23,m.strokeStyle="red",m),n(23,m.lineWidth=2,m),m.setLineDash([5,5]),m.stroke();const O=180,Z=12;n(23,m.font="16px Arial",m);const Q=w.x+w.label_x,it=w.y+w.label_y;let st=0,wt=0,pt=[];if(w.label){const vt=w.label.split(" ");let St="";vt.forEach(($,bt)=>{const Nt=St+$+" ";m.measureText(Nt).width>O&&bt>0?(pt.push(St),st=Math.max(st,m.measureText(St).width),St=$+" "):St=Nt}),pt.push(St),st=Math.max(st,m.measureText(St).width),wt=Z*pt.length}const ot=Q,G=it-Z,gt=st,kt=wt;let Mt,Et;w.x<ot?Mt=ot:w.x>ot+gt?Mt=ot+gt:Mt=w.x,w.y<G?Et=G:w.y>G+kt?Et=G+kt:Et=w.y;const xt=Math.atan2(Et-w.y,Mt-w.x),_t=w.x+w.radius*Math.cos(xt),At=w.y+w.radius*Math.sin(xt);if(m.setLineDash([]),m.beginPath(),m.moveTo(_t,At),m.lineTo(Mt,Et),n(23,m.strokeStyle="red",m),n(23,m.lineWidth=1,m),m.stroke(),w.label){n(23,m.font="16px Arial",m),n(23,m.fillStyle="red",m);const vt=16;pt.forEach((St,$)=>{m.fillText(St,Q,it+$*vt)})}}),m.setLineDash([]),g){const w=S.left+a(g.x),O=S.top+y(g.y);m.beginPath(),m.arc(w,O,Math.max(.5,Se/C.k),0,Math.PI*2),n(23,m.fillStyle=L(g[A]),m),n(23,m.globalAlpha=1,m),m.fill(),n(23,m.strokeStyle="black",m),n(23,m.lineWidth=Math.max(1,2/C.k),m),m.stroke();const[Z,Q]=[C.applyX(w),C.applyY(O)];let it=Z+12;it+hr>P-S.right&&(it=Z-12-hr);let st=Q-dr*.5;const wt=S.top+8,pt=p-S.bottom-(dr+8);st=Math.max(wt,Math.min(st,pt)),n(7,R=it),n(8,V=st)}m.restore()}}function ht(w){const O=_.getBoundingClientRect(),Z=P/O.width,Q=p/O.height,it=(w.clientX-O.left)*Z,st=(w.clientY-O.top)*Q,[wt,pt]=C.invert([it,st]),ot=E.find(G=>{var Nt;const gt=S.left+a(G.x),kt=S.top+y(G.y),Mt=gt-wt,Et=kt-pt,xt=Math.sqrt(Mt*Mt+Et*Et)<(Se+3)/C.k,_t=U&&((Nt=G.title)==null?void 0:Nt.toLowerCase().includes(U.toLowerCase())),At=r.has(G.id)||_t,vt=j.has(G[A]),St=(!B||G.date>=B)&&(!h||G.date<=h),bt=j.size===0||j.size===i||(At||vt)&&St&&!T||St&&!T&&j.size===0||(At||vt)&&T;return xt&&bt});ot?(n(6,g=ot),x=ot,n(4,_.style.cursor="pointer",_)):(n(6,g=null),x=null,n(4,_.style.cursor="crosshair",_)),rt()}function q(w){const O=_.getBoundingClientRect(),Z=P/O.width,Q=p/O.height,it=(w.clientX-O.left)*Z,st=(w.clientY-O.top)*Q,[wt,pt]=C.invert([it,st]),ot=E.find(gt=>{var Kt,Rn;const kt=S.left+a(gt.x),Mt=S.top+y(gt.y),Et=kt-wt,xt=Mt-pt,_t=Math.sqrt(Et*Et+xt*xt)<(Se+3)/C.k,At=U&&(((Kt=gt.text)==null?void 0:Kt.toLowerCase().includes(U.toLowerCase()))||((Rn=gt.title)==null?void 0:Rn.toLowerCase().includes(U.toLowerCase()))),vt=r.has(gt.id)||At,St=j.has(gt[A]),$=(!B||gt.date>=B)&&(!h||gt.date<=h),Nt=j.size===0||j.size===i||(vt||St)&&$&&!T||$&&!T&&j.size===0||(vt||St)&&T;return _t&&Nt});if(!ot)return;const G=ot.url||ot.link||ot.href||ot.permalink;G&&typeof window<"u"&&window.open(G,"_blank","noopener,noreferrer")}function tt(){n(6,g=x),rt()}let ct;wn(()=>(n(23,m=_.getContext("2d")),nt(),window.ResizeObserver&&(ct=new ResizeObserver(()=>{nt(),rt()}),ct.observe(M)),k=Pl().scaleExtent([Vl,ql]).filter(w=>{const O=w;return O.type==="wheel"||O.type==="touchstart"||O.type==="touchmove"?!0:O.type==="mousedown"?O.button===0&&!O.ctrlKey&&!O.metaKey&&!O.shiftKey:!O.ctrlKey&&!O.metaKey&&!O.shiftKey}).on("zoom",w=>{C=w.transform,rt()}),z=Wt(_),z.call(k),rt(),()=>{ct&&ct.disconnect()}));function J(w,O){var it;if((it=O==null?void 0:O.stopPropagation)==null||it.call(O),!z||!k)return;const Z=P/2,Q=p/2;z.transition().duration(200).call(k.scaleBy,w,[Z,Q])}function dt(w){J(1.25,w)}function N(w){J(1/1.25,w)}function H(w){var O;(O=w==null?void 0:w.stopPropagation)==null||O.call(w),!(!z||!k)&&z.transition().duration(200).call(k.transform,He)}function F(w){Xt[w?"unshift":"push"](()=>{_=w,n(4,_)})}function X(w){Xt[w?"unshift":"push"](()=>{M=w,n(5,M)})}return t.$$set=w=>{"data"in w&&n(0,E=w.data),"domainColumn"in w&&n(1,A=w.domainColumn),"opacity"in w&&n(16,at=w.opacity),"selectedValues"in w&&n(17,j=w.selectedValues),"searchQuery"in w&&n(18,U=w.searchQuery),"showAnnotations"in w&&n(19,et=w.showAnnotations),"highlightedData"in w&&n(20,W=w.highlightedData),"startDate"in w&&n(21,B=w.startDate),"endDate"in w&&n(22,h=w.endDate)},t.$$.update=()=>{t.$$.dirty[0]&1048576&&(r=new Set(W.map(w=>w.id))),t.$$.dirty[0]&3&&(i=new Set(E.map(w=>w[A])).size),t.$$.dirty[0]&4&&n(29,o=P-S.left-S.right),t.$$.dirty[0]&8&&n(26,s=p-S.top-S.bottom),t.$$.dirty[0]&1&&n(31,l=[qn(E,w=>w.x),Vn(E,w=>w.x)]),t.$$.dirty[1]&1&&n(30,u=l[0]===l[1]?[l[0]-1,l[1]+1]:l),t.$$.dirty[0]&1610612736&&(a=hn().domain(u).range([0,o])),t.$$.dirty[0]&1&&n(28,f=[qn(E,w=>w.y),Vn(E,w=>w.y)]),t.$$.dirty[0]&268435456&&n(27,c=f[0]===f[1]?[f[0]-1,f[1]+1]:f),t.$$.dirty[0]&201326592&&(y=hn().domain(c).range([s,0])),t.$$.dirty[0]&3&&n(9,L=Rr(Do).domain(A?[...new Set(E.map(w=>w[A]).filter(w=>w!=null&&w!==""))]:[])),t.$$.dirty[0]&1&&n(25,v=E.length?new Date(Math.min(...E.map(w=>w.date.getTime()))):null),t.$$.dirty[0]&1&&n(24,b=E.length?new Date(Math.max(...E.map(w=>w.date.getTime()))):null),t.$$.dirty[0]&56623104&&(T=!!(B&&h&&v&&b&&B.getTime()===v.getTime()&&h.getTime()===b.getTime())),t.$$.dirty[0]&15663107&&m&&E.length&&rt()},[E,A,P,p,_,M,g,R,V,L,ht,q,tt,dt,N,H,at,j,U,et,W,B,h,m,b,v,s,c,f,o,u,l,F,X]}class Bl extends Qe{constructor(e){super(),Ke(this,e,Xl,Fl,Ye,{data:0,domainColumn:1,opacity:16,selectedValues:17,searchQuery:18,showAnnotations:19,highlightedData:20,startDate:21,endDate:22},null,[-1,-1])}}function Hl(t){let e,n,r,i,o,s,l,u,a;return{c(){e=Y("div"),n=Y("div"),r=Y("div"),i=ut(),o=Y("div"),s=ut(),l=Y("div"),D(r,"class","track-inner svelte-vytkle"),D(n,"class","track svelte-vytkle"),D(o,"class","thumb start-thumb svelte-vytkle"),Ct(o,"left",t[4]+"%"),D(l,"class","thumb end-thumb svelte-vytkle"),Ct(l,"left",t[3]+"%"),D(e,"class","range-slider svelte-vytkle"),Ct(e,"--start-percent",t[4]+"%"),Ct(e,"--end-percent",t[3]+"%")},m(f,c){ft(f,e,c),I(e,n),I(n,r),I(e,i),I(e,o),t[13](o),I(e,s),I(e,l),t[16](l),t[19](e),u||(a=[mt(r,"mousedown",t[11]),mt(r,"touchstart",t[12]),mt(o,"mousedown",t[14]),mt(o,"touchstart",t[15]),mt(l,"mousedown",t[17]),mt(l,"touchstart",t[18])],u=!0)},p(f,[c]){c&16&&Ct(o,"left",f[4]+"%"),c&8&&Ct(l,"left",f[3]+"%"),c&16&&Ct(e,"--start-percent",f[4]+"%"),c&8&&Ct(e,"--end-percent",f[3]+"%")},i:Dt,o:Dt,d(f){f&&lt(e),t[13](null),t[16](null),t[19](null),u=!1,Yt(a)}}}function Yl(t,e,n){let r,i,{min:o=0}=e,{max:s=100}=e,{startValue:l}=e,{endValue:u}=e;const a=hi();let f,c,y,v=!1,b=null,T=null,E=0;function A(g,x){v=!0,b=x,T=f.getBoundingClientRect(),x==="range"&&(E=u-l),window.addEventListener("mousemove",at),window.addEventListener("mouseup",j)}function at(g){if(!v)return;const x=Math.min(Math.max(0,(g.clientX-T.left)/T.width),1),C=Math.round(x*(s-o)+o);if(b==="start")n(7,l=Math.min(C,u)),a("startChange",l);else if(b==="end")n(8,u=Math.max(C,l)),a("endChange",u);else if(b==="range"){let k=C-Math.floor(E/2),z=C+Math.ceil(E/2);k<o&&(k=o,z=o+E),z>s&&(z=s,k=s-E),k=Math.max(o,k),z=Math.min(s,z),n(7,l=k),n(8,u=z),a("startChange",l),a("endChange",u)}}function j(){v=!1,window.removeEventListener("mousemove",at),window.removeEventListener("mouseup",j)}function U(g,x){g.preventDefault(),v=!0,b=x,T=f.getBoundingClientRect(),x==="range"&&(E=u-l),window.addEventListener("touchmove",et,{passive:!1}),window.addEventListener("touchend",W)}function et(g){if(g.preventDefault(),!v)return;const x=g.touches[0],C=Math.min(Math.max(0,(x.clientX-T.left)/T.width),1),k=Math.round(C*(s-o)+o);if(b==="start")n(7,l=Math.min(k,u)),a("startChange",l);else if(b==="end")n(8,u=Math.max(k,l)),a("endChange",u);else if(b==="range"){let z=k-Math.floor(E/2),R=k+Math.ceil(E/2);z<o&&(z=o,R=o+E),R>s&&(R=s,z=s-E),z=Math.max(o,z),R=Math.min(s,R),n(7,l=z),n(8,u=R),a("startChange",l),a("endChange",u)}}function W(){v=!1,window.removeEventListener("touchmove",et),window.removeEventListener("touchend",W)}const B=g=>A(g,"range"),h=g=>U(g,"range");function d(g){Xt[g?"unshift":"push"](()=>{c=g,n(1,c)})}const _=g=>A(g,"start"),M=g=>U(g,"start");function m(g){Xt[g?"unshift":"push"](()=>{y=g,n(2,y)})}const P=g=>A(g,"end"),p=g=>U(g,"end");function S(g){Xt[g?"unshift":"push"](()=>{f=g,n(0,f)})}return t.$$set=g=>{"min"in g&&n(9,o=g.min),"max"in g&&n(10,s=g.max),"startValue"in g&&n(7,l=g.startValue),"endValue"in g&&n(8,u=g.endValue)},t.$$.update=()=>{t.$$.dirty&1664&&n(4,r=s>o?(l-o)/(s-o)*100:0),t.$$.dirty&1792&&n(3,i=s>o?(u-o)/(s-o)*100:100)},[f,c,y,i,r,A,U,l,u,o,s,B,h,d,_,M,m,P,p,S]}class Ul extends Qe{constructor(e){super(),Ke(this,e,Yl,Hl,Ye,{min:9,max:10,startValue:7,endValue:8})}}function pr(t,e,n){const r=t.slice();return r[49]=e[n],r}function gr(t,e,n){const r=t.slice();return r[52]=e[n],r}function mr(t){let e,n,r,i,o,s,l=t[9],u=[];for(let a=0;a<l.length;a+=1)u[a]=_r(gr(t,l,a));return{c(){e=Y("label"),e.textContent="\u{1F3A8} Color by Column:",n=ut(),r=Y("select"),i=Y("option"),i.textContent="Select column";for(let a=0;a<u.length;a+=1)u[a].c();D(e,"for","domain-column"),D(e,"class","svelte-iw13yy"),i.__value="",i.value=i.__value,i.disabled=!0,D(r,"id","domain-column"),D(r,"class","svelte-iw13yy"),t[0]===void 0&&ze(()=>t[29].call(r))},m(a,f){ft(a,e,f),ft(a,n,f),ft(a,r,f),I(r,i);for(let c=0;c<u.length;c+=1)u[c].m(r,null);In(r,t[0]),o||(s=[mt(r,"change",t[20]),mt(r,"change",t[29])],o=!0)},p(a,f){if(f[0]&512){l=a[9];let c;for(c=0;c<l.length;c+=1){const y=gr(a,l,c);u[c]?u[c].p(y,f):(u[c]=_r(y),u[c].c(),u[c].m(r,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=l.length}f[0]&513&&In(r,a[0])},d(a){a&&lt(e),a&&lt(n),a&&lt(r),xr(u,a),o=!1,Yt(s)}}}function _r(t){let e,n=t[52]+"",r,i;return{c(){e=Y("option"),r=yt(n),e.__value=i=t[52],e.value=e.__value},m(o,s){ft(o,e,s),I(e,r)},p(o,s){s[0]&512&&n!==(n=o[52]+"")&&zt(r,n),s[0]&512&&i!==(i=o[52])&&(e.__value=i,e.value=e.__value)},d(o){o&&lt(e)}}}function yr(t){let e,n,r,i,o,s=t[1],l=[];for(let u=0;u<s.length;u+=1)l[u]=wr(pr(t,s,u));return{c(){e=Y("label"),e.textContent="\u2728 Highlight Values:",n=ut(),r=Y("select");for(let u=0;u<l.length;u+=1)l[u].c();D(e,"for","value-select"),D(e,"class","svelte-iw13yy"),D(r,"id","value-select"),r.multiple=!0,D(r,"size","5"),D(r,"class","multi-select svelte-iw13yy")},m(u,a){ft(u,e,a),ft(u,n,a),ft(u,r,a);for(let f=0;f<l.length;f+=1)l[f].m(r,null);i||(o=mt(r,"change",t[21]),i=!0)},p(u,a){if(a[0]&2){s=u[1];let f;for(f=0;f<s.length;f+=1){const c=pr(u,s,f);l[f]?l[f].p(c,a):(l[f]=wr(c),l[f].c(),l[f].m(r,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=s.length}},d(u){u&&lt(e),u&&lt(n),u&&lt(r),xr(l,u),i=!1,o()}}}function wr(t){let e,n=t[49]+"",r,i;return{c(){e=Y("option"),r=yt(n),e.__value=i=t[49],e.value=e.__value},m(o,s){ft(o,e,s),I(e,r)},p(o,s){s[0]&2&&n!==(n=o[49]+"")&&zt(r,n),s[0]&2&&i!==(i=o[49])&&(e.__value=i,e.value=e.__value)},d(o){o&&lt(e)}}}function Wl(t){let e;return{c(){e=yt("\u25B6")},m(n,r){ft(n,e,r)},d(n){n&&lt(e)}}}function Kl(t){let e;return{c(){e=yt("\u275A\u275A")},m(n,r){ft(n,e,r)},d(n){n&&lt(e)}}}function Ql(t){let e;return{c(){e=Y("p"),e.textContent="Waiting for data"},m(n,r){ft(n,e,r)},p:Dt,i:Dt,o:Dt,d(n){n&&lt(e)}}}function Gl(t){let e,n,r;function i(f,c){return f[16]==="downloading"?$l:f[16]==="parsing"?Jl:jl}let o=i(t),s=o(t);function l(f,c){return f[16]==="downloading"?eu:tu}let u=l(t),a=u(t);return{c(){e=Y("div"),n=Y("div"),s.c(),r=ut(),a.c(),D(n,"class","progress-header svelte-iw13yy"),D(e,"class","progress-wrap svelte-iw13yy")},m(f,c){ft(f,e,c),I(e,n),s.m(n,null),I(e,r),a.m(e,null)},p(f,c){o!==(o=i(f))&&(s.d(1),s=o(f),s&&(s.c(),s.m(n,null))),u===(u=l(f))&&a?a.p(f,c):(a.d(1),a=u(f),a&&(a.c(),a.m(e,null)))},i:Dt,o:Dt,d(f){f&&lt(e),s.d(),a.d()}}}function Zl(t){let e,n;return e=new Bl({props:{data:t[11],domainColumn:t[0],selectedValues:t[2],opacity:t[10],searchQuery:t[13],showAnnotations:t[14],highlightedData:t[8],startDate:t[3],endDate:t[4]}}),{c(){vn(e.$$.fragment)},m(r,i){Ue(e,r,i),n=!0},p(r,i){const o={};i[0]&2048&&(o.data=r[11]),i[0]&1&&(o.domainColumn=r[0]),i[0]&4&&(o.selectedValues=r[2]),i[0]&1024&&(o.opacity=r[10]),i[0]&8192&&(o.searchQuery=r[13]),i[0]&16384&&(o.showAnnotations=r[14]),i[0]&256&&(o.highlightedData=r[8]),i[0]&8&&(o.startDate=r[3]),i[0]&16&&(o.endDate=r[4]),e.$set(o)},i(r){n||(Bt(e.$$.fragment,r),n=!0)},o(r){jt(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function jl(t){let e;return{c(){e=yt("Loading...")},m(n,r){ft(n,e,r)},d(n){n&&lt(e)}}}function Jl(t){let e;return{c(){e=yt("Parsing CSV...")},m(n,r){ft(n,e,r)},d(n){n&&lt(e)}}}function $l(t){let e;return{c(){e=yt("Downloading CSV...")},m(n,r){ft(n,e,r)},d(n){n&&lt(e)}}}function tu(t){let e;return{c(){e=Y("div"),D(e,"class","progress-bar indeterminate svelte-iw13yy")},m(n,r){ft(n,e,r)},p:Dt,d(n){n&&lt(e)}}}function eu(t){let e;function n(o,s){return o[18]?ru:nu}let r=n(t),i=r(t);return{c(){i.c(),e=ai()},m(o,s){i.m(o,s),ft(o,e,s)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&lt(e)}}}function nu(t){let e,n,r,i=ne(t[17])+"",o;return{c(){e=Y("div"),n=ut(),r=Y("div"),o=yt(i),D(e,"class","progress-bar indeterminate svelte-iw13yy"),D(r,"class","progress-label svelte-iw13yy")},m(s,l){ft(s,e,l),ft(s,n,l),ft(s,r,l),I(r,o)},p(s,l){l[0]&131072&&i!==(i=ne(s[17])+"")&&zt(o,i)},d(s){s&&lt(e),s&&lt(n),s&&lt(r)}}}function ru(t){let e,n,r,i,o,s,l=ne(t[17])+"",u,a,f=ne(t[18])+"",c,y;return{c(){e=Y("div"),n=Y("div"),r=ut(),i=Y("div"),o=yt(t[19]),s=yt("% ("),u=yt(l),a=yt(" / "),c=yt(f),y=yt(")"),D(n,"class","progress-fill svelte-iw13yy"),Ct(n,"width",t[19]+"%"),D(e,"class","progress-bar svelte-iw13yy"),D(i,"class","progress-label svelte-iw13yy")},m(v,b){ft(v,e,b),I(e,n),ft(v,r,b),ft(v,i,b),I(i,o),I(i,s),I(i,u),I(i,a),I(i,c),I(i,y)},p(v,b){b[0]&524288&&Ct(n,"width",v[19]+"%"),b[0]&524288&&zt(o,v[19]),b[0]&131072&&l!==(l=ne(v[17])+"")&&zt(u,l),b[0]&262144&&f!==(f=ne(v[18])+"")&&zt(c,f)},d(v){v&&lt(e),v&&lt(r),v&&lt(i)}}}function iu(t){let e,n,r,i,o,s,l,u,a,f,c,y,v,b,T,E,A,at,j,U,et,W,B,h,d,_,M,m,P,p,S,g,x,C,k,z,R=Ut(t[3])+"",V,L,K,nt=Ut(t[4])+"",rt,ht,q,tt,ct,J,dt,N,H,F,X,w,O,Z,Q,it,st,wt,pt,ot=t[9].length&&mr(t),G=t[1].length&&yr(t);function gt($){t[33]($)}function kt($){t[34]($)}let Mt={min:0,max:t[5].length-1};t[6]!==void 0&&(Mt.startValue=t[6]),t[7]!==void 0&&(Mt.endValue=t[7]),S=new Ul({props:Mt}),Xt.push(()=>Ln(S,"startValue",gt)),Xt.push(()=>Ln(S,"endValue",kt)),S.$on("startChange",t[35]),S.$on("endChange",t[36]);function Et($,bt){return $[12]?Kl:Wl}let xt=Et(t),_t=xt(t);const At=[Zl,Gl,Ql],vt=[];function St($,bt){return $[11].length?0:$[15]?1:2}return Q=St(t),it=vt[Q]=At[Q](t),{c(){e=Y("div"),n=Y("div"),n.innerHTML=`<h1 class="title svelte-iw13yy">Semantic Map [DEMO]</h1> 
    <p class="subtitle">Each dot represents an article. When the dots are closer together, the articles are similar in meaning.</p>`,r=ut(),i=Y("div"),o=Y("div"),s=Y("div"),s.innerHTML=`<details close=""><summary class="svelte-iw13yy">\u2795 What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-iw13yy"><p class="svelte-iw13yy">Semantic maps are tools that allow users to visually explore how different topics and ideas are connected. 
              By analyzing the relationships between articles, these maps can reveal patterns and clusters in the data.</p> 
            <p class="svelte-iw13yy">Newsrooms can use semantic maps to:</p> 
            <ul class="svelte-iw13yy"><li class="svelte-iw13yy">Audit their coverage by identifying themes that may be underrepresented or overlooked.</li> 
              <li class="svelte-iw13yy">Track how their editorial focus evolves over time.</li> 
              <li class="svelte-iw13yy">Discover which topics are being covered by other outlets, offering opportunities to adjust their editorial focus or collaborate.</li></ul></div></details>`,l=ut(),u=Y("label"),u.textContent="\u{1F4C1} Upload CSV:",a=ut(),f=Y("input"),c=ut(),y=Y("label"),y.textContent="\u{1F50D} Search Text (supports regex):",v=ut(),b=Y("input"),T=ut(),ot&&ot.c(),E=ut(),G&&G.c(),A=ut(),at=Y("label"),at.textContent="\u{1F4A1} Adjust Opacity:",j=ut(),U=Y("input"),et=ut(),W=Y("div"),B=Y("label"),B.textContent="\u{1F4C5} Date Range:",h=ut(),d=Y("input"),M=ut(),m=Y("input"),p=ut(),vn(S.$$.fragment),C=ut(),k=Y("div"),z=Y("span"),V=yt(R),L=ut(),K=Y("span"),rt=yt(nt),ht=ut(),q=Y("div"),tt=Y("button"),tt.textContent="-1W",ct=ut(),J=Y("button"),J.textContent="-1D",dt=ut(),N=Y("button"),_t.c(),H=ut(),F=Y("button"),F.textContent="+1D",X=ut(),w=Y("button"),w.textContent="+1W",O=ut(),Z=Y("div"),it.c(),D(n,"class","title-section svelte-iw13yy"),D(s,"class","nerd-box svelte-iw13yy"),D(u,"for","file-upload"),D(u,"class","svelte-iw13yy"),D(f,"id","file-upload"),D(f,"type","file"),D(f,"accept",".csv"),D(f,"class","svelte-iw13yy"),D(y,"for","search-input"),D(y,"class","svelte-iw13yy"),D(b,"id","search-input"),D(b,"type","text"),D(b,"placeholder","Search or regex pattern..."),D(b,"class","svelte-iw13yy"),D(at,"for","opacity-slider"),D(at,"class","svelte-iw13yy"),D(U,"id","opacity-slider"),D(U,"type","range"),D(U,"min","0.01"),D(U,"max","1"),D(U,"step","0.1"),D(U,"class","svelte-iw13yy"),D(B,"for","start-date"),D(B,"class","svelte-iw13yy"),D(d,"id","start-date"),D(d,"type","date"),d.value=_=Ut(t[3]),D(d,"class","svelte-iw13yy"),D(m,"id","end-date"),D(m,"type","date"),m.value=P=Ut(t[4]),D(m,"class","svelte-iw13yy"),D(k,"class","date-range-labels svelte-iw13yy"),D(tt,"class","svelte-iw13yy"),D(J,"class","svelte-iw13yy"),D(N,"class","play-button svelte-iw13yy"),D(F,"class","svelte-iw13yy"),D(w,"class","svelte-iw13yy"),D(q,"class","date-navigation svelte-iw13yy"),D(W,"class","date-controls svelte-iw13yy"),D(o,"class","filter-panel svelte-iw13yy"),D(Z,"class","scatterplot-container svelte-iw13yy"),D(i,"class","content svelte-iw13yy"),D(e,"class","container svelte-iw13yy")},m($,bt){ft($,e,bt),I(e,n),I(e,r),I(e,i),I(i,o),I(o,s),I(o,l),I(o,u),I(o,a),I(o,f),I(o,c),I(o,y),I(o,v),I(o,b),I(o,T),ot&&ot.m(o,null),I(o,E),G&&G.m(o,null),I(o,A),I(o,at),I(o,j),I(o,U),zn(U,t[10]),I(o,et),I(o,W),I(W,B),I(W,h),I(W,d),I(W,M),I(W,m),I(W,p),Ue(S,W,null),I(W,C),I(W,k),I(k,z),I(z,V),I(k,L),I(k,K),I(K,rt),I(W,ht),I(W,q),I(q,tt),I(q,ct),I(q,J),I(q,dt),I(q,N),_t.m(N,null),I(q,H),I(q,F),I(q,X),I(q,w),I(i,O),I(i,Z),vt[Q].m(Z,null),st=!0,wt||(pt=[mt(f,"change",t[23]),mt(b,"input",t[26]),mt(U,"change",t[30]),mt(U,"input",t[30]),mt(U,"input",t[27]),mt(d,"change",t[31]),mt(m,"change",t[32]),mt(tt,"click",t[37]),mt(J,"click",t[38]),mt(N,"click",t[25]),mt(F,"click",t[39]),mt(w,"click",t[40])],wt=!0)},p($,bt){$[9].length?ot?ot.p($,bt):(ot=mr($),ot.c(),ot.m(o,E)):ot&&(ot.d(1),ot=null),$[1].length?G?G.p($,bt):(G=yr($),G.c(),G.m(o,A)):G&&(G.d(1),G=null),bt[0]&1024&&zn(U,$[10]),(!st||bt[0]&8&&_!==(_=Ut($[3])))&&(d.value=_),(!st||bt[0]&16&&P!==(P=Ut($[4])))&&(m.value=P);const Nt={};bt[0]&32&&(Nt.max=$[5].length-1),!g&&bt[0]&64&&(g=!0,Nt.startValue=$[6],On(()=>g=!1)),!x&&bt[0]&128&&(x=!0,Nt.endValue=$[7],On(()=>x=!1)),S.$set(Nt),(!st||bt[0]&8)&&R!==(R=Ut($[3])+"")&&zt(V,R),(!st||bt[0]&16)&&nt!==(nt=Ut($[4])+"")&&zt(rt,nt),xt!==(xt=Et($))&&(_t.d(1),_t=xt($),_t&&(_t.c(),_t.m(N,null)));let Kt=Q;Q=St($),Q===Kt?vt[Q].p($,bt):(Sr(),jt(vt[Kt],1,1,()=>{vt[Kt]=null}),Er(),it=vt[Q],it?it.p($,bt):(it=vt[Q]=At[Q]($),it.c()),Bt(it,1),it.m(Z,null))},i($){st||(Bt(S.$$.fragment,$),Bt(it),st=!0)},o($){jt(S.$$.fragment,$),jt(it),st=!1},d($){$&&lt(e),ot&&ot.d(),G&&G.d(),We(S),_t.d(),vt[Q].d(),wt=!1,Yt(pt)}}}function ne(t){if(!t||t<=0)return"0 KB";const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${e[r]}`}function Ut(t){return t?t.toISOString().split("T")[0]:""}function ou(t,e,n){const r="https://charlotte-local-news.s3.us-east-2.amazonaws.com/articles_full_2d.csv";let i=[],o=[],s="org",l=[],u=new Set,a=.5,f=null,c=null,y=[],v=[],b=0,T=0,E=!1,A=null,at=[],j="",U=!1,et=!1,W="idle",B=0,h=0,d=0;wn(async()=>{try{n(15,et=!0),n(16,W="downloading"),n(17,B=0),n(18,h=0),n(19,d=0);const N=await fetch(r,{mode:"cors",cache:"no-store"});if(!N.ok)throw new Error(`HTTP ${N.status}`);const H=N.headers.get("content-length");n(18,h=H?parseInt(H,10):0);let F="";if(N.body&&N.body.getReader){const X=N.body.getReader(),w=[];let O=0;for(;;){const{done:it,value:st}=await X.read();if(it)break;w.push(st),O+=st.byteLength,n(17,B=O),h&&n(19,d=Math.round(O/h*100))}const Z=new Uint8Array(O);let Q=0;for(const it of w)Z.set(it,Q),Q+=it.byteLength;F=new TextDecoder().decode(Z)}else F=await N.text();n(16,W="parsing"),await Promise.resolve(_(F)),n(16,W="idle")}catch(N){console.error("Failed to load CSV:",N)}finally{n(15,et=!1)}return()=>{A&&clearInterval(A)}});function _(N){const H=yi.parse(N,{header:!0});n(28,i=H.data.filter(F=>F.x&&F.y&&F.date).map((F,X)=>({...F,x:+F.x,y:+F.y,date:new Date(F.date),id:X}))),n(9,o=H.meta.fields||[]),n(5,v=[...new Set(i.map(F=>F.date.getTime()))].sort((F,X)=>F-X).map(F=>new Date(F))),n(3,f=v[0]),n(4,c=v[v.length-1]),n(6,b=0),n(7,T=v.length-1),s&&n(1,l=[...new Set(i.map(F=>F[s]).filter(Boolean))])}function M(N){n(0,s=N.target.value),n(1,l=s?[...new Set(i.map(H=>H[s]).filter(Boolean))]:[]),n(2,u=new Set),n(14,U=!1)}function m(N){const H=[...N.target.selectedOptions].map(X=>X.value);H.length===l.length||H.length===0?(n(2,u=new Set),n(8,at=[])):(n(2,u=new Set(H)),n(8,at=i.filter(X=>u.has(X[s])&&(!f||X.date>=f)&&(!c||X.date<=c)))),n(14,U=!1)}function P(N,H,F=!1){F?(n(3,f=v[N]||v[0]),n(4,c=v[H]||v[v.length-1])):(n(3,f=N),n(4,c=H)),n(14,U=!1)}function p(){if(f){const N=f.getTime();n(6,b=Math.max(0,v.findIndex(H=>H.getTime()>=N)))}else n(6,b=0);if(c){const N=c.getTime(),H=v.findIndex(F=>F.getTime()>=N);n(7,T=H>=0?H:v.length>0?v.length-1:0)}else n(7,T=v.length-1);b>T&&n(6,b=T),T<b&&n(7,T=b)}function S(N,H){if(N.detail!==void 0)H==="start"?(n(6,b=N.detail),b>T&&n(6,b=T)):(n(7,T=N.detail),T<b&&n(7,T=b)),P(b,T,!0);else{const F=N.target.value?new Date(N.target.value):null;H==="start"?P(F,c):P(f,F),p()}}function g(N){const H=N.target.files[0];if(H){const F=new FileReader;n(14,U=!1),F.onload=X=>_(X.target.result),F.readAsText(H)}}function x(N){const H=T-b;let F=b+N,X=T+N;F<0&&(F=0,X=H),X>=v.length&&(X=v.length-1,F=Math.max(0,X-H)),n(6,b=F),n(7,T=X),P(b,T,!0)}function C(){E?(clearInterval(A),n(12,E=!1)):(n(12,E=!0),n(14,U=!1),A=setInterval(()=>{if(T>=v.length-1){clearInterval(A),n(12,E=!1);return}x(1)},500))}function k(N){n(13,j=N.target.value),n(14,U=!1)}function z(){n(14,U=!1)}function R(){s=fi(this),n(0,s),n(9,o)}function V(){a=li(this.value),n(10,a)}const L=N=>S(N,"start"),K=N=>S(N,"end");function nt(N){b=N,n(6,b)}function rt(N){T=N,n(7,T)}const ht=N=>S(N,"start"),q=N=>S(N,"end"),tt=()=>x(-7),ct=()=>x(-1),J=()=>x(1),dt=()=>x(7);return t.$$.update=()=>{t.$$.dirty[0]&256&&new Set(at.map(N=>N.id)),t.$$.dirty[0]&268435487&&n(11,y=i.map(N=>({...N,isHighlighted:u.size>0&&u.size<l.length&&u.has(N[s])&&(!f||N.date>=f)&&(!c||N.date<=c)}))),t.$$.dirty[0]&96&&v.length>1&&b/(v.length-1)*100,t.$$.dirty[0]&160&&v.length>1&&T/(v.length-1)*100},[s,l,u,f,c,v,b,T,at,o,a,y,E,j,U,et,W,B,h,d,M,m,S,g,x,C,k,z,i,R,V,L,K,nt,rt,ht,q,tt,ct,J,dt]}class su extends Qe{constructor(e){super(),Ke(this,e,ou,iu,Ye,{},null,[-1,-1])}}new su({target:document.getElementById("app")});
